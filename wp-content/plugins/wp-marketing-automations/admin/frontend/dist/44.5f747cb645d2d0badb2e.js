(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{777:function(t,e,n){"use strict";var a=n(219),r=n(0),o=n(2),c=n(7),i=function(t){var e={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:"admin.php?page=autonami-automations&edit=".concat(t)},engagement:{name:Object(o.__)("Engagement","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/engagement")}};return Object(c.fb)()&&(e.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/orders")}),e};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},f=m.automation_nav,b=Object(a.a)(),p=b.setActiveMultiple,O=b.resetHeaderMenu,g=b.setL2NavType,j=b.setL2Nav,d=b.setBackLink,v=b.setL2Title,w=b.setL2Content,y=b.setBackLinkLabel,h=b.setL2NavAlign,E=b.setPageHeader;return Object(r.useEffect)((function(){O(),!c&&g("menu"),j(s?i(s):f),p({leftNav:"automations",rightNav:t}),n&&d(n),n&&s&&d("admin.php?page=autonami-automations&edit=".concat(s)),c&&y(Object(o.__)("All Automations","wp-marketing-automations")),s&&y(Object(o.__)("Back to Automation","wp-marketing-automations")),s&&h("right"),e&&v(e),!n&&u&&w(u),E("Automations"),l&&j({})}),[t]),!0}},788:function(t,e,n){"use strict";var a=n(221),r=n(238);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=u(t,["getStateProp"]),o=Object(a.a)(r.a.recipient).getStateProp,i=Object(a.a)(r.a.conversion).getStateProp;return c(c({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return e("countData")}})}},789:function(t,e,n){"use strict";var a=n(222),r=n(7),o=n(238);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.fetch,n=t.setStateProp,c=s(t,["fetch","setStateProp"]),u=Object(a.a)(o.a.recipient),l=u.fetch,m=u.setStateProp,f=Object(a.a)(o.a.conversion),b=f.fetch,p=f.setStateProp;return i(i({},c),{},{fetch:function(t,n,a,o){var c=n.s,i=(n.page,n.filter,n.path,{offset:a,limit:o,status:t,search:c,filters:s(n,["s","page","filter","path"])});e("GET",Object(r.g)("/automations"),i)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){l("GET",Object(r.g)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){m(t,e)},fetchConversion:function(t,e,n){b("GET",Object(r.g)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){p(t,e)}})}},921:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(79),o=n(2),c=n(220),i=n(788),u=n(789),s=n(3),l=n(46),m=n(122),f=n(17),b=n(4),p=n(121),O=n(13),g=n.n(O),j=n(7),d=n(35),v=n(40),w=n.n(v),y=n(104),h=n.n(y),E=n(45),k=n.n(E),_=n(14),P=n(245);function C(t,e,n,a,r,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,r)}var S=function(t){var e=t.query,n=e.hasOwnProperty("s")?e.s:"",r=w()(n)?[]:[{key:n,label:Object(o.__)("Search Term: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],c=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h()(n)){t.next=2;break}return t.abrupt("return");case 2:if(a=n.find((function(t){return k()(t,"searchTerm")})),!(Object(s.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("key"))){t.next=6;break}return window.location.href="admin.php?page=autonami-automations&edit="+n[0].key,t.abrupt("return");case 6:if(r=Object(s.isUndefined)(a)?void 0:a.searchTerm,o=k()(e,"s")&&!w()(e.s)?e.s:"",r!==o){t.next=10;break}return t.abrupt("return");case 10:Object(_.j)({s:r},"/automations",e);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){C(o,a,r,c,i,"next",t)}function i(t){C(o,a,r,c,i,"throw",t)}c(void 0)}))});return function(t){return n.apply(this,arguments)}}();return Object(a.createElement)(d.a,{autocompleter:P.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:r,onChange:c,placeholder:Object(o.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},x=n(5),A=n.n(x),I=n(777),N=n(80),T=n(81),L=n(34);function R(t,e,n,a,r,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,r)}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var F=function(t){var e=D(Object(a.useState)(!1),2),n=e[0],r=e[1],c=D(Object(a.useState)(""),2),i=c[0],u=c[1],s=D(Object(a.useState)({}),2),l=s[0],m=s[1],f=D(Object(a.useState)(null),2),p=f[0],O=f[1],d=t.onCloseModal;Object(a.useEffect)((function(){r(!1),m({}),O("")}),[]);var v=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p){t.next=3;break}return u("Automation title is required field"),t.abrupt("return");case 3:return u(""),r(!0),t.prev=5,t.next=8,g()({path:Object(j.g)("/automations/create/"),method:"POST",data:{title:p}});case 8:if(!((e=t.sent)&&e.result&&e.result.automation_id)){t.next=12;break}return window.location.href="admin.php?page=autonami-automations&edit="+e.result.automation_id,t.abrupt("return");case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),r(!1),m({error:!0,message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[5,14]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){R(o,a,r,c,i,"next",t)}function i(t){R(o,a,r,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(a.createElement)(b.Modal,{title:Object(o.__)("New Automation","wp-marketing-automations"),className:"bwf-admin-modal bwf-admin-modal-medium",onRequestClose:function(){return d()}},i&&Object(a.createElement)(b.Notice,{status:"error",onRemove:function(){return u("")}},i),n||l&&l.error||l&&l.success?l&&l.success&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(N.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):l&&l.error&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(T.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):Object(a.createElement)(L.a,null):Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&v()}},Object(a.createElement)(b.TextControl,{placeholder:Object(o.__)("Enter Name","wp-marketing-automations"),autoFocus:!0,label:Object(o.__)("Name","wp-marketing-automations"),value:p,onChange:function(t){return O(t)},disabled:n}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(b.Button,{onClick:function(){return d()},isTertiary:!0},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(b.Button,{isPrimary:!0,disabled:n,onClick:v},Object(o.__)("Add","wp-marketing-automations")))))},M=n(12),q=n(82),G=n(56),U=n(126),V=n(219),z=n(226);function H(t,e,n,a,r,o,c){try{var i=t[o](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(a,r)}function J(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function c(t){H(o,a,r,c,i,"next",t)}function i(t){H(o,a,r,c,i,"throw",t)}c(void 0)}))}}function Q(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||X(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(t,e)||X(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){if(t){if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var tt=function(t){var e=t.type,n=t.query,r=n.s,O=Object(u.a)(),d=Object(i.a)(),v=O.fetch,w=O.setAutomationListValues,y=d.getAutomations,h=d.getPageNumber,E=d.getPerPageCount,k=d.getTotalCount,P=d.getOffset,C=d.getLoadingStatus,x=d.getCountData,N=Z(Object(a.useState)({loading:!1,status:!1}),2),T=N[0],L=N[1],R=Z(Object(a.useState)(0),2),D=R[0],B=R[1],H=Z(Object(a.useState)(0),2),$=H[0],W=H[1],X=Z(Object(a.useState)(!1),2),Y=X[0],tt=X[1],et=y(),nt=P(),at=E(),rt=C(),ot=k(),ct=h(),it=x(),ut="all";Object(s.isEmpty)(e)||("active"===e?ut=1:"inactive"===e&&(ut=2));var st=Object(G.a)(Object(j.L)()).formatAmount;Object(a.useEffect)((function(){v(ut,n,nt,at)}),[nt,at,e,r]);var lt=Object(a.createElement)(a.Fragment,null,Object(a.createElement)(b.Button,{isPrimary:!0,onClick:function(){return tt(!0)},className:"bwf-display-flex"},Object(o.__)("Add New","wp-marketing-automations"))),mt=Object(U.a)().getPageCountData,ft=Object(V.a)().setPageCountData,bt=mt();Object(a.useEffect)((function(){ft(K(K({},bt),it));var t=0,e=0;it.hasOwnProperty("status_count")&&(it.status_count.hasOwnProperty("active")&&(e=parseInt(it.status_count.active)),it.status_count.hasOwnProperty("inactive")&&(t=parseInt(it.status_count.inactive))),B(e),W(t)}),[it]),Object(I.a)("automations","","",!1,lt,0);var pt=[{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0},{key:"actions",label:Object(o.__)("Actions","wp-marketing-automations"),isLeftAligned:!0},{key:"tasks",label:Object(o.__)("Tasks","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-400 bwf-pipe-list"},{key:"total_run",label:Object(o.__)("Total Runs","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-120"},Object(j.fb)()&&{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-col-center bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-60"}],Ot=function(t){t!==at&&w("limit",t)},gt=function(t){var e=[],n="";return Object(s.isEmpty)(t.automation_actions)||Object.entries(t.automation_actions).map((function(t){var a=Z(t,2),r=(a[0],a[1]);Object(s.isEmpty)(n)&&(n=r[0]),e=[].concat(Q(e),Q(r))})),Object(a.createElement)(a.Fragment,null,Object(s.isEmpty)(n)?"-":Object(a.createElement)(a.Fragment,null,!Object(s.isEmpty)(n)&&n,!Object(s.isEmpty)(e)&&e.length>1&&Object(a.createElement)(q.a,{items:e})))},jt=function(){var t=J(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L({status:!0,loading:!0}),t.prev=1,t.next=4,g()({path:Object(j.g)("/automations"),method:"DELETE",data:{automation_ids:[e]}}).then((function(t){200===t.code?(L({status:!0,success:t.message}),setTimeout((function(){v(ut,n,0,at)}),1e3)):L({status:!0,error:t.message})}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),L({status:!0,error:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),dt=function(){var t=J(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L({status:!0,loading:!0}),t.prev=1,t.next=4,g()({path:Object(j.g)("/automations/".concat(e,"/duplicate")),method:"POST"}).then((function(t){200===t.code?(L({status:!0,success:t.message}),v(ut,n,0,at)):L({status:!0,error:t.message})}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),L({status:!0,error:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),vt=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},wt=function(){var t=J(regeneratorRuntime.mark((function t(){var e,n,a,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,n=r.length>1&&void 0!==r[1]?r[1]:"automation",L({status:!0,loading:!0}),a="",a=e?Object(j.g)("/automations/".concat(e,"/export")):Object(j.g)("/automations/export/"),t.prev=5,t.next=8,g()({path:a,method:"GET"}).then((function(t){200===t.code?(vt(t.result,n),L({status:!0,success:Object(o.__)("File Exported Successfully","wp-marketing-automations")})):L({status:!0,error:t.message})}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),L({status:!0,error:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),yt=function(){var t=J(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L({status:!0,loading:!0}),t.prev=1,t.next=4,g()({path:Object(j.g)("/automations/toggle-state"),method:"POST",data:{state:e,automation_id:n}}).then((function(t){if(200===t.code){L({status:!0,success:t.message});var a;a=et.map((function(t){return t.id==n&&(t.status=e?"1":"0"),t})),w("automations",a)}else L({status:!0,error:t.message})}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),L({status:!0,error:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),ht=function(t){switch(parseInt(t.status)){case 1:return Object(o.__)("Active","wp-marketing-automations");default:return Object(o.__)("Inactive","wp-marketing-automations")}},Et=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+t.id,className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},kt=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},_t=function(t){var e="-";return Object(s.isEmpty)(t.tasks_count)||(e=Object.entries(t.tasks_count).map((function(e){var r=Z(e,2),o=(r[0],r[1]);return Object(a.createElement)(f.c,null,Object(a.createElement)(b.Tooltip,{text:o.name,position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},o.count>0?Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(_.j)({path:"/automations/task-history/".concat(o.name.toLowerCase()),automation:t.id},"/",n)},style:{display:"inline-flex"}},Object(a.createElement)(M.a,{icon:"status-"+o.name.toLowerCase(),width:18,height:18})," ",o.count):Object(a.createElement)(a.Fragment,null,Object(a.createElement)(M.a,{icon:"status-"+o.name.toLowerCase(),width:18,height:18})," ",o.count))))}))),Object(a.createElement)(f.a,{gap:2,justify:"center"},e)},Pt=Array.isArray(et)?et.map((function(t){return[{display:(e=t,Object(a.createElement)(l.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(m.a,null,Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+e.id,className:"bwf-a-no-underline"},Object(a.createElement)(f.a,{justify:"flex-start"},Object(a.createElement)(f.c,null,Object(a.createElement)(M.a,{icon:"edit"})),Object(a.createElement)(f.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),Object(a.createElement)(m.a,{isClickable:!0,onInvoke:function(){yt(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(f.a,{justify:"flex-start"},Object(a.createElement)(f.c,null,Object(a.createElement)(M.a,{icon:1===parseInt(e.status)?"pause":"play"})),Object(a.createElement)(f.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(m.a,{isClickable:!0,onInvoke:function(){L({status:!0,loading:!0}),dt(e.id),n()}},Object(a.createElement)(f.a,{justify:"flex-start"},Object(a.createElement)(f.c,null,Object(a.createElement)(M.a,{icon:"duplicate"})),Object(a.createElement)(f.c,null,Object(o.__)("Duplicate","wp-marketing-automations")))),Object(a.createElement)(m.a,{isClickable:!0,onInvoke:function(){wt(e.id,e.name),n()}},Object(a.createElement)(f.a,{justify:"flex-start"},Object(a.createElement)(f.c,null,Object(a.createElement)(M.a,{icon:"export"})),Object(a.createElement)(f.c,null,Object(o.__)("Export","wp-marketing-automations")))),Object(a.createElement)(m.a,{isClickable:!0,onInvoke:function(){L({status:!0,confirmText:Object(o.__)("Are you sure you want to delete this automation ?","wp-marketing-automations"),buttonConfirm:Object(o.__)("Confirm","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return jt(e.id)}}),n()}},Object(a.createElement)(f.a,{justify:"flex-start"},Object(a.createElement)(f.c,null,Object(a.createElement)(M.a,{icon:"trash"})),Object(a.createElement)(f.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:Et(t),value:t.name},{display:kt(t),value:t.event},{display:gt(t),value:""},{display:_t(t),value:""},{display:parseInt(t.run_count)>0?parseInt(t.run_count):"0",value:t.run_count},Object(j.fb)()&&{display:t.revenue&&parseFloat(t.revenue)>0?st(t.revenue):"-",value:""},{display:ht(t),value:""}];var e})):[],Ct=A()("bwfcrm-campaign-list-table",{"has-search":!0}),St=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(M.a,{icon:"zero-automation",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Grow your business with marketing automation","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Create Automations for abandoned cart, post-purchase, win-back, and more. Build automated workflows that generate profits while you sleep. Connect your site to Zapier, Slack, Twilio, Google Sheets and explore limitless automation possibilities.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Add New Automation","wp-marketing-automations"),proCheck:!1,onClick:function(){tt(!0)}}]}}],xt=Object(a.createElement)(a.Fragment,null,Object(a.createElement)("span",{className:"bwf-mr-10 bwf-cursor-pointer",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){wt()}},Object(a.createElement)(M.a,{icon:"export",size:25})),Object(a.createElement)("span",{className:"bwf-mr-10 bwf-cursor-pointer",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){Object(_.j)({path:"/automations/import"},"/",n)}},Object(a.createElement)(M.a,{icon:"import",size:25})));return Object(a.createElement)(a.Fragment,null,Object(j.u)()?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(b.ButtonGroup,null,Object(a.createElement)(b.Button,{isPrimary:!e,isSecondary:!!e,onClick:function(){return Object(_.j)({path:"/automations/"},"/",n)}},Object(o.__)("All","wp-marketing-automations"),it.hasOwnProperty("automations")&&parseInt(it.automations)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(it.automations)):""),Object(a.createElement)(b.Button,{isPrimary:e&&"active"===e,isSecondary:e&&"active"!==e,onClick:function(){return Object(_.j)({path:"/automations/list/active"},"/",n)}},Object(o.__)("Active","wp-marketing-automations"),parseInt(D)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(D)):""),Object(a.createElement)(b.Button,{isPrimary:e&&"inactive"===e,isSecondary:e&&"inactive"!==e,onClick:function(){return Object(_.j)({path:"/automations/list/inactive"},"/",n)}},Object(o.__)("Inactive","wp-marketing-automations"),parseInt($)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt($)):"")),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(c.a,{className:Ct,rows:Pt,headers:pt,query:{paged:ct},rowsPerPage:at,totalRows:ot,isLoading:rt,onPageChange:function(t,e){w("offset",(t-1)*at)},onQueryChange:function(t){return"per_page"!==t?function(){}:Ot},rowHeader:!0,showMenu:!1,actions:[Object(a.createElement)(S,{key:"search",query:n})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:xt}),Object(a.createElement)(p.a,{confirmText:T.confirmText,confirmButtonText:T.buttonConfirm,cancelButtonText:T.buttonCancel,onConfirm:T.onConfirm,isLoading:T.loading,successMessage:T.success,errorMessage:T.error,onRequestClose:function(){return L({status:!1})},isOpen:T.status,isDelete:"Are you sure you want to delete this automation ?"==T.confirmText})):Object(a.createElement)(z.a,{data:St}),Y&&Object(a.createElement)(F,{onCloseModal:function(){return tt(!1)}}))};e.default=function(t){var e=t.match.params.type,n=Object(_.h)();return Object(j.d)("Automations"),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.a,null),Object(a.createElement)("div",{className:"bwfcrm-automations-list"},Object(a.createElement)(tt,{query:n,type:e})))}}}]);