(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{831:function(e,t,c){},906:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c(2),a=c(4),r=c(3),i=c(59),s=c(25),l=c(229),b=c(116),u=c(7),m=c(12),d=function(e){var t=e.isSyncable,c=void 0!==t&&t,r=e.isConnected,l=e.id,b=e.connector,d=Object(i.b)(),f=!Object(u.X)()||!Object(u.V)();return Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)("div",{className:"wfco-connector-btns-left"},!f&&!!r&&Object(n.createElement)(a.Button,{isLink:!0,icon:"no-alt",onClick:function(){return d(s.a.showDisconnectModal(b))}},Object(o.__)("Disconnect","wp-marketing-automations"))),Object(n.createElement)("div",{className:"wfco-connector-btns-right"},!!f&&Object(n.createElement)(a.Button,{className:"bwf-display-flex",isPrimary:!0,onClick:function(){return d(s.a.showGetPro(!0))}},Object(n.createElement)(m.a,{icon:"lock",size:15,color:"#ffffff"}),Object(n.createElement)("span",null,Object(o.__)("Locked","wp-marketing-automations"))),!f&&!r&&Object(n.createElement)(a.Button,{isPrimary:!0,onClick:function(){return d(s.a.showSettingsModal(b))}},Object(o.__)("Connect","wp-marketing-automations")),!f&&!!c&&!!parseInt(l)&&!!r&&Object(n.createElement)(a.Button,{isPrimary:!0,onClick:function(){return d(s.a.showSyncModal(b))}},Object(o.__)("Sync","wp-marketing-automations")),!f&&!!r&&Object(n.createElement)(a.Button,{isSecondary:!0,onClick:function(){return d(s.a.showSettingsModal(b))}},Object(o.__)("Settings","wp-marketing-automations"))))},f=function(){return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap","data-type":"<?php echo $this->get_type() ?>"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)("div",{className:"wfco-connector-img-section"},Object(n.createElement)(b.a,{height:120,width:120}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco_connector_info"},Object(n.createElement)("div",{className:"wfco_connector_info_head"},Object(n.createElement)(b.a,null)),Object(n.createElement)("div",{className:"wfco_connector_info_details"},Object(n.createElement)(b.a,{width:180}),Object(n.createElement)(b.a,{width:160}),Object(n.createElement)(b.a,{width:140}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)(b.a,null)))))},O=function(e){var t=e.connector,c=e.connector_id,o=e.name,a=e.logo,r=e.description,i=e.is_connected,s=e.is_syncable;e.meta;return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap","data-type":"<?php echo $this->get_type() ?>"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},!!a&&Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)("div",{className:"wfco-connector-img-section"},Object(n.createElement)("img",{src:a}))),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco_connector_info"},!!o&&Object(n.createElement)("div",{className:"wfco_connector_info_head"},o),!!r&&Object(n.createElement)("div",{className:"wfco_connector_info_details"},r)),Object(n.createElement)("div",{className:"clear"})),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)(d,{isConnected:i,isSyncable:s,connector:t,id:c}))))},j=c(123);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var w=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(i.b)(),c=Object(i.c)(l.a.shouldShowGetPro),a=!Object(u.V)()&&Object(u.X)()?{modalContent:{proLink:null,title:Object(o.__)("Autonami Pro Connector addon not activated","wp-marketing-automations"),content:Object(o.__)("Activate the addon to connect with your favourite service. This pro addon is available in your account for download.","wp-marketing-automations"),demoLabel:Object(o.__)("Close","wp-marketing-automations")}}:{};return Object(n.createElement)(j.a,_({},a,{isOpen:c,onRequestClose:function(){return t(s.a.showGetPro(!1))}}))},v=c(252),g=c(34),p=c(80);function E(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function h(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?E(Object(c),!0).forEach((function(t){C(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):E(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function C(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}var k=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.settingsModalOpen),c=Object(i.c)(l.a.saveConnectorError),b=Object(i.c)(l.a.saveConnectorStatus),u=!!b&&"idle"===b,m=!!b&&"loading"===b,d=!!b&&"connected"===b,f=Object(i.c)(l.a.getCurrentConnector),O=f.fields_schema,j=f.fields_values,_=f.name,w=void 0===_?"":_,E=f.is_connected,C=f.connector,k=f.connector_id,y=f.meta,N=(y=void 0===y?{}:y).redirect_url,S=void 0===N?"":N,M=y.connect_type,P=void 0===M?"normal":M,D=Object(n.useCallback)((function(t){return e(s.a.saveConnector({connector:C,settings:E?h(h({},t),{},{id:k}):t}))}),[s.a,E,k]),T=Object(n.useCallback)((function(){window.location.href=S}),[S]);return t?Object(n.createElement)(a.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwfan-connector-settings-modal",isDismissible:u,shouldCloseOnClickOutside:!1,shoulfCloseOnEsc:!1,onRequestClose:function(){return!!u&&e(s.a.hideSettingsModal())},title:!!w&&Object(o.__)("Connect with ","wp-amrketing-automations-crm")+w},Object(n.createElement)("div",{className:"bwfan-connector-settings-modal-inner"},!!c&&Object(n.createElement)(a.Notice,{status:"error",isDismissible:!0,onRemove:function(){return e(s.a.clearSaveConnectorError())}},c),!!m&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(g.a,null)),!!d&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(p.a,null),Object(n.createElement)("div",{className:"bwf-h1"},Object(o.__)("Connected / Updated Successfully","wp-marketing-automation-crm"))),!!u&&Object(r.size)(O)>0&&Object(n.createElement)(v.a,{fields:O,values:j,handleSubmit:function(e){return"redirect_url"===P?T():D(e)},submitButtonTitle:E&&"redirect_url"!==P?Object(o.__)("Update","wp-marketing-automations"):Object(o.__)("Connect","wp-marketing-automations")}),!!u&&0===Object(r.size)(O)&&Object(n.createElement)("p",null,Object(o.__)("No settings available for this connector","wp-marketing-automations")))):null},y=c(121),N=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.disconnectModalOpen),c=Object(i.c)(l.a.deleteConnectorError),a=Object(i.c)(l.a.deleteConnectorStatus),r=!!a&&"idle"===a,b=!!a&&"loading"===a,u=!!a&&"success"===a,m=Object(i.c)(l.a.getCurrentConnector).connector;return Object(n.createElement)(y.a,{isOpen:t,confirmText:Object(o.__)("Disconnecting Connector?","wp-marketing-automations"),confirmDescription:Object(o.__)("All the action, tasks, logs of this connector will be deleted.","wp-marketing-automations"),confirmButtonText:Object(o.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return e(s.a.deleteConnector(m))},isLoading:b,successMessage:!!u&&Object(o.__)("Disconnected Successfully!","wp-marketing-automations"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideDisconnectModal())}})},S=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.syncModalOpen),c=Object(i.c)(l.a.syncConnectorError),a=Object(i.c)(l.a.syncConnectorStatus),r=!!a&&"idle"===a,b=!!a&&"loading"===a,u=!!a&&"success"===a,m=Object(i.c)(l.a.getCurrentConnector),d=m.connector,f=m.connector_id;return Object(n.createElement)(y.a,{isOpen:t,confirmText:Object(o.__)("Sync Connector?","wp-marketing-automations"),confirmDescription:Object(o.__)("All the data of this Connector will be Synced.","wp-marketing-automations"),confirmButtonText:Object(o.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return e(s.a.syncConnector({connector:d,id:f}))},isLoading:b,successMessage:!!u&&Object(o.__)("Synced Successfully!","wp-marketing-automations"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideSyncModal())}})},M=c(14),P=function(e){var t=e.wfco_connector,c=void 0===t?"":t,o=e.access_token,a=void 0===o?"":o,b=e.bwfco_access_t,u=void 0===b?"":b,m=Object(i.b)(),d="success"===Object(i.c)(l.a.getConnectorsStatus),f=Object(n.useCallback)((function(){m(s.a.showSettingsModal(c)),m(s.a.saveConnector({connector:c,settings:{access_token:Object(r.isEmpty)(a)?u:a}})),Object(M.j)({page:e.page},e.path,{})}),[c,a,m,u]);return Object(n.useEffect)((function(){"bwfco_slack"===c&&(a||u)&&d&&f()}),[c,a,f,d,u]),null},D=function(e){var t=e.bitly,c=void 0===t?"":t,o=e.login,a=void 0===o?"":o,r=e.access_token,b=void 0===r?"":r,u=e.bwfco_access_t,m=void 0===u?"":u,d=Object(i.b)(),f="success"===Object(i.c)(l.a.getConnectorsStatus),O=Object(n.useCallback)((function(){d(s.a.showSettingsModal("bwfco_bitly")),d(s.a.saveConnectorSuccess({connector:"bwfco_bitly",id:"bitly"})),Object(M.j)({page:e.page},e.path,{});var t=setTimeout((function(){d(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}),[d]);return Object(n.useEffect)((function(){"yes"===c&&(b||m)&&a&&O()}),[c,b,a,O,f,m]),null},T=function(e){var t=e.wfco_connector,c=void 0===t?"":t,a=e.status,r=void 0===a?0:a,b=e.error_msg,u=Object(i.b)(),m="success"===Object(i.c)(l.a.getConnectorsStatus);return Object(n.useEffect)((function(){if("bwfco_mautic"===c&&"success"===r&&m){u(s.a.showSettingsModal(c)),u(s.a.dummyConnectorSuccess()),Object(M.j)({page:e.page},e.path,{});var t=setTimeout((function(){u(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}if("bwfco_mautic"===c&&"failed"===r&&m){u(s.a.showSettingsModal(c));var n=b||Object(o.__)("Unknown Error Occurred","wp-marketing-automations");u(s.a.saveConnectorFailed(n))}}),[c,r,m]),null},B=c(219),x=c(126),L=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},o=Object(B.a)(),a=o.setActiveMultiple,r=o.setL2NavType,i=o.setL2Nav,s=o.resetHeaderMenu,l=o.setPageHeader,b=o.setPageCountData,u=Object(x.a)(),m=u.getPageCountData,d=m();return Object(n.useEffect)((function(){d!==t&&(s(),a({leftNav:"connectors",rightNav:e}),r("menu"),i(c.connectors_nav),l("Connectors"),t&&b(t))}),[e,t]),!0},A=c(22),R=(c(831),function(e){var t=e.connector,c=void 0===t?"":t,o=e.code,a=void 0===o?"":o,r=e.state,b=void 0===r?"":r,u=e.client_id,m=void 0===u?"":u,d=e.client_secret,f=void 0===d?"":d,O=Object(i.b)(),j="success"===Object(i.c)(l.a.getConnectorsStatus),_=Object(i.c)(l.a.getConnector("bwfco_keap")),w=_&&_.fields_values?_.fields_values:{},v=_&&_.fields_schema?_.fields_schema:{},g=Object(n.useCallback)((function(){O(s.a.showSettingsModal("bwfco_keap")),O(s.a.saveConnector({connector:"bwfco_keap",settings:{code:a,state:b,client_id:m,client_secret:f}}))}),[c,a,b,O,m,f]);return Object(n.useEffect)((function(){if((w.code||w.state)&&w.client_id&&w.client_secret){var t={client_id:w.client_id,client_secret:w.client_secret};O(s.a.setConnectorSchema({connector:"bwfco_keap",schema:v,values:t,saveStatus:"connected"})),Object(M.j)({page:e.page},e.path,{})}}),[w]),Object(n.useEffect)((function(){"keap"===c&&a&&b&&j&&g()}),[c,a,b,g,j]),null});function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var z=Object(n.memo)((function(e){var t=e.size,c=void 0===t?15:t;return Object(n.createElement)("div",{className:"wrap wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},Array.from(Array(c).keys()).map((function(e){return Object(n.createElement)(f,{key:e})})))))})),G=Object(n.memo)((function(e){var t=e.selected,c=void 0===t?"all":t,b=location&&location.search?Object(A.parse)(location.search.substring(1)):{};P(b),D(b),T(b),R(b);var m=Object(i.b)(),d=Object(i.c)(l.a.getConnectorsStatus),f=Object(i.c)(l.a.getConnectorsError),j=Object(i.c)(l.a.getConnectors),_="loading"===d,v=Object(i.c)(l.a.getConnectorsCount),g=0;Object(n.useEffect)((function(){Object(u.d)(Object(o.__)("Connectors","wp-marketing-automations")),m(s.a.getConnectors()),g=0}),[]);var p={all:Object(o.__)("No connector found","wp-marketing-automations"),active:Object(o.__)("No active connector found","wp-marketing-automations"),inactive:Object(o.__)("No inactive connector found","wp-marketing-automations")};L(Object(o.__)("Connectors","wp-marketing-automations"),c,v);var E=Object(n.useMemo)((function(){if(!Object(r.isEmpty)(j)){var e=[],t={all:0,active:0,inactive:0};return Object.keys(j).sort().map((function(n){var o=j[n];("all"===c||"inactive"===c&&!o.is_connected||"active"===c&&o.is_connected)&&(g++,e.push(n)),t.all++,o.is_connected?t.active++:t.inactive++})),m(s.a.getCount(t)),Object(n.createElement)("div",{className:"wrap wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},e.map((function(e){return Object(n.createElement)(O,q({key:e,connector:e},j[e]))})),0===g&&Object(n.createElement)("div",{className:"bwf-p"},p[c]))))}}),[j,c]);return Object(n.createElement)("div",{className:"wrap bwfan_global bwfan_global_settings bwfan_connectors"},Object(n.createElement)("div",{className:"bwfan_global_settings_wrap"},!!f&&Object(n.createElement)(a.Notice,{status:"error"},f),!!_&&Object(n.createElement)(z,null),!_&&!!j&&E,Object(n.createElement)(w,null),Object(n.createElement)(k,null),Object(n.createElement)(N,null),Object(n.createElement)(S,null)))}));t.default=G}}]);