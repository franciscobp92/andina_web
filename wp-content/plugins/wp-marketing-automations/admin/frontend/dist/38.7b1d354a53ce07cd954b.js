(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{792:function(e,t,n){"use strict";var r=n(222),a=n(7);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("linkTriggerListData"),t=e.fetch,n=e.setStateProp,o=u(e,["fetch","setStateProp"]),c=Object(r.a)("singleLinkTriggerData"),s=c.fetch,l=c.setStateProp;return i(i({},o),{},{fetchAll:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.s,c={offset:n,limit:r,search:i,status:o};t("GET",Object(a.g)("/link-triggers"),c)},setLinkListValues:function(e,t){n(e,t)},fetchSingleLink:function(e){l("error",{}),s("GET",Object(a.g)("/link-trigger/".concat(e)))},setSingleLinkValue:function(e,t){l(e,t)}})}},793:function(e,t,n){"use strict";var r=n(221);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("linkTriggerListData"),t=e.getStateProp,n=c(e,["getStateProp"]),a=Object(r.a)("singleLinkTriggerData"),i=a.getStateProp,u=a.getLoading;return o(o({},n),{},{getAllLists:function(){return t("data")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getCountData:function(){return t("countData")},getPerPageCount:function(){return parseInt(t("limit"))},getPageOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total_count"))},getActions:function(){return t("actions")},getSingleLinkLoad:function(){return u()},getSingleLinkData:function(){return i("data")},getLinkActionList:function(){return i("actionList")},getLinkActionSchemaList:function(){return i("actionSchema")},getLinkEditableStatus:function(){return i("isEditable")},getSingleLinkError:function(){return i("error")}})}},795:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(10),a=n(6),o=n.n(a),i=n(23),c=n(11),u=n(24),s=n(241),l=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(u.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(r.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(s.b)();this.currentResult=Object(r.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;i.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(47).a),f=n(239);function b(e,t,n){var a=o.a.useRef(!1),u=o.a.useState(0)[1],s=Object(c.k)(e,t,n),b=Object(f.b)(),m=o.a.useRef();m.current?m.current.setOptions(s):m.current=new l(b,s);var p=m.current.getCurrentResult();o.a.useEffect((function(){a.current=!0;var e=m.current.subscribe(i.a.batchCalls((function(){a.current&&u((function(e){return e+1}))})));return function(){a.current=!1,e()}}),[]);var g=o.a.useCallback((function(e,t){m.current.mutate(e,t).catch(c.i)}),[]);if(p.error&&m.current.options.useErrorBoundary)throw p.error;return Object(r.a)({},p,{mutate:g,mutateAsync:p.mutate})}},798:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(13),i=n.n(o),c=n(16),u=n.n(c),s=n(45),l=n.n(s),f=n(40),b=n.n(f),m=n(7),p=n(22);function g(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}t.a={name:"link-trigger",className:"bwf-search-bwf-tags-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,limit:10,offset:0},e.next=3,i()({path:Object(m.g)("/link-triggers?"+Object(p.stringify)(n)),method:"GET"});case 3:return r=e.sent,a=l()(r,"result")?r.result:[],b()(a)||(a=a.map((function(e){return{key:String(e.ID),name:e.title,label:e.title}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){d(o,r,a,i,c,"next",e)}function c(e){d(o,r,a,i,c,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getFreeTextOptions:function(e,t){var n,o=g(t);try{for(o.s();!(n=o.n()).done;){if(n.value.value.label.toLowerCase()===e.toLowerCase())return[]}}catch(e){o.e(e)}finally{o.f()}return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},u()({mixedString:Object(a.__)("Search all link triggers with name {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{key:"0",label:e}}]},getOptionLabel:function(e,t){var n=Object(m.e)(e.label,t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":e.label},Object.keys(n).length>0?Object(r.createElement)(r.Fragment,null,n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):e.label)},getOptionCompletion:function(e){return e}}},807:function(e,t,n){"use strict";var r=n(219),a=n(0);t.a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},i=Object(r.a)(),c=i.setActiveMultiple,u=i.setL2NavType,s=i.setL2Nav,l=i.resetHeaderMenu,f=i.setPageHeader,b=i.setPageCountData,m=i.setL2Content;return Object(a.useEffect)((function(){l(),c({leftNav:"link-triggers",rightNav:t}),u("menu"),s(o.links_triggers_nav),f("Link Triggers"),b({templates:n}),e&&m(e)}),[n]),!0}},913:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(4),o=n(7),i=n(12),c=n(2),u=n(807),s=n(123),l=n(226),f=n(14),b=n(220),m=n(121),p=n(46),g=n(122),O=n(17),d=n(13),y=n.n(d),j=n(35),h=n(40),v=n.n(h),w=n(104),k=n.n(w),E=n(45),_=n.n(E),S=n(3),P=n(798);function C(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}var A=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=v()(n)?[]:[{key:n,label:Object(c.__)("Search Link Trigger: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_lists",isSearchTerm:!0}],o=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k()(n)){e.next=2;break}return e.abrupt("return");case 2:if(v()(n)||(r=n[n.length-1],(n=[])[0]=r),a=n.find((function(e){return _()(e,"key")})),!(!Object(S.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("key")&&parseInt(n[0].key)>0)){e.next=7;break}return Object(f.j)({path:"/link-trigger/"+n[0].key},"/",t),e.abrupt("return");case 7:if(o=Object(S.isUndefined)(a)?void 0:a.label,i=_()(t,"s")&&!v()(t.s)?t.s:"",o!==i){e.next=11;break}return e.abrupt("return");case 11:Object(f.j)({s:o},"/",t);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(j.a,{autocompleter:P.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:o,placeholder:Object(c.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},x=n(37),L=n(219),T=n(792),D=n(793),I=n(175),R=n(126),N=n(795);function M(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}var q=function(e){var t=e.isOpen,n=e.links,a=e.onSuccess,i=e.onError,u=e.onRequestClose,s=Object(N.a)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()({path:Object(o.g)("/link-triggers/delete"),method:"POST",headers:{"X-HTTP-Method-Override":"DELETE"},data:{ids:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){M(o,r,a,i,c,"next",e)}function c(e){M(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return s.reset()}),2500),a&&a()},onError:function(){setTimeout((function(){return s.reset()}),2500),i&&i()}});return Object(r.createElement)(m.a,{confirmText:Object(c.__)("Are you sure you want to delete the link triggers?","wp-marketing-automations"),confirmButtonText:Object(c.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return s.mutate(n.map((function(e){return e.ID})))},isLoading:s.isLoading,successMessage:s.isSuccess&&Object(c.__)("Link Triggers Deleted!","wp-marketing-automations"),errorMessage:s.isError&&(s.error&&s.error.message?s.error.message:Object(c.__)("Unable to delete link triggers","wp-marketing-automations")),onRequestClose:function(){return!!u&&u()},isOpen:t,isDelete:!0})};function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=[{id:"delete",icon:"trash",hint:Object(c.__)("Delete Links","wp-marketing-automations")}],X=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,a=e.resetSelection,o=e.onSuccess,i=U(Object(r.useState)([]),2),c=i[0],u=i[1],s=U(Object(r.useState)(!1),2),l=s[0],f=s[1],b=function(){a&&a(),u([])},m=Object(r.useCallback)((function(e,t){switch(e){case"delete":u(t),f(!0)}}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(I.a,B({actions:z,onAction:m},n)),Object(r.createElement)(q,{links:c,isOpen:l,onSuccess:function(){o&&o("delete",c),b()},onError:b,onRequestClose:function(){return f(!1)}}))},$=n(82);function G(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){G(o,r,a,i,c,"next",e)}function c(e){G(o,r,a,i,c,"throw",e)}i(void 0)}))}}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.selected,n=Object(f.h)(),u=Object(L.a)().setActiveMultiple,s=J(Object(r.useState)(""),2),l=s[0],d=s[1],j={all:"",inactive:1,active:2};Object(r.useEffect)((function(){Object(o.d)(Object(c.__)("Link Triggers","wp-marketing-automations"))}),[]);var h=Object(R.a)().getPageCountData,v=Object(L.a)().setPageCountData;Object(r.useEffect)((function(){u({leftNav:"link-triggers",rightNav:t}),d(j.hasOwnProperty(t)?j[t]:"")}),[t]);var w=Object(T.a)(),k=w.fetchAll,E=w.setLinkListValues,_=Object(D.a)(),P=_.getLoading,C=_.getAllLists,N=_.getTotalCount,M=_.getPageOffset,q=_.getPerPageCount,B=_.getPageNumber,U=_.getCountData,F=_.getActions,z=C(),G=M(),K=q(),V=P(),W=N(),Z=B(),ee=U(),te=F(),ne=h();Object(r.useEffect)((function(){v(Q(Q({},ne),ee))}),[ee]);var re=Object(r.useMemo)((function(){var e={};if(Array.isArray(z)){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(z);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.ID]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[z]),ae=Object(I.b)(re),oe=ae.singleSelectProps,ie=ae.selectAllProps,ce=ae.floatingBarProps,ue=ae.resetSelection;Object(r.useEffect)((function(){k(n,G,K,l)}),[G,K,n.s,l]);var se=J(Object(r.useState)({loading:!1,status:!1}),2),le=se[0],fe=se[1],be=Object(r.useContext)(o.b),me=function(){var e=H(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe({status:!0,loading:!0}),e.prev=1,e.next=4,y()({path:Object(o.g)("/link-triggers/delete"),method:"DELETE",data:{ids:[t]}}).then((function(e){200===e.code&&(fe({status:!0,success:e.message}),setTimeout((function(){fe({}),k(n,G,K,l)}),2e3))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),fe({status:!0,error:e.t0.message?e.t0.message:Object(c.__)("Error in deleting link","wp-marketing-automations")});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=H(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe({status:!0,loading:!0,isDelete:!1}),e.prev=1,e.next=4,y()({path:Object(o.g)("/link-trigger/".concat(t,"/clone")),method:"GET"}).then((function(e){200==e.code&&(fe({status:!0,success:e.message,isDelete:!1}),setTimeout((function(){fe({}),k(n,0,K,l)}),2e3))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),fe({status:!0,confirm:!0,error:e.t0.message,isDelete:!1});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){switch(e.hasOwnProperty("status")?parseInt(e.status):1){case 1:return Object(c.__)("Inactive","wp-marketing-automations");case 2:return Object(c.__)("Active","wp-marketing-automations");default:return Object(c.__)("Draft","wp-marketing-automations")}},Oe=function(e){return Object(r.createElement)(p.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var a=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){Object(f.j)({path:"/link-trigger/"+parseInt(e.ID)},"/",n),a()}},Object(r.createElement)(O.a,{justify:"flex-start"},Object(r.createElement)(O.c,null,Object(r.createElement)(i.a,{icon:"edit"})),Object(r.createElement)(O.c,null,Object(c.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){var t,n,r=Object(o.K)()+"/?bwfan-link-trigger="+e.hash;t=r,(n=document.createElement("textarea")).value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),be(Object(c.__)("Link copied","wp-marketing-automations")),Object(o.Q)(be,1e3),a()}},Object(r.createElement)(O.a,{justify:"flex-start"},Object(r.createElement)(O.c,null,Object(r.createElement)(i.a,{icon:"copy"})),Object(r.createElement)(O.c,null,Object(c.__)("Copy","wp-marketing-automations")))),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){pe(parseInt(e.ID)),a()}},Object(r.createElement)(O.a,{justify:"flex-start"},Object(r.createElement)(O.c,null,Object(r.createElement)(i.a,{icon:"duplicate"})),Object(r.createElement)(O.c,null,Object(c.__)("Clone","wp-marketing-automations")))),Object(r.createElement)(g.a,{isClickable:!0,onInvoke:function(){fe({status:!0,confirmText:Object(c.__)("Are you sure you want to delete this link trigger ?","wp-marketing-automations"),buttonConfirm:Object(c.__)("Confirm","wp-marketing-automations"),buttonCancel:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return me(e.ID)}}),a()}},Object(r.createElement)(O.a,{justify:"flex-start"},Object(r.createElement)(O.c,null,Object(r.createElement)(i.a,{icon:"trash"})),Object(r.createElement)(O.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})},de=[{key:"select_link",label:Object(r.createElement)(a.CheckboxControl,ie),isLeftAligned:!1,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30"},{key:"name",label:Object(c.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"desc",label:Object(c.__)("Description","wp-marketing-automations"),isLeftAligned:!0},{key:"linkaction",label:Object(c.__)("Actions","wp-marketing-automations"),isLeftAligned:!0},{key:"autologin",label:Object(c.__)("Auto Login","wp-marketing-automations"),isLeftAligned:!0},{key:"clicks",label:Object(c.__)("Clicks","wp-marketing-automations"),isLeftAligned:!0},{key:"status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!0}],ye=function(e){return Object(r.createElement)(x.a,{href:"admin.php?page=autonami&path=/link-trigger/"+e.ID,type:"bwf-crm",className:"bwf-a-no-underline"},Object(r.createElement)("b",null,e.title.charAt(0).toUpperCase()+e.title.slice(1)+" "))},je=function(e){var t="-";return e.hasOwnProperty("data")&&e.data.hasOwnProperty("desc")&&!Object(S.isEmpty)(e.data.desc)&&(t=Object(r.createElement)("p",{className:"bwf-p-0 bwf-m-0"},e.data.desc)),t},he=function(e){if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("actions")&&!Object(S.isEmpty)(e.data.actions)){var t=e.data.actions,n="",a=[];return Object.keys(t).map((function(e){te.hasOwnProperty(e)&&(Object(S.isEmpty)(n)&&(n=te[e]),a.push(Object(r.createElement)("span",{key:e},te[e])))})),Object(S.isEmpty)(n)&&Object(S.isEmpty)(a)?"-":Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},Object(r.createElement)("span",null,n),!Object(S.isEmpty)(a)&&a.length>1&&Object(r.createElement)($.a,{items:a})))}return"-"},ve=function(e){var t="No";return e.hasOwnProperty("data")&&e.data.hasOwnProperty("enable_auto_login")&&e.data.enable_auto_login&&(t="Yes"),t},we=z.map((function(e){return[{display:Object(r.createElement)(a.CheckboxControl,oe[e.ID]),value:""},{display:Oe(e),value:"action"},{display:e.hasOwnProperty("title")?ye(e):"-",value:""},{display:je(e),value:""},{display:he(e),value:""},{display:ve(e),value:""},{display:e.hasOwnProperty("total_clicked")?e.total_clicked:"-",value:""},{display:ge(e),value:""}]})),ke=function(e){e!==K&&E("limit",e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b.a,{className:"bwf-link-table has-search",title:"",rows:we,headers:de,query:{paged:Z},rowsPerPage:K,totalRows:W,isLoading:V,onPageChange:function(e,t){E("offset",(e-1)*K)},onQueryChange:function(e){return"per_page"!==e?function(){}:ke},showMenu:!1,rowHeader:!0,actions:[Object(r.createElement)(A,{key:"search",query:n})],emptyMessage:Object(c.__)("No link trigger found.","wp-marketing-automations")}),Object(r.createElement)(m.a,{confirmText:le.confirmText,confirmButtonText:le.buttonConfirm,cancelButtonText:le.buttonCancel,onConfirm:le.onConfirm,isLoading:le.loading,successMessage:le.success,errorMessage:le.error,onRequestClose:function(){return fe({status:!1})},isOpen:le.status,isDelete:!le.hasOwnProperty("isDelete")||le.isDelete}),Object(r.createElement)(X,{floatingBarProps:ce,resetSelection:ue,onSuccess:function(){return k(n,0,K,l)}}))},ee=n(80),te=n(81),ne=n(34);function re(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t=e.onCloseModal,n=Object(f.h)(),i=ae(Object(r.useState)(!1),2),u=i[0],s=i[1],l=ae(Object(r.useState)(""),2),b=l[0],m=l[1],p=ae(Object(r.useState)({}),2),g=p[0],O=p[1],d=ae(Object(r.useState)(null),2),j=d[0],h=d[1],v=ae(Object(r.useState)(null),2),w=v[0],k=v[1];Object(r.useEffect)((function(){s(!1),O({}),h(""),m("")}),[]);var E=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),m(""),e.prev=2,e.next=5,y()({path:Object(o.g)("/link-trigger/"),method:"POST",data:{title:j,desc:w,only_title:!0}}).then((function(e){200==e.code&&(Object(o.z)()||(bwfcrm_contacts_data.first_link_trigger_id=1),Object(f.j)({path:"/link-trigger/"+e.result.id},"/",n))}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),s(!1),m(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){re(o,r,a,i,c,"next",e)}function c(e){re(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),_=function(){Object(S.isEmpty)(j)?m(Object(c.__)("Name is required.","wp-marketing-automations")):(m(""),E())};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Modal,{title:Object(c.__)("Add Link Trigger","wp-marketing-automations"),className:"bwf-admin-modal bwf-admin-modal-medium",onRequestClose:function(){return t()}},u?g&&g.success&&g.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(ee.a,null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-h1"},g.message),Object(r.createElement)("div",{className:"bwf_clear_20"})):g&&g.error&&g.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(te.a,null),Object(r.createElement)("div",{className:"bwf-h1"},g.message)):Object(r.createElement)(ne.a,null):Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&_()}},b&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return m("")}},b),Object(r.createElement)(a.TextControl,{placeholder:Object(c.__)("Enter Name","wp-marketing-automations"),autoFocus:!0,label:Object(c.__)("Name","wp-marketing-automations"),value:j,onChange:function(e){return h(e)},disabled:u}),Object(r.createElement)(a.TextareaControl,{label:Object(c.__)("Description","wp-marketing-automations"),type:"text",value:w,placeholder:Object(c.__)("Enter Description","wp-marketing-automations"),onChange:function(e){k(e)}}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(a.Button,{onClick:function(){return t()},className:"bwf-mr-15",isTertiary:!0},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(a.Button,{isPrimary:!0,disabled:u,onClick:function(){_()}},Object(c.__)("Add","wp-marketing-automations"))))))};function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.selected,n=ce(Object(r.useState)(!1),2),f=n[0],b=n[1],m=ce(Object(r.useState)(!1),2),p=m[0],g=m[1],O=Object(r.createElement)(a.Button,{isPrimary:!0,className:"bwf-display-flex",onClick:function(){Object(o.X)()?g(!0):b(!0)}},!Object(o.X)()&&Object(r.createElement)(i.a,{icon:"lock",size:"15"}),Object(r.createElement)("span",null,Object(c.__)("Add New","wp-marketing-automations")));Object(u.a)(Object(c.__)("Link Triggers","wp-marketing-automations"),O,t);var d=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(i.a,{icon:"zero-link-trigger",size:90})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(c.__)("No Link Triggers Created","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(c.__)("Links Triggers allow you to tag and segment your subscribers when they click a link in an email\non your site anywhere.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(c.__)("Create Link Trigger","wp-marketing-automations"),onClick:function(){Object(o.X)()?g(!0):b(!0)}}]}}];return Object(r.createElement)(r.Fragment,null,Object(o.z)()&&Object(o.X)()?Object(r.createElement)(Z,{selected:t}):Object(r.createElement)(l.a,{data:d}),Object(r.createElement)(s.a,{isOpen:f,onRequestClose:function(){return b(!1)}}),p&&Object(r.createElement)(ie,{onCloseModal:function(){return g(!1)}}))}}}]);