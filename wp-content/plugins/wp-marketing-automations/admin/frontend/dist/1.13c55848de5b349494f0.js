(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{791:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return k})),n.d(t,"b",(function(){return he}));var r=n(0),a=n(4),c=n(2),o=n(3),i=n(13),u=n.n(i),s=n(7),l=n(80),b=n(81),m=n(34),f=n(14);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.filter,n=e.config,i=Object(f.h)(),O=j(Object(r.useState)({loading:!1,success:!1,error:!1,message:""}),2),p=O[0],g=O[1],y=Object(r.useContext)(s.b),w=j(Object(r.useState)(""),2),h=w[0],v=w[1],E=j(Object(r.useState)(!1),2),_=E[0],k=E[1],P=j(Object(r.useState)(""),2),C=P[0],S=P[1],x=j(Object(r.useState)(!1),2),A=x[0],N=x[1],D=function(){g(d(d({},p),{},{loading:!0}));var e=Object(f.i)(t,i,n.filters);if(Object(o.isEmpty)(e))g({loading:!0,error:!0,message:Object(c.__)("Please fill the filter","wp-marketing-automations")}),setTimeout((function(){g({loading:!1,success:!1,error:!1,message:""})}),2e3);else try{u()({path:Object(s.g)("/audience"),method:"POST",data:{name:h,data:{desc:C,filters:e}}}).then((function(e){200===e.code?(y(e.message),Object(s.Q)(y,2e3),g({loading:!1,success:!1,error:!1,message:""}),N(!1)):(g({loading:!0,error:!0,message:e.message}),setTimeout((function(){g({loading:!1,success:!1,error:!1,message:""})}),2e3))}))}catch(e){g({loading:!0,error:!0,message:e.message}),setTimeout((function(){g({loading:!1,success:!1,error:!1,message:""})}),2e3)}};return Object(r.createElement)("div",{className:"bwf-adv-filter-action-btn"},!Object(o.isEmpty)(t)&&Object(r.createElement)(a.Button,{isTertiary:!0,onClick:function(){v(""),k(!1),S(""),N(!0)}},Object(c.__)("Save as Audience","wp-marketing-automations")),A&&Object(r.createElement)(a.Modal,{title:"Create New Audience",onRequestClose:function(){return N(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium"},p.loading?p&&p.success&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-h1"},p.message)):p&&p.error&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(b.a,null),Object(r.createElement)("div",{className:"bwf-h1"},p.message)):Object(r.createElement)(m.a,null):Object(r.createElement)("div",{onKeyPress:function(e){"Enter"===e.key&&(Object(o.isEmpty)(h)?k(!0):D())}},_&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return k("")}},Object(c.__)("Title is required","wp-marketing-automations")),Object(r.createElement)(a.TextControl,{type:"text",value:h,autoFocus:!0,style:{lineHeight:"22px"},placeholder:Object(c.__)("Enter audience title","wp-marketing-automations"),label:Object(c.__)("Title","wp-marketing-automations"),onChange:function(e){v(e),Object(o.isEmpty)(e)?k(!0):k(!1)}}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter audience description","wp-marketing-automations"),label:Object(c.__)("Description","wp-marketing-automations"),value:C,onChange:function(e){return S(e)}}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(a.Button,{isTertiary:!0,onClick:function(){return N(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(a.Button,{isPrimary:!0,onClick:function(){Object(o.isEmpty)(h)?k(!0):D()}},Object(c.__)("Add","wp-marketing-automations"))))))};n(818);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.addAdvance,n=void 0===t||t,i=e.restrictedFilters,l=void 0===i?[]:i,b=Object(f.h)(),O=E(Object(r.useState)(!1),2),d=O[0],p=O[1],j=E(Object(r.useState)(""),2),g=j[0],y=j[1],w=E(Object(r.useState)([]),2),v=w[0],_=w[1],k=E(Object(r.useState)(!0),2),P=k[0],C=k[1],S=function(){var e=[];return Object(o.isEmpty)(g)?v:(v.map((function(t){-1!==t.name.toLowerCase().indexOf(g.toLowerCase())&&e.push(t)})),e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-list-audience-wrap"},Object(r.createElement)(a.Button,{isTertiary:!0,className:"bwf-display-flex bwf-add-audience-btn",onClick:function(){!function(){try{u()({method:"GET",path:Object(s.g)("/audiences?limit=0&offset=0")}).then((function(e){200===e.code&&(_(e.result),C(!1))}))}catch(e){C(!1)}}(),y(""),p(!d)}},"Select Audience")),d&&Object(r.createElement)(a.Modal,{title:"My Audiences",onRequestClose:function(){return p(!1)},className:"bwf-admin-modal bwf-admin-modal-medium bwf-audience-modal bwf-admin-modal-no-header bwf-show-close"},P?Object(r.createElement)(m.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-audience-header"},Object(r.createElement)("div",{className:"bwf-audience-label bwf-h4"},Object(c.__)("My Audiences","wp-marketing-automations")),Object(r.createElement)(a.TextControl,{className:"bwf-audience-search",value:g,onChange:function(e){return y(e)},autoComplete:"off",placeholder:Object(c.__)("Search by title","wp-marketing-automations")})),Object(r.createElement)("div",{className:"bwf-audience-table-wrapper"},Object(r.createElement)("table",{className:"bwf-audience-list-table"},Object(r.createElement)("tbody",null,S().length>0?S().map((function(e){return Object(r.createElement)("tr",null,Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-title"},e.name),Object(r.createElement)("span",{className:"bwf-audience-create-detail"},e.created_at?Object(r.createElement)(r.Fragment,null,Object(c.__)("Created at ","wp-marketing-automations"),Object(s.D)(e.created_at)):"")),Object(r.createElement)("td",null,Object(r.createElement)("span",{className:"bwf-audience-item-apply",onClick:function(){var t={};n&&(t={filter:"advanced"});var r,a,c=h({},e.data.filters);r=c,a={},Object.keys(r).map((function(e){var t=r[e];Object(o.isString)(t)&&(t=encodeURIComponent(t)),a[e]=t})),c=a,!Object(o.isEmpty)(l)&&Object(o.isArray)(l)&&l.map((function(e){c.hasOwnProperty(e)&&delete c[e]})),Object(f.j)(h(h({},c),t),"/",b),p(!1)}},Object(c.__)("Select","wp-marketing-automations"))))})):Object(r.createElement)("tr",null,Object(r.createElement)("td",{colSpan:2},Object(r.createElement)("span",{className:"bwf-display-flex bwf-p-15"},Object(c.__)("No Audiences Found","wp-marketing-automations"))))))))))},P=n(220),C=n(5),S=n.n(C),x=n(46),A=n(122),N=n(17),D=n(12),T=n(773),I=n(222);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var q=function(){var e=Object(I.a)("audience"),t=e.fetch,n=e.setStateProp;return M(M({},F(e,["fetch","setStateProp"])),{},{fetch:function(e,r,a){n("contactCountData",{}),t("GET",Object(s.g)("/audiences?limit=".concat(e,"&offset=").concat(r,"&search=").concat(a)))},setStateAudienceValues:function(e,t){n(e,t)}})},B=n(221);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var V=function(){var e=Object(B.a)("audience"),t=e.getStateProp;return G(G({},$(e,["getStateProp"])),{},{getAudiences:function(){return t("audience")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getCountData:function(){return t("countData")},getContactCountData:function(){return t("contactCountData")}})},H=n(129),J=n(121);function K(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var z=function(e){var t=Object(f.h)(),n=e.filter,i=e.config,l=e.audienceDetail,b=e.setModal,m=e.setOpen,O=e.reloadList,d=e.title,p=e.desc,j=e.error,g=e.setError,y=Object(r.useContext)(s.b),w=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:if(!Object(o.isEmpty)(d)){e.next=5;break}return g(!0),e.abrupt("return");case 5:if(b({loading:!0}),r=Object(f.i)(n,t,i.filters),!Object(o.isEmpty)(r)){e.next=12;break}b({loading:!0,error:!0,message:Object(c.__)("Please fill the filter","wp-marketing-automations")}),setTimeout((function(){b({loading:!1,success:!1,error:!1,message:""})}),2e3),e.next=22;break;case 12:return a=l?Object(s.g)("/audience/".concat(l.ID)):Object(s.g)("/audience"),e.prev=13,e.next=16,u()({path:a,method:"POST",data:{name:d,data:{desc:p||"",filters:r}}}).then((function(e){200===e.code?(y(e.message),Object(s.Q)(y,2e3),O(),b({loading:!1,success:!1,error:!1,message:""}),m(!1)):(b({loading:!0,error:!0,message:e.message}),setTimeout((function(){b({loading:!1,success:!1,error:!1,message:""})}),2e3))}));case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(13),b({loading:!0,error:!0,message:e.t0.message}),setTimeout((function(){b({loading:!1,success:!1,error:!1,message:""})}),2e3);case 22:case"end":return e.stop()}}),e,null,[[13,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){K(c,r,a,o,i,"next",e)}function i(e){K(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(a.Button,{isPrimary:!0,onClick:function(){return w()}},l?Object(c.__)("Save","wp-marketing-automations"):Object(c.__)("Add","wp-marketing-automations"))},W=(n(819),n(35)),X=n(40),Y=n.n(X),Z=n(104),ee=n.n(Z),te=n(45),ne=n.n(te),re=n(16),ae=n.n(re),ce=n(22);function oe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var se={name:"audience",className:"bwf-search-bwf-tags-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,limit:10,offset:0},e.next=3,u()({path:Object(s.g)("/audiences?"+Object(ce.stringify)(n)),method:"GET"});case 3:return r=e.sent,a=ne()(r,"result")?r.result:[],Y()(a)||(a=a.map((function(e){return{key:String(e.ID),label:e.name}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){ue(c,r,a,o,i,"next",e)}function i(e){ue(c,r,a,o,i,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getFreeTextOptions:function(e,t){var n,a=oe(t);try{for(a.s();!(n=a.n()).done;){if(n.value.value.label.toLowerCase()===e.toLowerCase())return[]}}catch(e){a.e(e)}finally{a.f()}return[{key:"name",label:Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name"},ae()({mixedString:Object(c.__)("Search all audience with name {{query /}}","wp-marketing-automations"),components:{query:Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{key:"0",label:e}}]},getOptionLabel:function(e,t){var n=Object(s.e)(e.label,t)||{};return Object(r.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":e.label},Object.keys(n).length>0?Object(r.createElement)(r.Fragment,null,n.suggestionBeforeMatch,Object(r.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):e.label)},getOptionCompletion:function(e){return e}};function le(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}var be=function(e){var t=e.query,n=t.hasOwnProperty("s")?t.s:"",a=Y()(n)?[]:[{key:n,label:Object(c.__)("Search Audience: ","wp-marketing-automations")+n,bwfLabelSource:"bwfcrm_lists",isSearchTerm:!0}],i=function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee()(n)){e.next=2;break}return e.abrupt("return");case 2:if(Y()(n)||(r=n[n.length-1],(n=[])[0]=r),a=n.find((function(e){return ne()(e,"label")})),!(Object(o.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("name"))){e.next=7;break}return Object(f.j)({s:n[0].name},"/manage/audience",t),e.abrupt("return");case 7:if(c=Object(o.isUndefined)(a)?void 0:a.label,i=ne()(t,"s")&&!Y()(t.s)?t.s:"",c!==i){e.next=11;break}return e.abrupt("return");case 11:Object(f.j)({s:c},"/manage/audiences",t);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){le(c,r,a,o,i,"next",e)}function i(e){le(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)(W.a,{autocompleter:se,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:a,onChange:i,placeholder:Object(c.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},me=n(760),fe=n(126),Oe=n(219);function de(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=function(){var e=Object(f.h)(),t=Object(T.a)(),n=ye(Object(r.useState)(!1),2),i=n[0],O=n[1],d=ye(Object(r.useState)(!1),2),p=d[0],j=d[1],g=ye(Object(r.useState)(!1),2),y=g[0],w=g[1],h=ye(Object(r.useState)(""),2),v=h[0],E=h[1],_=ye(Object(r.useState)(!1),2),k=_[0],C=_[1],I=ye(Object(r.useState)(""),2),L=I[0],M=I[1],R=ye(Object(r.useState)({loading:!1,status:!1}),2),F=R[0],B=R[1],U=ye(Object(r.useState)({loading:!1,error:!1,success:!1,message:""}),2),G=U[0],Q=U[1],$=S()("bwf-audience-lists",{"has-search":!0}),K=V(),W=K.getAudiences,X=K.getLoading,Y=K.getOffset,Z=K.getPageNumber,ee=K.getPerPageCount,te=K.getTotalCount,ne=K.getCountData,re=K.getContactCountData,ae=ee(),oe=Y(),ie=e.s,ue=W(),se=Z(),le=X(),pe=te(),ge=ne(),we=re(),he=ye(Object(r.useState)({}),2),ve=he[0],Ee=he[1];Object(r.useEffect)((function(){Ee(we)}),[we]);var _e=q(),ke=_e.fetch,Pe=_e.setStateAudienceValues;Object(r.useEffect)((function(){ke(ae,oe,ie||""),j(!1)}),[ae,oe,ie]);var Ce=Object(r.createElement)(a.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){O(!0),E(""),w(!1),M("")}},Object(c.__)("Add New","wp-marketing-automations")),Se=Object(fe.a)().getPageCountData,xe=Object(Oe.a)().setPageCountData,Ae=Se();Object(r.useEffect)((function(){xe(je(je({},Ae),ge))}),[ge]),Object(me.a)("manage_audiences","",Object(c.__)("ALL AUDIENCE","wp-marketing-automations"),Ce),Object(r.useEffect)((function(){if(!p&&!Object(o.isEmpty)(ue)&&!le)try{var e={audience_ids:[]};ue.map((function(t){e.audience_ids.push(t.ID)})),u()({method:"GET",path:Object(s.g)("/audiences/contacts?"+Object(ce.stringify)(e))}).then((function(e){200==e.code&&(Pe("contactCountData",je(je({},e.result),we)),j(!0))}))}catch(e){console.log(e)}}),[ue]);var Ne=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30"},{key:"name",label:Object(c.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"description",label:Object(c.__)("Description","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-40p"},{key:"createdon",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contacts",label:Object(c.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0}],De=function(){ke(ae,oe,ie||""),j(!1)},Te=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B({status:!0,loading:!0}),e.prev=1,e.next=4,u()({path:Object(s.g)("/audience/".concat(t)),method:"DELETE"}).then((function(e){200===e.code?(B({status:!0,success:e.message}),setTimeout((function(){ke(ae,oe,""),j(!1)}),1e3)):B({status:!0,error:e.message?e.message:Object(c.__)("Error in deleting audience","wp-marketing-automations")})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),B({status:!0,error:e.t0.message?e.t0.message:Object(c.__)("Error in deleting audience","wp-marketing-automations")});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){de(c,r,a,o,i,"next",e)}function i(e){de(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Ie=function(e){return p?ve.hasOwnProperty(parseInt(e.ID))&&ve[parseInt(e.ID)].contact_count>0?Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("a",{onClick:function(){var t,n;Object(f.j)(je(je({},(t=e.data.filters,n={},Object.keys(t).map((function(e){var r=t[e];Object(o.isString)(r)&&(r=encodeURIComponent(r)),n[e]=r})),n)),{},{filter:"advanced",path:"/contacts",page:"autonami"}),"/",{})},className:"bwf-a-no-underline"},parseInt(ve[parseInt(e.ID)].subscribers_count)+" of "+ve[parseInt(e.ID)].contact_count),Object(r.createElement)("span",null,Object(c.__)("Subscribed","wp-marketing-automations"))):"-":Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-w-150",title:"Loading"},"Loading")},Le=ue.map((function(t){return[{display:(a=t,Object(r.createElement)(x.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(A.a,{isClickable:!0,onInvoke:function(){Object(f.j)(je(je({},a.data.filters),{},{filter:"advanced",path:"/contacts"}),"/",e),n()}},Object(r.createElement)(N.a,{justify:"flex-start"},Object(r.createElement)(N.c,null,Object(r.createElement)(D.a,{icon:"view"})),Object(r.createElement)(N.c,null,Object(c.__)("View Contacts","wp-marketing-automations")))),Object(r.createElement)(A.a,{isClickable:!0,onInvoke:function(){w(a),E(a.name),M(a.data.desc?a.data.desc:""),O(!0),n()}},Object(r.createElement)(N.a,{justify:"flex-start"},Object(r.createElement)(N.c,null,Object(r.createElement)(D.a,{icon:"edit"})),Object(r.createElement)(N.c,null,Object(c.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(A.a,{isClickable:!0,onInvoke:function(){B({status:!0,confirmText:Object(c.__)("Are you sure you want to delete this audience ?","wp-marketing-automations"),buttonConfirm:Object(c.__)("Confirm","wp-marketing-automations"),buttonCancel:Object(c.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return Te([a.ID])}}),n()}},Object(r.createElement)(N.a,{justify:"flex-start"},Object(r.createElement)(N.c,null,Object(r.createElement)(D.a,{icon:"trash"})),Object(r.createElement)(N.c,null,Object(c.__)("Delete","wp-marketing-automations")))))}})),value:"action"},{display:t.name,value:""},{display:t.data.hasOwnProperty("desc")&&!Object(o.isEmpty)(t.data.desc)?t.data.desc:"-",value:""},{display:(n=t.created_at,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(s.D)(n)))),value:""},{display:Ie(t),value:""}];var n,a})),Me=function(e){e!==ae&&Pe("limit",e)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(P.a,{className:$,rows:Le,headers:Ne,query:{paged:se},rowsPerPage:ae,totalRows:pe,isLoading:le,onPageChange:function(e,t){Pe("offset",(e-1)*ae)},onQueryChange:function(e){return"per_page"!==e?function(){}:Me},showMenu:!1,rowHeader:!0,actions:[Object(r.createElement)(be,{key:"search",query:e})],emptyMessage:Object(c.__)("No audiences found","wp-marketing-automations")}),i&&Object(r.createElement)(a.Modal,{title:y?"Edit Audience":"Add Audience",onRequestClose:function(){return O(!1)},shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-xl bwf-audience-modal-update bwf-admin-modal-overflow-visible"},G&&G.loading?G.loading&&G.success&&G.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-h1"},G.message)):G.loading&&G.error&&G.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(b.a,null),Object(r.createElement)("div",{className:"bwf-h1"},G.message)):Object(r.createElement)(m.a,null):Object(r.createElement)(r.Fragment,null,k&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return C(!1)}},Object(c.__)("Name is required","wp-marketing-automations")),Object(r.createElement)(a.TextControl,{type:"text",value:v,autoFocus:!0,placeholder:Object(c.__)("Enter Name","wp-marketing-automations"),label:Object(c.__)("Name","wp-marketing-automations"),onChange:function(e){E(e),Object(o.isEmpty)(e)?C(!0):C(!1)}}),Object(r.createElement)(a.TextareaControl,{placeholder:Object(c.__)("Enter description","wp-marketing-automations"),label:Object(c.__)("Description","wp-marketing-automations"),value:L,onChange:function(e){return M(e)}}),Object(r.createElement)("span",null,Object(c.__)("Filters","wp-marketing-automations")),Object(r.createElement)(H.a,{siteLocale:"en-US",currency:Object(s.fb)()?bwfcrm_contacts_data.currency:{},config:{title:Object(c.__)("Select Rules","wp-marketing-automations"),filters:t,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{isTertiary:!0,className:"bwf-mr-5",onClick:function(){return O(!1)}},Object(c.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(z,{filter:e.data,config:e.config,audienceDetail:y,setModal:Q,setOpen:O,title:v,desc:L,error:k,setError:C,reloadList:De}))}},path:"/manage/audience",query:y?y.data.filters:{}}))),Object(r.createElement)(J.a,{confirmText:F.confirmText,confirmButtonText:F.buttonConfirm,cancelButtonText:F.buttonCancel,onConfirm:F.onConfirm,isLoading:F.loading,successMessage:F.success,errorMessage:F.error,onRequestClose:function(){return B({status:!1})},isOpen:F.status,isDelete:!0}))}},818:function(e,t,n){},819:function(e,t,n){}}]);