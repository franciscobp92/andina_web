(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{758:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return a.a})),n.d(t,"d",(function(){return c.a})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"h",(function(){return k})),n.d(t,"c",(function(){return E}));var r=n(124),a=n(224),c=n(225),o=n(0),i=n(2),s=n(13),l=n.n(s),u=n(16),m=n.n(u),b=n(45),d=n.n(b),f=n(40),p=n.n(f),g=n(7),O=n(22);function _(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var j={name:"form-feeds",className:"bwf-search-bwf-tags-result",options:function(e){return(t=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:t,limit:10,offset:0},e.next=3,l()({path:Object(g.g)("/form-feeds?"+Object(O.stringify)(n)),method:"GET"});case 3:return r=e.sent,a=d()(r,"result")?r.result:[],p()(a)||(a=a.map((function(e){return{key:String(e.id),label:e.title}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function o(e){_(c,r,a,o,i,"next",e)}function i(e){_(c,r,a,o,i,"throw",e)}o(void 0)}))},function(e){return n.apply(this,arguments)})(e);var t,n},isDebounced:!0,getOptionIdentifier:function(e){return e.key},getOptionKeywords:function(e){return[e.label]},getFreeTextOptions:function(e,t){return[]},getOptionLabel:function(e,t){var n=Object(g.e)(e.label,t)||{};return Object(o.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":e.label},Object.keys(n).length>0?Object(o.createElement)(o.Fragment,null,n.suggestionBeforeMatch,Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):e.label)},getOptionCompletion:function(e){return e}},h=n(58),w=n(235),y={name:"products",className:"woocommerce-search__product-result",options:function(e){var t=e?{search:e,per_page:10,orderby:"title"}:{};return l()({path:Object(h.addQueryArgs)("/wc-analytics/products",t)})},isDebounced:!0,getOptionIdentifier:function(e){return e.id},getOptionKeywords:function(e){return[e.name,e.sku]},getFreeTextOptions:function(e){return[{key:"title",label:Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name"},m()({mixedString:Object(i.__)("All products with titles that include {{query /}}","woocommerce-admin"),components:{query:Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e}}]},getOptionLabel:function(e,t){var n=Object(g.e)(e.name,t)||{};return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(w.a,{key:"thumbnail",className:"woocommerce-search__result-thumbnail",product:e,width:18,height:18,alt:""}),Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.name},n.suggestionBeforeMatch,Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch))},getOptionCompletion:function(e){return{key:e.id,label:e.name}}},v={name:"categories",className:"woocommerce-search__product-result",options:function(e){var t=e?{search:e,per_page:10,orderby:"name"}:{};return l()({path:Object(h.addQueryArgs)("/wc-analytics/products/categories",t)})},isDebounced:!0,getOptionIdentifier:function(e){return e.id},getOptionKeywords:function(e){return[e.name]},getFreeTextOptions:function(e){return[{key:"title",label:Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name"},m()({mixedString:Object(i.__)("All categories with titles that include {{query /}}","woocommerce-admin"),components:{query:Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e}}]},getOptionLabel:function(e,t){var n=Object(g.e)(e.name,t)||{};return Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.name},n.suggestionBeforeMatch,Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return{key:e.id,label:e.name}}},k={name:"tags",className:"woocommerce-search__product-result",options:function(e){var t=e?{search:e,per_page:10,orderby:"name"}:{};return l()({path:Object(h.addQueryArgs)("/autonami-admin/products/tags",t)})},isDebounced:!0,getOptionIdentifier:function(e){return e.id},getOptionKeywords:function(e){return[e.name]},getFreeTextOptions:function(e){return[{key:"title",label:Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name"},m()({mixedString:Object(i.__)("All tags with titles that include {{query /}}","woocommerce-admin"),components:{query:Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,name:e}}]},getOptionLabel:function(e,t){var n=Object(g.e)(e.name,t)||{};return Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.name},n.suggestionBeforeMatch,Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return{key:e.id,label:e.name}}},E={name:"coupons",className:"woocommerce-search__coupon-result",options:function(e){var t=e?{search:e,per_page:10,orderby:"title"}:{};return l()({path:Object(h.addQueryArgs)("/wc-analytics/coupons",t)})},isDebounced:!0,getOptionIdentifier:function(e){return e.code},getOptionKeywords:function(e){return[e.code]},getFreeTextOptions:function(e){return[{key:"code",label:Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name"},m()({mixedString:Object(i.__)("All coupons with codes that include {{query /}}","woocommerce-admin"),components:{query:Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{id:e,code:e}}]},getOptionLabel:function(e,t){var n=Object(g.e)(e.code,t)||{};return Object(o.createElement)("span",{key:"name",className:"woocommerce-search__result-name","aria-label":e.code},n.suggestionBeforeMatch,Object(o.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(e){return{key:e.code,label:e.code}}}},763:function(e,t,n){"use strict";var r=n(0),a=n(35),c=n(2),o=n(758);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},929:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(250),c=n(4),o=n(2),i=n(775),s=n(774),l=n(79),u=n(17),m=n(121),b=function(){var e=Object(i.a)().getUpdateStepThreeStatus,t=Object(s.a)(),n=t.resetUpdateStepThreeStatus,a=t.setEditMapMode,c=e();return Object(r.createElement)(m.a,{isLoading:1===c,successMessage:2===c?Object(o.__)("Form Updated","wp-marketing-automations"):"",errorMessage:3===c?Object(o.__)("Unable to update form","wp-marketing-automations"):"",onRequestClose:function(){n(),a(!1)},isOpen:!!c})},d=n(13),f=n.n(d),p=n(7);function g(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){g(c,r,a,o,i,"next",e)}function i(e){g(c,r,a,o,i,"throw",e)}o(void 0)}))}}var _=function(e){return{sendTestEmail:(a=O(regeneratorRuntime.mark((function e(t,n,r,a,c,o){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={email:t,content:JSON.stringify({subject:n,body:r,type:a,mail_data:c,preheader:o})},e.next=4,f()({method:"POST",path:Object(p.g)("/send-test-email"),data:i});case 4:return e.abrupt("return",2);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t,n,r,c,o){return a.apply(this,arguments)}),saveEditorContent:(r=O(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={content:JSON.stringify(n)},t.next=4,f()({method:"POST",path:Object(p.g)("/form-feeds/".concat(e,"/save-email-content")),data:r});case 4:return t.abrupt("return",2);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",3);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(e){return r.apply(this,arguments)}),uploadImage:(n=O(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),e.prev=2,e.next=5,f()({method:"POST",path:Object(p.g)("/upload-image"),body:n});case 5:return r=e.sent,e.abrupt("return",r&&r.result?r.result:"");case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return n.apply(this,arguments)}),fetchCurrentMailEditorContent:(t=O(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f()({method:"GET",path:Object(p.g)("/form-feeds/".concat(e,"/get-email-content"))});case 3:return n=t.sent,t.abrupt("return",n&&n.result?n.result:"");case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(){return t.apply(this,arguments)})};var t,n,r,a},j=n(763),h=n(3);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){var t=bwfcrm_contacts_data&&bwfcrm_contacts_data.editor_settings&&bwfcrm_contacts_data.editor_settings.default&&bwfcrm_contacts_data.editor_settings.default.form?bwfcrm_contacts_data.editor_settings.default.form:{};return e&&0!==Object.keys(t).length?Array.isArray(e.content)&&e.content[0]?(e.content[0].body||(e.content[0].body=t.body?t.body:""),e.content[0].editor||(e.content[0].editor=t.editor?t.editor:{}),e):k(k({},e),{},{content:[{body:t.body?t.body:"",editor:t.editor?k({},t.editor):{}}]}):e};t.default=function(e){var t,n=e.feedId,m=Object(i.a)(),d=Object(s.a)(),f=m.getFeed(),p=f&&f.status?parseInt(f.status):1,g=f&&f.data?f.data:{},O=!(!g||!("incentivize_email"in g))&&g.incentivize_email,y=!(!g||!("marketing_status"in g))&&g.marketing_status,v=!(!g||!("not_send_to_subscribed"in g))&&g.not_send_to_subscribed,E=!(!g||!("add_tag_enable"in g))&&g.add_tag_enable,C=g&&"tag_to_add"in g?g.tag_to_add:[],S=g&&"redirect_url"in g?g.redirect_url:"",T=g&&"redirect_mode"in g?g.redirect_mode:"url",A=w(Object(r.useState)(!1),2),x=A[0],M=A[1],P=w(Object(r.useState)(!1),2),R=P[0],B=P[1],F=Object(r.useCallback)((function(e){!1===O?d.updateStepThree(n,{incentivize_email:O,marketing_status:y},e):(B(e),M(!0))}),[O,y]),I=Object(r.useCallback)((function(e){d.updateStepThree(n,{incentivize_email:O,marketing_status:y,incentive_email:e,redirect_mode:T,redirect_url:S,add_tag_enable:E,tag_to_add:C,not_send_to_subscribed:v},R),M(!1)}),[O,y,R,T,S]),D={objectId:"crm.form.".concat(n),mergeTagsContext:"forms"};return Object(r.createElement)("div",{className:"bwf-crm-stepper-wrap bwf-card-wrap bwf-crm-forms-step-3"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(o.__)("Lead Notification","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)(c.ToggleControl,{label:Object(o.__)("Enable email notification","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",help:Object(o.__)("Note: Use {{confirmation_link}} for double optin","wp-marketing-automations"),onChange:function(e){return d.setIncentivizeEmail(e)},checked:!!O})),!!O&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0 bwf-pb-0"},Object(r.createElement)(a.a,{disableDefaultButtons:!0,onEmailContentReady:I,onEmailContentError:function(){return M(!1)},initData:N(g&&"incentive_email"in g?k(k({},g.incentive_email),D):D),validateEmailContent:!!x,apiMethods:_?_(n):{}})),Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},Object(r.createElement)(c.Card,{className:"bwf-p-gap bwf-border"},Object(r.createElement)(c.ToggleControl,{label:Object(o.__)("Don't send email if contact is already subscribed","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return d.setNotSendToSubscribed(e)},checked:!!v}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(u.a,{gap:5,justify:"start",align:"start"},Object(r.createElement)(c.FlexItem,null,Object(r.createElement)("p",{className:"bwf-c-input-label"},Object(o.__)("Redirect After Confirmation","wp-marketing-automations")),Object(r.createElement)(c.ButtonGroup,null,Object(r.createElement)(c.Button,{key:"url",isPrimary:"url"===T,isSecondary:"url"!==T,onClick:function(){return d.setRedirectMode("url")}},Object(o.__)("URL","wp-marketing-automations")),Object(r.createElement)(c.Button,{key:"file",isPrimary:"file"===T,isSecondary:"file"!==T,onClick:function(){return d.setRedirectMode("file")}},Object(o.__)("File","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(c.TextControl,{label:"",value:S,onChange:function(e){return d.setRedirectUrl(e)},placeholder:Object(o.__)("Enter URL","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(c.ToggleControl,{label:Object(o.__)("Add Tags after confirmation","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return d.setAddTagEnabled(e)},checked:!!E}),E&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(j.a,{onTagsChange:function(e){d.setTagList(e.map((function(e){return{id:e.key,value:e.label}})))},selected:(t=[],Object(h.isEmpty)(C)||C.map((function(e){t.push({key:e.id,label:e.value})})),t)})),Object(r.createElement)("p",null,Object(o.__)("Note: The settings will work when confirmation link is clicked","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)(c.ToggleControl,{label:Object(o.__)("Auto-confirm Contacts","wp-marketing-automations"),help:Object(o.__)("This will automatically mark new Contacts as Subscribed","wp-marketing-automations"),onChange:function(e){return d.setMarketingStatus(e)},className:"bwf-tooglecontrol-advance",checked:!!y})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p-gap bwf-pt-0"},Object(r.createElement)(u.a,null,Object(r.createElement)(u.b,null,Object(r.createElement)(c.Button,{className:"bwf-display-flex",isSecondary:!0,onClick:function(){return d.setStep("mapping")}},Object(r.createElement)("span",null,Object(o.__)("Back","wp-marketing-automations")))),Object(r.createElement)(u.b,{className:"bwf_text_right"},3===parseInt(p)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Button,{onClick:function(){return F(p)},isSecondary:!0},Object(o.__)("Save","wp-marketing-automations")),Object(r.createElement)(c.Button,{onClick:function(){return F(2)},className:"bwf-ml-10",isPrimary:!0},Object(o.__)("Save & Activate","wp-marketing-automations"))),2===parseInt(p)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Button,{onClick:function(){return F(3)},isSecondary:!0},Object(o.__)("Deactivate","wp-marketing-automations")),Object(r.createElement)(c.Button,{onClick:function(){return F(p)},className:"bwf-ml-10",isPrimary:!0},Object(o.__)("Save","wp-marketing-automations"))),1===parseInt(p)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Button,{onClick:function(){return F(p)},isSecondary:!0},Object(o.__)("Save As Draft","wp-marketing-automations")),Object(r.createElement)(c.Button,{onClick:function(){return F(2)},className:"bwf-ml-10",isPrimary:!0},Object(o.__)("Activate","wp-marketing-automations"))))))),Object(r.createElement)(b,null))}}}]);