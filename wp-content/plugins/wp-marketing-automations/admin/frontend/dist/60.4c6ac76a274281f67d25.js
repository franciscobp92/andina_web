(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{805:function(e,t,n){"use strict";var a=n(0),r=n(121),c=n(13),o=n.n(c),i=n(7),l=n(2);function s(e,t,n,a,r,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.a=function(e){var t=u(Object(a.useState)(!1),2),n=t[0],c=t[1],m=u(Object(a.useState)(""),2),b=m[0],f=m[1],p=u(Object(a.useState)(""),2),d=p[0],j=p[1],O=e.isOpen,g=e.cartId,y=e.onRequestClose,h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,o()({path:Object(i.g)("/carts"),method:"POST",headers:{"X-HTTP-Method-Override":"DELETE"},data:{abandoned_ids:[g]}});case 4:e.sent,f(Object(l.__)("Cart deleted successfully","wp-marketing-automations")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),j(e.t0&&e.t0.message?e.t0.message:Object(l.__)("Unknown error occurred","wp-marketing-automations")),console.log(d);case 12:c(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){s(c,a,r,o,i,"next",e)}function i(e){s(c,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(a.createElement)(r.a,{confirmText:Object(l.__)("Delete Cart?","wp-marketing-automations"),confirmButtonText:Object(l.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(l.__)("Cancel","wp-marketing-automations"),onConfirm:h,isLoading:n,successMessage:b,errorMessage:d,onRequestClose:function(){y(!!b),f(""),j(""),c(!1)},isOpen:O,isDelete:!0})}},888:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(7),c=n(13),o=n.n(c),i=n(2),l=n(46),s=n(122),u=n(17),m=n(4),b=n(220),f=n(786),p=n(803),d=n(82),j=n(56),O=n(804),g=n(805),y=n(223),h=n(37),w=n(5),v=n.n(w),_=n(3),E=n(50),k=n(79),S=n(14),A=n(12),C=n(226);function x(e,t,n,a,r,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(e){var t=Object(S.h)(),n=T(Object(a.useState)(25),2),c=n[0],w=n[1],L=T(Object(a.useState)(0),2),I=L[0],N=L[1],P=T(Object(a.useState)(0),2),R=P[0],M=P[1],q=T(Object(a.useState)([]),2),D=q[0],U=q[1],B=T(Object(a.useState)([]),2),F=B[0],z=B[1],H=T(Object(a.useState)(!1),2),J=H[0],Q=H[1],$=T(Object(a.useState)(),2),G=$[0],V=$[1],X=T(Object(a.useState)(!1),2),K=X[0],W=X[1],Y=T(Object(a.useState)(0),2),Z=Y[0],ee=Y[1];Object(f.a)("lost",F);var te=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,a,l,s,u,m,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},Q(!0),e.prev=2,n="",t&&t.search&&(n="search=".concat(t.search)),e.next=7,o()({method:"GET",path:Object(r.g)("/carts/lost?offset=".concat(I,"&limit=").concat(c,"&").concat(n))});case 7:if((a=e.sent)&&a.result&&Array.isArray(a.result)){e.next=11;break}return V(Object(i.__)("Blank response returned","wp-marketing-automations")),e.abrupt("return");case 11:l=a.total_count,s=a.result,u=a.limit,m=a.offset,l&&M(parseInt(l)),u&&w(parseInt(u)),m&&N(parseInt(m)),s&&U(s),a.hasOwnProperty("count_data")&&z(a.count_data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),V(e.t0&&e.t0.message?e.t0.message:Object(i.__)("Unknown Error Occurred","wp-marketing-automations"));case 22:Q(!1);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){x(c,a,r,o,i,"next",e)}function i(e){x(c,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){Object(r.d)("Lost Carts"),te()}),[I,c]);var ne=Object(a.createElement)("span",{className:"bwfan_tooltip_text","data-position":"top"},Object(a.createElement)("b",null,"Lost"),": Carts where automation sequence is complete and did not complete the order within 1 day are marked as Lost."),ae=[{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"contact",label:Object(i.__)("Contact","wp-marketing-automations"),isLeftAligned:!0},{key:"detail",label:Object(i.__)("Details","wp-marketing-automations"),isLeftAligned:!0},{key:"items",label:Object(i.__)("Items","wp-marketing-automations"),isLeftAligned:!0},{key:"total",label:Object(i.__)("Total","wp-marketing-automations"),isLeftAligned:!0},{key:"order",label:Object(i.__)("Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center"},{key:"show",label:"",isLeftAligned:!0},{key:"status",label:Object(a.createElement)("div",{className:"bwf-display-flex",style:{alignItems:"start"}},Object(i.__)("Status","wp-marketing-automations")," ",Object(a.createElement)(E.a,{position:"bottom",toolTipText:ne,icon:"info",iconSize:20,size:200})),isLeftAligned:!0,cellClassName:"bwf-col-center"}],re=function(e){e!==c&&(N(0),w(e))},ce=function(e){return Object(a.createElement)(l.a,{label:Object(i.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(n){var r=n.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(s.a,{isClickable:!0,onInvoke:function(){Object(S.j)({path:"/carts/lost/".concat(e.id,"/tasks")},"/",t),r()}},Object(a.createElement)(u.a,{justify:"flex-start"},Object(a.createElement)(u.c,null,Object(a.createElement)(A.a,{icon:"view"})),Object(a.createElement)(u.c,null,Object(i.__)("View Tasks","wp-marketing-automations")))),Object(a.createElement)(s.a,{isClickable:!0,onInvoke:function(){ee(e.id),W(!0),r()}},Object(a.createElement)(u.a,{justify:"flex-start"},Object(a.createElement)(u.c,null,Object(a.createElement)(A.a,{icon:"trash"})),Object(a.createElement)(u.c,null,Object(i.__)("Delete","wp-marketing-automations")))))}})},oe=function(e){return e.total?e.currency?Object(j.a)(e.currency).formatAmount(e.total):e.total:"-"},ie=function(e){return e.order_id?Object(a.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?post=".concat(e.order_id,"&action=edit")},"#",e.order_id," ",e.buyer_name):"-"},le=function(e){return Object(a.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(a.createElement)(u.a,{justify:"justify",align:"top"},Object(a.createElement)(u.c,null,Object(a.createElement)(A.a,{icon:"mail"})),Object(a.createElement)(u.c,null,e.email)),e.phone&&Object(a.createElement)(u.a,{justify:"justify",align:"top"},Object(a.createElement)(u.c,null,Object(a.createElement)(A.a,{icon:"phone"})),Object(a.createElement)(u.c,null,e.phone)),!e.phone&&!e.email&&Object(a.createElement)("span",null,"-"))},se=function(e){var t=Object(a.createElement)(y.a,{contact:{f_name:e.f_name?e.f_name:"",l_name:e.l_name?e.l_name:"",email:e.email},dateText:Object(i.__)("Last Active:","wp-marketing-automations"),lowerText:e.date?e.diffstring:"-"});return e.contact_id?Object(a.createElement)(h.a,{href:"admin.php?page=autonami&path=/contact/"+e.contact_id,type:"bwf-crm",className:"bwf-a-no-underline"},t):t},ue=Array.isArray(D)?D.map((function(e){return[{display:ce(e),value:""},{display:se(e),value:""},{display:le(e),value:""},{display:(t=e.items,n="",r=[],Object.entries(t).map((function(e){var t=T(e,2),c=t[0],o=t[1];Object(_.isEmpty)(n)&&(n=Object(a.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?action=edit&post="+c},o)),r.push(Object(a.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?action=edit&post="+c},o))})),Object(a.createElement)("div",{className:"bwf-table-v-center"},Object(_.isEmpty)(n)?"-":n,!Object(_.isEmpty)(r)&&r.length>1&&Object(a.createElement)(d.a,{items:r}))),value:e.items},{display:oe(e),value:e.total},{display:ie(e),value:e.order_id},{display:Object(a.createElement)(O.a,{cart:e}),value:""},{display:Object(a.createElement)("span",null,Object(i.__)("Lost","wp-marketing-automations")),value:e.status}];var t,n,r})):[],me=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(A.a,{icon:"cart-icon",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(i.__)("Cart Tracking is disabled","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(i.__)("Click on the button below to go to Settings > Carts to enable cart tracking. Once activated, you will be able to capture emails as soon buyer enters it.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(i.__)("Enable Tracking","wp-marketing-automations"),onClick:function(){Object(S.j)({page:"autonami",path:"/settings"},"/",{})}}]}}];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(k.a,null),Object(r.T)()?Object(a.createElement)(a.Fragment,null,G&&Object(a.createElement)(m.Notice,{status:"error"},G),Object(a.createElement)(b.a,{className:v()("bwfcrm-forms-list-table",{"has-search":!0}),rows:ue,headers:ae,query:{paged:I/c+1},rowsPerPage:c,totalRows:R,isLoading:J,onPageChange:function(e,t){N((e-1)*c)},onQueryChange:function(e){return"per_page"!==e?function(){}:re},rowHeader:!0,showMenu:!1,actions:[Object(a.createElement)(p.a,{onSearch:function(e){te(e)}})],emptyMessage:Object(i.__)("No lost carts found","wp-marketing-automations")}),Object(a.createElement)(g.a,{cartId:Z,isOpen:K,onRequestClose:function(e){W(!1),e&&te()}})):Object(a.createElement)(C.a,{data:me}))}}}]);