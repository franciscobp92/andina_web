function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,n)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{scZl:function(e,t,i){"use strict";i.r(t),i.d(t,"EcommerceModule",(function(){return vt}));var o=i("tyNb"),n=i("bTqV"),a=i("A5z7"),r=i("FKr1"),c=i("7EHt"),d=i("kmnG"),s=i("NFeN"),l=i("qFsG"),b=i("M9IT"),p=i("d3UM"),m=i("dNgK"),u=i("Dh3D"),f=i("+0xr"),h=i("wZkO"),v=i("zQsl"),g=(i("mrSG"),i("fXoL")),x=(i("HDdC"),i("2Vo4")),y=(i("Cfvw"),i("PqYM"),i("XNiG")),_=(i("DH7j"),i("n6bG"),i("lJxs")),w=i("VRyK");i("jtHE"),i("quSY"),i("8Qeq"),i("z+Ro"),i("LRne"),i("z6cu"),i("5+tZ"),i("l7GE"),i("ZUHj"),i("eIep"),i("UXun"),i("/uUt");var O,C,Z,Y,D,S=i("1G5W"),P=(i("JX91"),i("zP0r"),i("oB13"),i("ofXK")),A=((O=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||O)},O.\u0275prov=g.Pb({token:O,factory:O.\u0275fac}),O),F=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeWindow",value:function(){return window}}]),e}(),k=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getNativeDocument",value:function(){return document}}]),e}(),T=[F,k],E=function(e){return e[e.HTTP=1]="HTTP",e[e.HTTPS=2]="HTTPS",e[e.AUTO=3]="AUTO",e}({}),I=new g.s("angular-google-maps LAZY_MAPS_API_CONFIG"),L=((C=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,i),(e=t.call(this)).localeId=r,e._SCRIPT_ID="agmGoogleMapsApiScript",e.callbackName="agmLazyMapsAPILoader",e._config=o||{},e._windowRef=n,e._documentRef=a,e}return _createClass(i,[{key:"load",value:function(){var e=this._windowRef.getNativeWindow();if(e.google&&e.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var t=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(t)return this._assignScriptLoadingPromise(t),this._scriptLoadingPromise;var i=this._documentRef.getNativeDocument().createElement("script");return i.type="text/javascript",i.async=!0,i.defer=!0,i.id=this._SCRIPT_ID,i.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(i),this._documentRef.getNativeDocument().body.appendChild(i),this._scriptLoadingPromise}},{key:"_assignScriptLoadingPromise",value:function(e){var t=this;this._scriptLoadingPromise=new Promise((function(i,o){t._windowRef.getNativeWindow()[t.callbackName]=function(){i()},e.onerror=function(e){o(e)}}))}},{key:"_getScriptSrc",value:function(e){var t;switch(this._config&&this._config.protocol||E.HTTPS){case E.AUTO:t="";break;case E.HTTP:t="http:";break;case E.HTTPS:t="https:"}var i={v:this._config.apiVersion||"quarterly",callback:e,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return"".concat(t,"//").concat(this._config.hostAndPath||"maps.googleapis.com/maps/api/js","?").concat(Object.keys(i).filter((function(e){return null!=i[e]})).filter((function(e){return!Array.isArray(i[e])||Array.isArray(i[e])&&i[e].length>0})).map((function(e){var t=i[e];return Array.isArray(t)?{key:e,value:t.join(",")}:{key:e,value:i[e]}})).map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&"))}}]),i}(A)).\u0275fac=function(e){return new(e||C)(g.dc(I,8),g.dc(F),g.dc(k),g.dc(g.w))},C.\u0275prov=g.Pb({token:C,factory:C.\u0275fac}),C),R=((Y=Z=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(e){return{ngModule:Z,providers:[].concat(T,[{provide:A,useClass:L},{provide:I,useValue:e}])}}}]),e}()).\u0275mod=g.Rb({type:Y}),Y.\u0275inj=g.Qb({factory:function(e){return new(e||Y)}}),Y),N=i("5HBU"),U=i("4CPF"),z=i("0EQZ"),M=i("PVWW"),H=i("jD4G"),B=i("tk/3"),Q=i("EnSQ"),j=i("wUqA"),W=((D=function(){function e(t,i,o){_classCallCheck(this,e),this._httpClient=t,this._dataService=i,this._authService=o,this.onOrdersChanged=new x.a({}),this._authService.loadUserData()}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return new Promise((function(e,t){Promise.all([i.getOrders()]).then((function(t){e(t)}),t)}))}},{key:"getOrders",value:function(){var e,t=this,i=this._authService.getCurrentUser();return e="vendedor_al"==i.roles?"https://andinalicores.com.ec/wp-json/custom-plugin/vendedor/pedidos/"+i.code:"https://andinalicores.com.ec/wp-json/custom-plugin/pedido/cliente/"+i.code,new Promise((function(o,n){t._httpClient.get(e).subscribe((function(e){if(t.pedidos=e,t.pedidos.PedFacClientes.length>0){t.pedidos=t.pedidos.PedFacClientes;var n=new Array;if("vendedor_al"==i.roles)for(var a=0;a<t.pedidos.length;a++)(c=[]).push("Mayorizada"==t.pedidos[a].ESTADO?{id:17,name:"Completado",color:"blue-700"}:{id:16,name:"Pendiente",color:"red-500"}),n.push({id:a+1,reference:t.pedidos[a].PEDIDO,total:t.pedidos[a].TOT_PEDIDO,date:t.pedidos[a].FEC_PEDIDO,codigo:t.pedidos[a].COD_PEDIDO,factura:t.pedidos[a].FACTURA,aprobada:t.pedidos[a].FEC_APROBA,cliente:t.pedidos[a].CODIGO_CLIENTE,email_cli:t.pedidos[a].CLIENTE_MAIL,tel:t.pedidos[a].CLIENTE_TELEFONO,customer:{id:a,name:t.pedidos[a].CLI_NOMBRE,email:i.mail_emp,phone:"",invoiceAddress:{address:t.pedidos[a].OBSERVACION}},status:c});else for(var r=0;r<t.pedidos.length;r++){var c;(c=[]).push("Mayorizada"==t.pedidos[r].ESTADO?{id:17,name:"Completado",color:"blue-700"}:{id:16,name:"Pendiente",color:"red-500"}),n.push({id:r+1,reference:t.pedidos[r].PEDIDO,total:t.pedidos[r].TOT_PEDIDO,date:t.pedidos[r].FEC_PEDIDO,codigo:t.pedidos[r].COD_PEDIDO,factura:t.pedidos[r].FACTURA,aprobada:t.pedidos[r].FEC_APROBA,cliente:"0",email_cli:"",tel:"",customer:{id:r,name:t.pedidos[r].CLI_NOMBRE,email:i.mail_emp,phone:"",invoiceAddress:{address:t.pedidos[r].OBSERVACION}},status:c})}t.orders=n.reverse(),t.onOrdersChanged.next(t.orders),o(e)}else t.orders=[],t.onOrdersChanged.next(t.orders),o(e)}),n)}))}}]),e}()).\u0275fac=function(e){return new(e||D)(g.dc(B.b),g.dc(Q.a),g.dc(j.a))},D.\u0275prov=g.Pb({token:D,factory:D.\u0275fac}),D),q=i("XiUz"),X=i("EwFO"),G=i("MMsv"),$=i("znSr"),K=["filter"];function V(e,t){1&e&&(g.Zb(0,"mat-header-cell",34),g.Oc(1,"Nro."),g.Yb())}function J(e,t){if(1&e&&(g.Zb(0,"mat-cell"),g.Zb(1,"p"),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Pc(i.id)}}function ee(e,t){1&e&&(g.Zb(0,"mat-header-cell",35),g.Oc(1,"Nombre"),g.Yb())}function te(e,t){if(1&e&&(g.Zb(0,"mat-cell",36),g.Zb(1,"p",37),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",i.customer.name," ")}}function ie(e,t){1&e&&(g.Zb(0,"mat-header-cell",38),g.Oc(1,"Nro. Pedido"),g.Yb())}function oe(e,t){if(1&e&&(g.Zb(0,"mat-cell",39),g.Zb(1,"p"),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Pc(i.reference)}}function ne(e,t){1&e&&(g.Zb(0,"mat-header-cell",40),g.Oc(1,"Total"),g.Yb())}function ae(e,t){if(1&e&&(g.Zb(0,"mat-cell",41),g.Zb(1,"p",42),g.Oc(2),g.mc(3,"currency"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",g.pc(3,1,i.total,"USD","symbol")," ")}}function re(e,t){1&e&&(g.Zb(0,"mat-header-cell",43),g.Oc(1,"Proceso"),g.Yb())}function ce(e,t){if(1&e&&(g.Zb(0,"mat-cell",44),g.Zb(1,"p",45),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(1),g.sc("ngClass",i.status[0].color),g.Fb(1),g.Qc(" ",i.status[0].name," ")}}function de(e,t){1&e&&(g.Zb(0,"mat-header-cell",46),g.Oc(1,"Fecha"),g.Yb())}function se(e,t){if(1&e&&(g.Zb(0,"mat-cell",47),g.Zb(1,"p"),g.Oc(2),g.mc(3,"date"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",g.oc(3,1,i.date,"medium")," ")}}function le(e,t){1&e&&g.Ub(0,"mat-header-row")}function be(e,t){if(1&e&&g.Ub(0,"mat-row",48),2&e){var i=t.$implicit;g.sc("routerLink","/apps/e-commerce/orders/"+i.codigo+"/"+i.cliente+"-"+i.tel+"-"+i.email_cli)}}var pe,me,ue,fe=function(){return{x:"50px"}},he=function(e){return{value:"*",params:e}},ve=function(){return{y:"100%"}},ge=function(){return{value:"50"}},xe=function(){return[5,10,25,100]},ye=((pe=function(){function e(t,i){_classCallCheck(this,e),this._ecommerceOrdersService=t,this._authService=i,this.displayedColumns=["id","customer","reference","date","status","total"],this._unsubscribeAll=new y.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.dataSource=new _e(this._ecommerceOrdersService,this.paginator,this.sort)}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||pe)(g.Tb(W),g.Tb(j.a))},pe.\u0275cmp=g.Nb({type:pe,selectors:[["e-commerce-orders"]],viewQuery:function(e,t){var i;1&e&&(g.Kc(b.a,!0),g.Kc(K,!0),g.Kc(u.a,!0)),2&e&&(g.zc(i=g.ic())&&(t.paginator=i.first),g.zc(i=g.ic())&&(t.filter=i.first),g.zc(i=g.ic())&&(t.sort=i.first))},decls:35,vars:18,consts:[["id","dashboard-pedidos","fxLayout","row",1,"page-layout","simple","right-sidebar"],["fusePerfectScrollbar","",1,"center"],["fxLayout","column","fxLayoutAlign","space-between",1,"header","p-24","pb-0",2,"background-color","#5d9ed1","color","#ffffff","border","none"],["fxLayout","row","fxLayoutAlign","space-between start"],[1,"mat-display-1","my-0","my-sm-24","welcome-message"],[1,"content"],["dynamicHeight",""],["label","Pedidos"],["fxLayout","row","fxFlex","100",1,"widget"],[1,"content-card",2,"width","100%","padding","0 2%"],["matSort","","fusePerfectScrollbar","",1,"orders-table",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","customer"],["mat-sort-header","","style","min-width: 220px;",4,"matHeaderCellDef"],["style","min-width: 220px;",4,"matCellDef"],["matColumnDef","reference"],["mat-sort-header","","fxHide","","fxShow.gt-sm","","style","min-width: 250px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-sm","","style","min-width: 250px;",4,"matCellDef"],["matColumnDef","total"],["mat-sort-header","","fxHide","","fxShow.gt-md","","style","min-width: 150px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-md","","style","min-width: 150px;",4,"matCellDef"],["matColumnDef","status"],["mat-sort-header","","style","min-width: 150px;",4,"matHeaderCellDef"],["style","min-width: 150px;",4,"matCellDef"],["matColumnDef","date"],["mat-sort-header","","fxHide","","fxShow.gt-sm","","style","min-width: 200px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-sm","","style","min-width: 200px;",4,"matCellDef"],[4,"matHeaderRowDef"],["class","order","matRipple","",3,"routerLink",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""],["mat-sort-header","",2,"min-width","220px"],[2,"min-width","220px"],[1,""],["mat-sort-header","","fxHide","","fxShow.gt-sm","",2,"min-width","250px"],["fxHide","","fxShow.gt-sm","",2,"min-width","250px"],["mat-sort-header","","fxHide","","fxShow.gt-md","",2,"min-width","150px"],["fxHide","","fxShow.gt-md","",2,"min-width","150px"],[1,"total-price"],["mat-sort-header","",2,"min-width","150px"],[2,"min-width","150px"],[1,"status","h6","p-4",3,"ngClass"],["mat-sort-header","","fxHide","","fxShow.gt-sm","",2,"min-width","200px"],["fxHide","","fxShow.gt-sm","",2,"min-width","200px"],["matRipple","",1,"order",3,"routerLink"]],template:function(e,t){1&e&&(g.Zb(0,"div",0),g.Zb(1,"div",1),g.Zb(2,"div",2),g.Zb(3,"div",3),g.Zb(4,"span",4),g.Oc(5,"Pedidos "),g.Yb(),g.Yb(),g.Yb(),g.Zb(6,"div",5),g.Zb(7,"mat-tab-group",6),g.Zb(8,"mat-tab",7),g.Zb(9,"fuse-widget",8),g.Zb(10,"div",9),g.Zb(11,"mat-table",10,11),g.Xb(13,12),g.Mc(14,V,2,0,"mat-header-cell",13),g.Mc(15,J,3,1,"mat-cell",14),g.Wb(),g.Xb(16,15),g.Mc(17,ee,2,0,"mat-header-cell",16),g.Mc(18,te,3,1,"mat-cell",17),g.Wb(),g.Xb(19,18),g.Mc(20,ie,2,0,"mat-header-cell",19),g.Mc(21,oe,3,1,"mat-cell",20),g.Wb(),g.Xb(22,21),g.Mc(23,ne,2,0,"mat-header-cell",22),g.Mc(24,ae,4,5,"mat-cell",23),g.Wb(),g.Xb(25,24),g.Mc(26,re,2,0,"mat-header-cell",25),g.Mc(27,ce,3,2,"mat-cell",26),g.Wb(),g.Xb(28,27),g.Mc(29,de,2,0,"mat-header-cell",28),g.Mc(30,se,4,4,"mat-cell",29),g.Wb(),g.Mc(31,le,1,0,"mat-header-row",30),g.Mc(32,be,1,1,"mat-row",31),g.Yb(),g.Ub(33,"mat-paginator",32,33),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb()),2&e&&(g.Fb(4),g.sc("@animate",g.vc(11,he,g.uc(10,fe))),g.Fb(5),g.sc("@animate",g.vc(14,he,g.uc(13,ve))),g.Fb(2),g.sc("dataSource",t.dataSource)("@animateStagger",g.uc(16,ge)),g.Fb(20),g.sc("matHeaderRowDef",t.displayedColumns),g.Fb(1),g.sc("matRowDefColumns",t.displayedColumns),g.Fb(1),g.sc("length",t.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",g.uc(17,xe)))},directives:[q.c,X.a,q.b,h.b,h.a,G.a,q.a,f.j,u.a,f.c,f.e,f.b,f.g,f.i,b.a,f.d,u.b,f.a,$.b,P.q,$.a,f.f,f.h,r.t,o.g],pipes:[P.d,P.f],styles:["@media screen and (max-width:599px){e-commerce-orders #orders .top-bg{height:224px}}e-commerce-orders #orders>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (max-width:599px){e-commerce-orders #orders>.center>.header .search-wrapper{width:100%}}e-commerce-orders #orders>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}e-commerce-orders #orders>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width:599px){e-commerce-orders #orders>.center>.header{padding:8px 0;height:160px!important;min-height:160px!important;max-height:160px!important}}e-commerce-orders .mat-tab-body-wrapper,e-commerce-orders .mat-tab-group,e-commerce-orders .tab-content{flex:1 1 auto;max-width:100%}e-commerce-orders .orders-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}e-commerce-orders .orders-table .mat-header-row{min-height:64px}e-commerce-orders .orders-table .order{position:relative;cursor:pointer;height:84px}e-commerce-orders .orders-table .mat-cell{min-width:0;display:flex;align-items:center}e-commerce-orders .orders-table .mat-column-id,e-commerce-orders .orders-table .mat-column-image{flex:0 1 84px}e-commerce-orders .orders-table .mat-column-image .product-image{width:52px;height:52px;border:1px solid rgba(0,0,0,.12)}e-commerce-orders .orders-table .mat-column-buttons{flex:0 1 80px}e-commerce-orders .orders-table .quantity-indicator{display:inline-block;vertical-align:middle;width:8px;height:8px;border-radius:4px;margin-right:8px}e-commerce-orders .orders-table .quantity-indicator+span{display:inline-block;vertical-align:middle}e-commerce-orders .orders-table .active-icon{border-radius:50%}#dashboard-pedidos>.sidebar{width:280px;min-width:280px;max-width:280px}#dashboard-pedidos>.center>.header{height:160px;min-height:160px;max-height:160px}#dashboard-pedidos>.center>.header .selected-pedidos{background:rgba(0,0,0,.12);color:#fff;padding:8px 16px;height:40px;line-height:24px;font-size:16px;border-radius:8px 0 0 0}#dashboard-pedidos>.center>.header .pedidos-selector{margin-left:1px;background:rgba(0,0,0,.12);border-radius:0 8px 0 0}#dashboard-pedidos>.center>.header .pedidos-selector mat-icon{color:#fff}#dashboard-pedidos>.center>.content{flex:1}#dashboard-pedidos>.center>.content mat-tab-group{height:100%}#dashboard-pedidos>.center>.content mat-tab-group .mat-tab-body-wrapper{flex-grow:1}#dashboard-pedidos>.center>.content .mat-tab-label-container{padding:0 24px}#dashboard-pedidos .widget.widget5 .gridline-path.gridline-path-horizontal{display:none}.mat-cell,.mat-footer-cell,.mat-header-cell{padding:20px}"],encapsulation:2,data:{animation:M.a}}),pe),_e=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,o,n){var a;return _classCallCheck(this,i),(a=t.call(this))._ecommerceOrdersService=e,a._matPaginator=o,a._matSort=n,a._filterChange=new x.a(""),a._filteredDataChange=new x.a(""),a.filteredData=a._ecommerceOrdersService.orders,a}return _createClass(i,[{key:"connect",value:function(){var e=this,t=[this._ecommerceOrdersService.onOrdersChanged,this._matPaginator.page,this._filterChange,this._matSort.sortChange];return Object(w.a).apply(void 0,t).pipe(Object(_.a)((function(){var t=e._ecommerceOrdersService.orders.slice();return t=e.filterData(t),e.filteredData=_toConsumableArray(t),(t=e.sortData(t)).splice(e._matPaginator.pageIndex*e._matPaginator.pageSize,e._matPaginator.pageSize)})))}},{key:"filterData",value:function(e){return this.filter?H.a.filterArrayByString(e,this.filter):e}},{key:"sortData",value:function(e){var t=this;return this._matSort.active&&""!==this._matSort.direction?e.sort((function(e,i){var o="",n="";switch(t._matSort.active){case"id":var a=[e.id,i.id];o=a[0],n=a[1];break;case"reference":var r=[e.reference,i.reference];o=r[0],n=r[1];break;case"customer":var c=[e.customer.firstName,i.customer.firstName];o=c[0],n=c[1];break;case"total":var d=[e.total,i.total];o=d[0],n=d[1];break;case"status":var s=[e.status[0].name,i.status[0].name];o=s[0],n=s[1];break;case"date":var l=[e.date,i.date];o=l[0],n=l[1]}return((isNaN(+o)?o:+o)<(isNaN(+n)?n:+n)?-1:1)*("asc"===t._matSort.direction?1:-1)})):e}},{key:"disconnect",value:function(){}},{key:"filteredData",get:function(){return this._filteredDataChange.value},set:function(e){this._filteredDataChange.next(e)}},{key:"filter",get:function(){return this._filterChange.value},set:function(e){this._filterChange.next(e)}}]),i}(z.b),we=[{id:1,name:"Awaiting check payment",color:"blue-500"},{id:2,name:"Payment accepted",color:"green-500"},{id:3,name:"Preparing the order",color:"orange-500"},{id:4,name:"Shipped",color:"purple-500"},{id:5,name:"Delivered",color:"green-800"},{id:6,name:"Canceled",color:"pink-500"},{id:7,name:"Refunded",color:"red-500"},{id:8,name:"Payment error",color:"red-900"},{id:9,name:"On pre-order (paid)",color:"purple-300"},{id:10,name:"Awaiting bank wire payment",color:"blue-500"},{id:11,name:"Awaiting PayPal payment",color:"blue-500"},{id:12,name:"Remote payment accepted",color:"green-500"},{id:13,name:"On pre-order (not paid)",color:"purple-300"},{id:14,name:"Awaiting Cash-on-delivery payment",color:"blue-500"},{id:15,name:"Mayorizado",color:"blue-500"}],Oe=function e(t){_classCallCheck(this,e),this.id=(t=t||{}).id||H.a.generateGUID(),this.reference=t.reference||H.a.generateGUID(),this.subtotal=t.subtotal||0,this.tax=t.tax||0,this.discount=t.discount||0,this.total=t.total||0,this.date=t.date||"",this.aprobada=t.aprobada||"",this.factura=t.factura||"",this.customer=t.customer||{},this.products=t.products||[],this.status=t.status||[],this.payment=t.payment||{},this.shippingDetails=t.shippingDetails||[]},Ce=i("k1t7"),Ze=((me=function(){function e(t,i,o,n,a){_classCallCheck(this,e),this._httpClient=t,this._dataService=i,this._authService=o,this._fuseProgressBarService=n,this._snackBar=a,this.onOrderChanged=new x.a({})}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return this.routeParams=e.params,new Promise((function(e,t){Promise.all([i.getOrder()]).then((function(t){e(t)}),t)}))}},{key:"getOrder",value:function(){var e=this,t=this._authService.getCurrentUser(),i=this.routeParams.ref.split("-"),o="https://andinalicores.com.ec/wp-json/custom-plugin/pedido/"+this.routeParams.id+"?ID="+t.ID;return new Promise((function(n,a){e._httpClient.get(o).subscribe((function(o){e.pedido=o;var a=new Array;if(e.pedido.length>0){for(var r=0;r<e.pedido.length;r++)a.push({id:r+1,name:e.pedido[r].PRO_PEDIDO,price:e.pedido[r].PED_NETO/e.pedido[r].CANT_PEDIDO,quantity:e.pedido[r].CANT_PEDIDO,total:e.pedido[r].PED_NETO,image:e.pedido[r].CODE});var c="",d="";"vendedor_al"==t.roles?(c=i[2],d=i[1]):(c=t.mail_emp,d=e._dataService.dataUser._cli_telefono1);var s={reference:e.pedido[0].PEDIDO,subtotal:e.pedido[0].TOT_FACTURA-.12*e.pedido[0].TOT_FACTURA,tax:.12*e.pedido[0].TOT_FACTURA,total:e.pedido[0].TOT_FACTURA,date:e.pedido[0].FEC_PEDIDO,factura:e.pedido[0].FACTURA,aprobada:e.pedido[0].FEC_APROBA,customer:{id:1,name:e.pedido[0].CLIENTE,email:c,phone:d},payment:{transactionId:"2a894b9e",amount:e.pedido[0].TOT_FACTURA,method:"Pago Directo",date:e.pedido[0].FEC_PEDIDO},shippingDetails:[{tracking:"",carrier:"TNT",weight:"10.44",fee:"7.00",date:"2018/04/10 07:03:52"}]},l=[];l.push("Facturado"==e.pedido[0].ENTREGA?{id:17,name:"Completado",color:"blue-700",date:e.pedido[0].FEC_PEDIDO}:{id:16,name:"Pendiente",color:"red-500",date:e.pedido[0].FEC_PEDIDO})}e.pedido.length>0?(s.products=a,s.status=l,e.order=s,n(s)):(e._fuseProgressBarService.hide(),e.openSnackBar("No se encontraron datos para este pedido","Warning!")),e.onOrderChanged.next(e.order)}),a)}))}},{key:"openSnackBar",value:function(e,t){this._snackBar.open(e,t,{duration:5e3})}},{key:"saveOrder",value:function(e){var t=this;return new Promise((function(i,o){t._httpClient.post("api/e-commerce-orders/"+e.id,e).subscribe((function(e){i(e)}),o)}))}},{key:"addOrder",value:function(e){var t=this;return new Promise((function(i,o){t._httpClient.post("api/e-commerce-orders/",e).subscribe((function(e){i(e)}),o)}))}}]),e}()).\u0275fac=function(e){return new(e||me)(g.dc(B.b),g.dc(Q.a),g.dc(j.a),g.dc(Ce.a),g.dc(m.a))},me.\u0275prov=g.Pb({token:me,factory:me.\u0275fac}),me),Ye=i("3Pt+"),De=i("h2q7"),Se=((ue=function(){function e(t,i,o){_classCallCheck(this,e),this._elementRef=t,this._fuseMediaMatchService=i,this._renderer=o,this._unsubscribeAll=new y.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._parent=this._renderer.parentNode(this._elementRef.nativeElement),this._parent&&(this._grandParent=this._renderer.parentNode(this._parent),this._fuseMediaMatchService.onMediaChange.pipe(Object(S.a)(this._unsubscribeAll)).subscribe((function(t){"xs"===t?e._removeClass():e._addClass()})))}},{key:"ngOnDestroy",value:function(){this._parent&&(this._removeClass(),this._unsubscribeAll.next(),this._unsubscribeAll.complete())}},{key:"_addClass",value:function(){this._renderer.addClass(this._grandParent,"inner-scroll")}},{key:"_removeClass",value:function(){this._renderer.removeClass(this._grandParent,"inner-scroll")}}]),e}()).\u0275fac=function(e){return new(e||ue)(g.Tb(g.l),g.Tb(De.a),g.Tb(g.H))},ue.\u0275dir=g.Ob({type:ue,selectors:[["",8,"inner-scroll"]]}),ue);function Pe(e,t){if(1&e&&(g.Zb(0,"tr"),g.Zb(1,"td"),g.Zb(2,"span",51),g.Oc(3),g.Yb(),g.Yb(),g.Zb(4,"td"),g.Zb(5,"span"),g.Oc(6),g.mc(7,"date"),g.Yb(),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.sc("ngClass",i.color),g.Fb(1),g.Qc(" ",i.name," "),g.Fb(3),g.Qc(" ",g.oc(7,3,i.date,"medium")," ")}}function Ae(e,t){if(1&e&&(g.Zb(0,"tr",52),g.Zb(1,"td"),g.Oc(2),g.Yb(),g.Zb(3,"td"),g.Ub(4,"img",53),g.Yb(),g.Zb(5,"td"),g.Oc(6),g.Yb(),g.Zb(7,"td"),g.Oc(8),g.mc(9,"currency"),g.Yb(),g.Zb(10,"td"),g.Oc(11),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",i.id," "),g.Fb(2),g.sc("src",i.image,g.Gc),g.Fb(2),g.Qc(" ",i.name," "),g.Fb(2),g.Qc(" ",g.pc(9,5,i.price,"USD","symbol")," "),g.Fb(3),g.Qc(" ",i.quantity," ")}}function Fe(e,t){if(1&e&&(g.Zb(0,"tr"),g.Zb(1,"td"),g.Zb(2,"div",40),g.Oc(3),g.Yb(),g.Yb(),g.Zb(4,"td",46),g.Oc(5),g.mc(6,"currency"),g.Yb(),g.Zb(7,"td",46),g.Oc(8),g.Yb(),g.Zb(9,"td",46),g.Oc(10),g.mc(11,"currency"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(3),g.Qc(" ",i.name," "),g.Fb(2),g.Qc(" ",g.pc(6,4,i.price,"USD","symbol")," "),g.Fb(3),g.Qc(" ",i.quantity," "),g.Fb(2),g.Qc(" ",g.pc(11,8,i.total,"USD","symbol")," ")}}var ke,Te,Ee=function(){return{delay:"100ms",x:"-25px"}},Ie=function(e){return{value:"*",params:e}},Le=((ke=function(){function e(t,i,o){_classCallCheck(this,e),this._ecommerceOrderService=t,this._formBuilder=i,this._authService=o,this.order=new Oe,this.orderStatuses=we,this._unsubscribeAll=new y.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._authService.loadUserData(),this._ecommerceOrderService.onOrderChanged.pipe(Object(S.a)(this._unsubscribeAll)).subscribe((function(t){e.order=new Oe(t)})),this.statusForm=this._formBuilder.group({newStatus:[""]})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||ke)(g.Tb(Ze),g.Tb(Ye.c),g.Tb(j.a))},ke.\u0275cmp=g.Nb({type:ke,selectors:[["e-commerce-order"]],decls:161,vars:45,consts:[["id","order",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg",2,"background-color","#5d9ed1","color","#ffffff","border","none"],[1,"center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header","p-24","pb-0",2,"background-color","#5d9ed1","color","#ffffff","border","none"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","",1,"mr-16",3,"routerLink"],["fxLayout","column","fxLayoutAlign","start start"],[1,"h2"],[1,"content-card"],[1,"content"],["fxLayout","column","fxFlex",""],["label","Detalles del Pedido"],["fusePerfectScrollbar","",1,"order-details","tab-content","p-24"],[1,"section","pb-48"],["fxLayout","row","fxLayoutAlign","start center",1,"pb-16"],[1,"h2","secondary-text"],[1,"customer","mb-32"],[1,"simple"],[1,"name"],[1,"email"],[1,"phone"],[4,"ngFor","ngForOf"],[1,""],["label","Productos"],["fusePerfectScrollbar","",1,"products","tab-content","p-24"],[1,"w-80"],[1,"w-120"],["class","product-row",4,"ngFor","ngForOf"],["label","Factura"],["fusePerfectScrollbar","",1,"invoice","tab-content","p-24"],["id","invoice","fxLayout","row","fxLayoutAlign","center start","fusePerfectScrollbar","",1,"compact","page-layout","blank"],[1,"invoice-container"],[1,"card"],[1,"header"],[1,"invoice-date"],["fxLayout","row","fxLayoutAlign","space-between stretch"],[1,"client"],["fxLayout","row","fxLayoutAlign","start center",1,"invoice-number"],[1,"number"],[1,"info"],[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"issuer","accent"],[1,"logo"],["src","assets/images/logos/logo_g.png"],[1,"address"],[1,"simple","invoice-table"],[1,"text-right"],[1,"simple","invoice-table-footer"],[1,"subtotal"],[1,"tax"],[1,"total"],[1,"status","h6","p-4",3,"ngClass"],[1,"product-row"],[1,"product-image",3,"src"]],template:function(e,t){1&e&&(g.Zb(0,"div",0),g.Ub(1,"div",1),g.Zb(2,"div",2),g.Zb(3,"div",3),g.Zb(4,"div",4),g.Zb(5,"button",5),g.Zb(6,"mat-icon"),g.Oc(7,"arrow_back"),g.Yb(),g.Yb(),g.Zb(8,"div",6),g.Zb(9,"div",7),g.Oc(10),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(11,"div",8),g.Zb(12,"div",9),g.Zb(13,"mat-tab-group",10),g.Zb(14,"mat-tab",11),g.Zb(15,"div",12),g.Zb(16,"div",13),g.Zb(17,"div",14),g.Zb(18,"div",15),g.Oc(19,"Cliente"),g.Yb(),g.Yb(),g.Zb(20,"div",16),g.Zb(21,"table",17),g.Zb(22,"thead"),g.Zb(23,"tr"),g.Zb(24,"th"),g.Oc(25,"Nombre"),g.Yb(),g.Zb(26,"th"),g.Oc(27,"Email"),g.Yb(),g.Zb(28,"th"),g.Oc(29,"Tel\xe9fono"),g.Yb(),g.Yb(),g.Yb(),g.Zb(30,"tbody"),g.Zb(31,"tr"),g.Zb(32,"td"),g.Zb(33,"div",4),g.Zb(34,"span",18),g.Oc(35),g.Yb(),g.Yb(),g.Yb(),g.Zb(36,"td"),g.Zb(37,"span",19),g.Oc(38),g.Yb(),g.Yb(),g.Zb(39,"td"),g.Zb(40,"span",20),g.Oc(41),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(42,"div",13),g.Zb(43,"div",14),g.Zb(44,"div",15),g.Oc(45,"Estado del Pedido"),g.Yb(),g.Yb(),g.Zb(46,"table",17),g.Zb(47,"thead"),g.Zb(48,"tr"),g.Zb(49,"th"),g.Oc(50,"Estado"),g.Yb(),g.Zb(51,"th"),g.Oc(52,"Fecha"),g.Yb(),g.Yb(),g.Yb(),g.Zb(53,"tbody"),g.Mc(54,Pe,8,6,"tr",21),g.Yb(),g.Yb(),g.Yb(),g.Zb(55,"div",13),g.Zb(56,"div",14),g.Zb(57,"div",15),g.Oc(58,"M\xe9todo de pago"),g.Yb(),g.Yb(),g.Zb(59,"table",17),g.Zb(60,"thead"),g.Zb(61,"tr"),g.Zb(62,"th"),g.Oc(63,"Nro. Transacci\xf3n"),g.Yb(),g.Zb(64,"th"),g.Oc(65,"Forma de pago"),g.Yb(),g.Zb(66,"th"),g.Oc(67,"Monto"),g.Yb(),g.Zb(68,"th"),g.Oc(69,"Fecha"),g.Yb(),g.Yb(),g.Yb(),g.Zb(70,"tbody"),g.Zb(71,"tr"),g.Zb(72,"td"),g.Zb(73,"span",22),g.Oc(74),g.Yb(),g.Yb(),g.Zb(75,"td"),g.Zb(76,"span",22),g.Oc(77),g.Yb(),g.Yb(),g.Zb(78,"td"),g.Zb(79,"span",22),g.Oc(80),g.mc(81,"currency"),g.Yb(),g.Yb(),g.Zb(82,"td"),g.Zb(83,"span",22),g.Oc(84),g.mc(85,"date"),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(86,"mat-tab",23),g.Zb(87,"div",24),g.Zb(88,"table",17),g.Zb(89,"thead"),g.Zb(90,"tr"),g.Zb(91,"th",25),g.Oc(92,"C\xf3digo"),g.Yb(),g.Ub(93,"th",26),g.Zb(94,"th"),g.Oc(95,"Nombre"),g.Yb(),g.Zb(96,"th",26),g.Oc(97,"Precio"),g.Yb(),g.Zb(98,"th",25),g.Oc(99,"Cantidad"),g.Yb(),g.Yb(),g.Yb(),g.Zb(100,"tbody"),g.Mc(101,Ae,12,9,"tr",27),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(102,"mat-tab",28),g.Zb(103,"div",29),g.Zb(104,"div",30),g.Zb(105,"div",31),g.Zb(106,"div",32),g.Zb(107,"div",33),g.Zb(108,"div",34),g.Oc(109),g.mc(110,"date"),g.Yb(),g.Zb(111,"div",35),g.Zb(112,"div",36),g.Zb(113,"div",37),g.Zb(114,"span",38),g.Oc(115),g.Yb(),g.Yb(),g.Zb(116,"div",39),g.Zb(117,"div",40),g.Oc(118),g.Yb(),g.Zb(119,"div",19),g.Oc(120),g.Yb(),g.Yb(),g.Yb(),g.Zb(121,"div",41),g.Zb(122,"div",42),g.Ub(123,"img",43),g.Yb(),g.Zb(124,"div",39),g.Ub(125,"div",40),g.Ub(126,"div",44),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(127,"div",9),g.Zb(128,"table",45),g.Zb(129,"thead"),g.Zb(130,"tr"),g.Zb(131,"th"),g.Oc(132,"PRODUCTO"),g.Yb(),g.Zb(133,"th",46),g.Oc(134,"PRECIO"),g.Yb(),g.Zb(135,"th",46),g.Oc(136,"CANTIDAD"),g.Yb(),g.Zb(137,"th",46),g.Oc(138,"TOTAL"),g.Yb(),g.Yb(),g.Yb(),g.Zb(139,"tbody"),g.Mc(140,Fe,12,12,"tr",21),g.Yb(),g.Yb(),g.Zb(141,"table",47),g.Zb(142,"tbody"),g.Zb(143,"tr",48),g.Zb(144,"td"),g.Oc(145,"SUBTOTAL"),g.Yb(),g.Zb(146,"td"),g.Oc(147),g.mc(148,"currency"),g.Yb(),g.Yb(),g.Zb(149,"tr",49),g.Zb(150,"td"),g.Oc(151,"IVA"),g.Yb(),g.Zb(152,"td"),g.Oc(153),g.mc(154,"currency"),g.Yb(),g.Yb(),g.Zb(155,"tr",50),g.Zb(156,"td"),g.Oc(157,"TOTAL"),g.Yb(),g.Zb(158,"td"),g.Oc(159),g.mc(160,"currency"),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb()),2&e&&(g.Fb(5),g.sc("routerLink","/apps/e-commerce/orders"),g.Fb(3),g.sc("@animate",g.vc(43,Ie,g.uc(42,Ee))),g.Fb(2),g.Qc(" ",t.order.reference," "),g.Fb(25),g.Qc("",t.order.customer.name," "),g.Fb(3),g.Pc(t.order.customer.email),g.Fb(3),g.Pc(t.order.customer.phone),g.Fb(13),g.sc("ngForOf",t.order.status),g.Fb(20),g.Qc(" ",t.order.payment.transactionId," "),g.Fb(3),g.Qc(" ",t.order.payment.method," "),g.Fb(3),g.Qc(" ",g.pc(81,20,t.order.payment.amount,"USD","symbol")," "),g.Fb(4),g.Qc(" ",g.oc(85,24,t.order.payment.date,"medium")," "),g.Fb(17),g.sc("ngForOf",t.order.products),g.Fb(8),g.Qc(" ",g.oc(110,27,t.order.aprobada,"medium"),""),g.Fb(6),g.Pc(t.order.factura),g.Fb(3),g.Qc(" ",t.order.customer.name,""),g.Fb(2),g.Qc(" ",t.order.customer.email,""),g.Fb(20),g.sc("ngForOf",t.order.products),g.Fb(7),g.Pc(g.pc(148,30,t.order.subtotal,"USD","symbol")),g.Fb(6),g.Pc(g.pc(154,34,t.order.tax,"USD","symbol")),g.Fb(6),g.Pc(g.pc(160,38,t.order.total,"USD","symbol")))},directives:[Se,q.c,q.b,n.b,o.g,s.a,h.b,q.a,h.a,X.a,P.s,P.q,$.a],pipes:[P.d,P.f],styles:["#order .header .subtitle{margin:6px 0 0}#order .content .mat-tab-body-wrapper,#order .content .mat-tab-group,#order .content .tab-content{flex:1 1 auto;max-width:100%}#order .content .tab-content.products .product-row{cursor:pointer}#order .content .tab-content.invoice #invoice.compact{padding:0;overflow:auto;-webkit-overflow-scrolling:touch}#order .content .tab-content.invoice #invoice.compact .invoice-container{padding:16px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card{width:1020px;min-width:1020px;max-width:1020px;padding:64px 88px;overflow:hidden;background:#fff;color:rgba(0,0,0,.87);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .invoice-date{font-size:14px;color:rgba(0,0,0,.54);margin-bottom:32px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number{font-size:18px;padding-bottom:2px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number .title{color:rgba(0,0,0,.54)}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number .number{padding-left:6px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date{font-size:18px;padding-bottom:16px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date .title{color:rgba(0,0,0,.54)}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date .date{padding-left:6px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .info{color:rgba(0,0,0,.54);line-height:22px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer{margin-right:-88px;padding-right:66px;width:60%}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer .logo{width:120px;padding:12px 8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer .info{padding:16px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table{margin-top:64px;font-size:15px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:first-child{padding-left:8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:last-child{padding-right:8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td{border-color:rgba(0,0,0,.12)}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:first-child{padding-left:8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:last-child{padding-right:8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .title{font-size:16px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .detail{margin-top:8px;font-size:12px;color:rgba(0,0,0,.54);max-width:360px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer{margin:32px 0 72px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td{text-align:right;font-size:16px;font-weight:600;color:rgba(0,0,0,.54);border-bottom:none;padding:4px 8px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:first-child{text-align:left}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.discount td{padding-bottom:32px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td{padding:24px 8px;border-top:1px solid rgba(0,0,0,.12);font-size:35px;font-weight:300;color:#000}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .note{font-size:15px;font-weight:600;margin-bottom:24px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .logo{width:32px;min-width:32px;margin-right:24px}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .small-note{font-size:12px;font-weight:600;color:rgba(0,0,0,.54);line-height:18px}@media print{#order .content .tab-content.invoice #invoice.compact .invoice-container{padding:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card{width:100%;min-width:0;background:none;padding:0;box-shadow:none}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .invoice-date{margin-bottom:16pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer{padding-right:0;margin-right:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table{margin-top:16pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th{font-size:10pt;max-width:60pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:first-child{padding-left:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:last-child{padding-right:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:first-child{padding-left:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:last-child{padding-right:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .title{font-size:10pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .detail{margin-top:4pt;font-size:9pt;max-width:none}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer{margin:16pt 0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td{font-size:13pt;padding:4pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:first-child{text-align:left;padding-left:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:last-child{padding-right:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.discount td{padding-bottom:16pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td{padding:16pt 4pt 0;font-size:16pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td:first-child{padding-left:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td:last-child{padding-right:0}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .note{font-size:10pt;margin-bottom:8pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .logo{margin-right:8pt}#order .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .small-note{font-size:8pt;line-height:normal}}#order .content .mat-tab-body-content{display:flex}#order .content .mat-tab-label{height:64px}#order .content table{table-layout:fixed}"],encapsulation:2,data:{animation:M.a}}),ke),Re=function e(t){_classCallCheck(this,e),this.id=(t=t||{}).id||H.a.generateGUID(),this.reference=t.reference||H.a.generateGUID(),this.subtotal=t.subtotal||0,this.tax=t.tax||0,this.discount=t.discount||0,this.total=t.total||0,this.date=t.date||"",this.aprobada=t.aprobada||"",this.factura=t.factura||"",this.customer=t.customer||{},this.products=t.products||[],this.status=t.status||[],this.payment=t.payment||{},this.shippingDetails=t.shippingDetails||[]},Ne=((Te=function(){function e(t,i,o,n,a){_classCallCheck(this,e),this._httpClient=t,this._dataService=i,this._authService=o,this._fuseProgressBarService=n,this._snackBar=a,this.onOrderChanged=new x.a({})}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return this.routeParams=e.params,new Promise((function(e,t){Promise.all([i.getOrder()]).then((function(t){e(t)}),t)}))}},{key:"getOrder",value:function(){var e=this,t=this.routeParams.ref.split("-"),i=this._authService.getCurrentUser(),o="https://andinalicores.com.ec/wp-json/custom-plugin/pedido/"+this.routeParams.id+"?ID="+i.ID;return new Promise((function(n,a){e._httpClient.get(o).subscribe((function(o){e.pedido=o;var a=new Array;if(e.pedido.length>0){for(var r=0;r<e.pedido.length;r++)a.push({id:r+1,name:e.pedido[r].PRO_PEDIDO,price:e.pedido[r].FAC_NETO/e.pedido[r].CANT_FACT,quantity:e.pedido[r].CANT_FACT,total:e.pedido[r].FAC_NETO,image:e.pedido[r].CODE});var c="",d="";"vendedor_al"==i.roles?(c=t[2],d=t[1]):(c=i.mail_emp,d=e._dataService.dataUser._cli_telefono1);var s={reference:e.pedido[0].FACTURA,subtotal:e.pedido[0].TOT_FACTURA-.12*e.pedido[0].TOT_FACTURA,tax:.12*e.pedido[0].TOT_FACTURA,total:e.pedido[0].TOT_FACTURA,date:e.pedido[0].FEC_PEDIDO,factura:e.pedido[0].FACTURA,aprobada:e.pedido[0].FEC_APROBA,customer:{id:1,name:e.pedido[0].CLIENTE,email:c,phone:d},payment:{transactionId:"2a894b9e",amount:e.pedido[0].TOT_FACTURA,method:"Pago Directo",date:e.pedido[0].FEC_PEDIDO},shippingDetails:[{tracking:"",carrier:"TNT",weight:"10.44",fee:"7.00",date:"2018/04/10 07:03:52"}]},l=[];l.push("Facturado"==e.pedido[0].ENTREGA?{id:17,name:"Completado",color:"blue-700",date:e.pedido[0].FEC_PEDIDO}:{id:16,name:"Pendiente",color:"red-500",date:e.pedido[0].FEC_PEDIDO})}e.pedido.length>0?(s.products=a,s.status=l,e.order=s,n(s)):(e._fuseProgressBarService.hide(),e.openSnackBar("No se encontraron datos para esta factura","Warning!")),e.onOrderChanged.next(e.order)}),a)}))}},{key:"openSnackBar",value:function(e,t){this._snackBar.open(e,t,{duration:5e3})}},{key:"saveOrder",value:function(e){var t=this;return new Promise((function(i,o){t._httpClient.post("api/e-commerce-orders/"+e.id,e).subscribe((function(e){i(e)}),o)}))}},{key:"addOrder",value:function(e){var t=this;return new Promise((function(i,o){t._httpClient.post("api/e-commerce-orders/",e).subscribe((function(e){i(e)}),o)}))}}]),e}()).\u0275fac=function(e){return new(e||Te)(g.dc(B.b),g.dc(Q.a),g.dc(j.a),g.dc(Ce.a),g.dc(m.a))},Te.\u0275prov=g.Pb({token:Te,factory:Te.\u0275fac}),Te);function Ue(e,t){if(1&e&&(g.Zb(0,"tr"),g.Zb(1,"td"),g.Zb(2,"div",21),g.Oc(3),g.Yb(),g.Yb(),g.Zb(4,"td",28),g.Oc(5),g.mc(6,"currency"),g.Yb(),g.Zb(7,"td",28),g.Oc(8),g.Yb(),g.Zb(9,"td",28),g.Oc(10),g.mc(11,"currency"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(3),g.Qc(" ",i.name," "),g.Fb(2),g.Qc(" ",g.pc(6,4,i.price,"USD","symbol")," "),g.Fb(3),g.Qc(" ",i.quantity," "),g.Fb(2),g.Qc(" ",g.pc(11,8,i.total,"USD","symbol")," ")}}var ze,Me,He=function(){return{delay:"100ms",x:"-25px"}},Be=function(e){return{value:"*",params:e}},Qe=((Me=function(){function e(t,i,o){_classCallCheck(this,e),this._ecommerceFacturaService=t,this._formBuilder=i,this._authService=o,this.order=new Re,this.orderStatuses=we,this._unsubscribeAll=new y.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._authService.loadUserData(),this._ecommerceFacturaService.onOrderChanged.pipe(Object(S.a)(this._unsubscribeAll)).subscribe((function(t){e.order=new Re(t)})),this.statusForm=this._formBuilder.group({newStatus:[""]})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||Me)(g.Tb(Ne),g.Tb(Ye.c),g.Tb(j.a))},Me.\u0275cmp=g.Nb({type:Me,selectors:[["e-commerce-factura"]],decls:71,vars:29,consts:[["id","factura",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg",2,"background-color","#5d9ed1","color","#ffffff","border","none"],[1,"center"],["fxLayout","row","fxLayoutAlign","space-between center",1,"header","p-24","pb-0",2,"background-color","#5d9ed1","color","#ffffff","border","none"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","",1,"mr-16",3,"routerLink"],["fxLayout","column","fxLayoutAlign","start start"],[1,"h2"],[1,"content-card"],[1,"content"],["fusePerfectScrollbar","",1,"invoice","tab-content","p-24"],["id","invoice","fxLayout","row","fxLayoutAlign","center start","fusePerfectScrollbar","",1,"compact","page-layout","blank"],[1,"invoice-container"],[1,"card"],[1,"header"],[1,"invoice-date"],["fxLayout","row","fxLayoutAlign","space-between stretch"],[1,"client"],["fxLayout","row","fxLayoutAlign","start center",1,"invoice-number"],[1,"number"],[1,"info"],[1,"title"],[1,"email"],["fxLayout","row","fxLayoutAlign","start center",1,"issuer","accent"],[1,"logo"],["src","assets/images/logos/logo_g.png"],[1,"address"],[1,"simple","invoice-table"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"simple","invoice-table-footer"],[1,"subtotal"],[1,"tax"],[1,"total"]],template:function(e,t){1&e&&(g.Zb(0,"div",0),g.Ub(1,"div",1),g.Zb(2,"div",2),g.Zb(3,"div",3),g.Zb(4,"div",4),g.Zb(5,"button",5),g.Zb(6,"mat-icon"),g.Oc(7,"arrow_back"),g.Yb(),g.Yb(),g.Zb(8,"div",6),g.Zb(9,"div",7),g.Oc(10),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(11,"div",8),g.Zb(12,"div",9),g.Zb(13,"div",10),g.Zb(14,"div",11),g.Zb(15,"div",12),g.Zb(16,"div",13),g.Zb(17,"div",14),g.Zb(18,"div",15),g.Oc(19),g.mc(20,"date"),g.Yb(),g.Zb(21,"div",16),g.Zb(22,"div",17),g.Zb(23,"div",18),g.Zb(24,"span",19),g.Oc(25),g.Yb(),g.Yb(),g.Zb(26,"div",20),g.Zb(27,"div",21),g.Oc(28),g.Yb(),g.Zb(29,"div",22),g.Oc(30),g.Yb(),g.Yb(),g.Yb(),g.Zb(31,"div",23),g.Zb(32,"div",24),g.Ub(33,"img",25),g.Yb(),g.Zb(34,"div",20),g.Ub(35,"div",21),g.Ub(36,"div",26),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Zb(37,"div",9),g.Zb(38,"table",27),g.Zb(39,"thead"),g.Zb(40,"tr"),g.Zb(41,"th"),g.Oc(42,"PRODUCTO"),g.Yb(),g.Zb(43,"th",28),g.Oc(44,"PRECIO"),g.Yb(),g.Zb(45,"th",28),g.Oc(46,"CANTIDAD"),g.Yb(),g.Zb(47,"th",28),g.Oc(48,"TOTAL"),g.Yb(),g.Yb(),g.Yb(),g.Zb(49,"tbody"),g.Mc(50,Ue,12,12,"tr",29),g.Yb(),g.Yb(),g.Zb(51,"table",30),g.Zb(52,"tbody"),g.Zb(53,"tr",31),g.Zb(54,"td"),g.Oc(55,"SUBTOTAL"),g.Yb(),g.Zb(56,"td"),g.Oc(57),g.mc(58,"currency"),g.Yb(),g.Yb(),g.Zb(59,"tr",32),g.Zb(60,"td"),g.Oc(61,"IVA"),g.Yb(),g.Zb(62,"td"),g.Oc(63),g.mc(64,"currency"),g.Yb(),g.Yb(),g.Zb(65,"tr",33),g.Zb(66,"td"),g.Oc(67,"TOTAL"),g.Yb(),g.Zb(68,"td"),g.Oc(69),g.mc(70,"currency"),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb()),2&e&&(g.Fb(5),g.sc("routerLink","/apps/e-commerce/invoices"),g.Fb(3),g.sc("@animate",g.vc(27,Be,g.uc(26,He))),g.Fb(2),g.Qc(" ",t.order.reference," "),g.Fb(9),g.Pc(g.oc(20,11,t.order.aprobada,"medium")),g.Fb(6),g.Pc(t.order.factura),g.Fb(3),g.Qc(" ",t.order.customer.name,""),g.Fb(2),g.Qc(" ",t.order.customer.email,""),g.Fb(20),g.sc("ngForOf",t.order.products),g.Fb(7),g.Pc(g.pc(58,14,t.order.subtotal,"USD","symbol")),g.Fb(6),g.Pc(g.pc(64,18,t.order.tax,"USD","symbol")),g.Fb(6),g.Pc(g.pc(70,22,t.order.total,"USD","symbol")))},directives:[Se,q.c,q.b,n.b,o.g,s.a,X.a,P.s],pipes:[P.f,P.d],styles:["#factura .header .subtitle{margin:6px 0 0}#factura .content .mat-tab-body-wrapper,#factura .content .mat-tab-group,#factura .content .tab-content{flex:1 1 auto;max-width:100%}#factura .content .tab-content.products .product-row{cursor:pointer}#factura .content .tab-content.invoice #invoice.compact{padding:0;overflow:auto;-webkit-overflow-scrolling:touch}#factura .content .tab-content.invoice #invoice.compact .invoice-container{padding:16px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card{width:1020px;min-width:1020px;max-width:1020px;padding:64px 88px;overflow:hidden;background:#fff;color:rgba(0,0,0,.87);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .invoice-date{font-size:14px;color:rgba(0,0,0,.54);margin-bottom:32px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number{font-size:18px;padding-bottom:2px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number .title{color:rgba(0,0,0,.54)}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .invoice-number .number{padding-left:6px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date{font-size:18px;padding-bottom:16px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date .title{color:rgba(0,0,0,.54)}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .due-date .date{padding-left:6px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .client .info{color:rgba(0,0,0,.54);line-height:22px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer{margin-right:-88px;padding-right:66px;width:60%}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer .logo{width:120px;padding:12px 8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer .info{padding:16px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table{margin-top:64px;font-size:15px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:first-child{padding-left:8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:last-child{padding-right:8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td{border-color:rgba(0,0,0,.12)}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:first-child{padding-left:8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:last-child{padding-right:8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .title{font-size:16px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .detail{margin-top:8px;font-size:12px;color:rgba(0,0,0,.54);max-width:360px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer{margin:32px 0 72px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td{text-align:right;font-size:16px;font-weight:600;color:rgba(0,0,0,.54);border-bottom:none;padding:4px 8px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:first-child{text-align:left}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.discount td{padding-bottom:32px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td{padding:24px 8px;border-top:1px solid rgba(0,0,0,.12);font-size:35px;font-weight:300;color:#000}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .note{font-size:15px;font-weight:600;margin-bottom:24px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .logo{width:32px;min-width:32px;margin-right:24px}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .small-note{font-size:12px;font-weight:600;color:rgba(0,0,0,.54);line-height:18px}@media print{#factura .content .tab-content.invoice #invoice.compact .invoice-container{padding:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card{width:100%;min-width:0;background:none;padding:0;box-shadow:none}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .invoice-date{margin-bottom:16pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .header .issuer{padding-right:0;margin-right:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table{margin-top:16pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th{font-size:10pt;max-width:60pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:first-child{padding-left:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table thead tr th:last-child{padding-right:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:first-child{padding-left:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table tbody tr td:last-child{padding-right:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .title{font-size:10pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table .detail{margin-top:4pt;font-size:9pt;max-width:none}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer{margin:16pt 0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td{font-size:13pt;padding:4pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:first-child{text-align:left;padding-left:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr td:last-child{padding-right:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.discount td{padding-bottom:16pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td{padding:16pt 4pt 0;font-size:16pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td:first-child{padding-left:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .content .invoice-table-footer tr.total td:last-child{padding-right:0}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .note{font-size:10pt;margin-bottom:8pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .logo{margin-right:8pt}#factura .content .tab-content.invoice #invoice.compact .invoice-container .card .footer .small-note{font-size:8pt;line-height:normal}}#factura .content .mat-tab-body-content{display:flex}#factura .content .mat-tab-label{height:64px}#factura .content table{table-layout:fixed}"],encapsulation:2,data:{animation:M.a}}),Me),je=((ze=function(){function e(t,i,o,n,a){_classCallCheck(this,e),this._httpClient=t,this._dataService=i,this._authService=o,this._fuseProgressBarService=n,this._snackBar=a,this.onOrdersChanged=new x.a({})}return _createClass(e,[{key:"resolve",value:function(e,t){var i=this;return new Promise((function(e,t){Promise.all([i.getOrders()]).then((function(t){e(t)}),t)}))}},{key:"getOrders",value:function(){var e,t=this,i=this._authService.getCurrentUser();return e="vendedor_al"==i.roles?"https://andinalicores.com.ec/wp-json/custom-plugin/vendedor/pedidos/"+i.code:"https://andinalicores.com.ec/wp-json/custom-plugin/pedido/cliente/"+i.code,new Promise((function(o,n){t._httpClient.get(e).subscribe((function(e){if(t.pedidos=e,t.pedidos.PedFacClientes.length>0){t.pedidos=t.pedidos.PedFacClientes;var n=new Array;if("vendedor_al"==i.roles)for(var a=0;a<t.pedidos.length;a++)(c=[]).push("Mayorizada"==t.pedidos[a].ESTADO?{id:17,name:"Completado",color:"blue-700"}:{id:16,name:"Pendiente",color:"red-500"}),n.push({id:a+1,reference:t.pedidos[a].FACTURA,total:t.pedidos[a].TOT_PEDIDO,date:t.pedidos[a].FEC_PEDIDO,codigo:t.pedidos[a].COD_PEDIDO,factura:t.pedidos[a].FACTURA,aprobada:t.pedidos[a].FEC_APROBA,cliente:t.pedidos[a].CODIGO_CLIENTE,email_cli:t.pedidos[a].CLIENTE_MAIL,tel:t.pedidos[a].CLIENTE_TELEFONO,customer:{id:a,name:t.pedidos[a].CLI_NOMBRE,email:i.mail_emp,phone:"",invoiceAddress:{address:t.pedidos[a].OBSERVACION}},status:c});else for(var r=0;r<t.pedidos.length;r++){var c;(c=[]).push("Mayorizada"==t.pedidos[r].ESTADO?{id:17,name:"Completado",color:"blue-700"}:{id:16,name:"Pendiente",color:"red-500"}),n.push({id:r+1,reference:t.pedidos[r].PEDIDO,total:t.pedidos[r].TOT_PEDIDO,date:t.pedidos[r].FEC_PEDIDO,codigo:t.pedidos[r].COD_PEDIDO,factura:t.pedidos[r].FACTURA,aprobada:t.pedidos[r].FEC_APROBA,cliente:"0",email_cli:"",tel:"",customer:{id:r,name:t.pedidos[r].CLI_NOMBRE,email:i.mail_emp,phone:"",invoiceAddress:{address:t.pedidos[r].OBSERVACION}},status:c})}t.orders=n.reverse(),t.onOrdersChanged.next(t.orders),o(e)}else t.orders=[],t.onOrdersChanged.next(t.orders),o(e)}),n)}))}},{key:"openSnackBar",value:function(e,t){this._snackBar.open(e,t,{duration:5e3})}}]),e}()).\u0275fac=function(e){return new(e||ze)(g.dc(B.b),g.dc(Q.a),g.dc(j.a),g.dc(Ce.a),g.dc(m.a))},ze.\u0275prov=g.Pb({token:ze,factory:ze.\u0275fac}),ze),We=["filter"];function qe(e,t){1&e&&(g.Zb(0,"mat-header-cell",34),g.Oc(1,"Nro."),g.Yb())}function Xe(e,t){if(1&e&&(g.Zb(0,"mat-cell"),g.Zb(1,"p"),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Pc(i.id)}}function Ge(e,t){1&e&&(g.Zb(0,"mat-header-cell",35),g.Oc(1,"Nombre"),g.Yb())}function $e(e,t){if(1&e&&(g.Zb(0,"mat-cell",36),g.Zb(1,"p"),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",i.customer.name," ")}}function Ke(e,t){1&e&&(g.Zb(0,"mat-header-cell",37),g.Oc(1,"Nro. Factura"),g.Yb())}function Ve(e,t){if(1&e&&(g.Zb(0,"mat-cell",38),g.Zb(1,"p"),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Pc(i.reference)}}function Je(e,t){1&e&&(g.Zb(0,"mat-header-cell",39),g.Oc(1,"Total"),g.Yb())}function et(e,t){if(1&e&&(g.Zb(0,"mat-cell",40),g.Zb(1,"p",41),g.Oc(2),g.mc(3,"currency"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",g.pc(3,1,i.total,"USD","symbol")," ")}}function tt(e,t){1&e&&(g.Zb(0,"mat-header-cell",42),g.Oc(1,"Proceso"),g.Yb())}function it(e,t){if(1&e&&(g.Zb(0,"mat-cell",43),g.Zb(1,"p",44),g.Oc(2),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(1),g.sc("ngClass",i.status[0].color),g.Fb(1),g.Qc(" ",i.status[0].name," ")}}function ot(e,t){1&e&&(g.Zb(0,"mat-header-cell",45),g.Oc(1,"Fecha"),g.Yb())}function nt(e,t){if(1&e&&(g.Zb(0,"mat-cell",46),g.Zb(1,"p"),g.Oc(2),g.mc(3,"date"),g.Yb(),g.Yb()),2&e){var i=t.$implicit;g.Fb(2),g.Qc(" ",g.oc(3,1,i.date,"medium")," ")}}function at(e,t){1&e&&g.Ub(0,"mat-header-row")}function rt(e,t){if(1&e&&g.Ub(0,"mat-row",47),2&e){var i=t.$implicit;g.sc("routerLink","/apps/e-commerce/invoices/"+i.codigo+"/"+i.cliente+"-"+i.tel+"-"+i.email_cli)}}var ct,dt,st=function(){return{x:"50px"}},lt=function(e){return{value:"*",params:e}},bt=function(){return{y:"100%"}},pt=function(){return{value:"50"}},mt=function(){return[5,10,25,100]},ut=((ct=function(){function e(t,i){_classCallCheck(this,e),this._ecommerceFacturasService=t,this._authService=i,this.displayedColumns=["id","customer","reference","date","status","total"],this._unsubscribeAll=new y.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.dataSource=new ft(this._ecommerceFacturasService,this.paginator,this.sort)}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}}]),e}()).\u0275fac=function(e){return new(e||ct)(g.Tb(je),g.Tb(j.a))},ct.\u0275cmp=g.Nb({type:ct,selectors:[["e-commerce-facturas"]],viewQuery:function(e,t){var i;1&e&&(g.Kc(b.a,!0),g.Kc(We,!0),g.Kc(u.a,!0)),2&e&&(g.zc(i=g.ic())&&(t.paginator=i.first),g.zc(i=g.ic())&&(t.filter=i.first),g.zc(i=g.ic())&&(t.sort=i.first))},decls:35,vars:18,consts:[["id","dashboard-pedidos","fxLayout","row",1,"page-layout","simple","right-sidebar"],["fusePerfectScrollbar","",1,"center"],["fxLayout","column","fxLayoutAlign","space-between",1,"header","p-24","pb-0",2,"background-color","#5d9ed1","color","#ffffff","border","none"],["fxLayout","row","fxLayoutAlign","space-between start"],[1,"mat-display-1","my-0","my-sm-24","welcome-message"],[1,"content"],["dynamicHeight",""],["label","Facturas"],["fxLayout","row","fxFlex","100",1,"widget"],[1,"content-card",2,"width","100%","padding","0 2%"],["matSort","","fusePerfectScrollbar","",1,"orders-table",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","customer"],["mat-sort-header","","style","min-width: 220px;",4,"matHeaderCellDef"],["style","min-width: 220px;",4,"matCellDef"],["matColumnDef","reference"],["mat-sort-header","","fxHide","","fxShow.gt-sm","","style","min-width: 250px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-sm","","style","min-width: 250px;",4,"matCellDef"],["matColumnDef","total"],["mat-sort-header","","fxHide","","fxShow.gt-md","","style","min-width: 150px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-md","","style","min-width: 150px;",4,"matCellDef"],["matColumnDef","status"],["mat-sort-header","","style","min-width: 150px;",4,"matHeaderCellDef"],["style","min-width: 150px;",4,"matCellDef"],["matColumnDef","date"],["mat-sort-header","","fxHide","","fxShow.gt-sm","","style","min-width: 200px;",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-sm","","style","min-width: 200px;",4,"matCellDef"],[4,"matHeaderRowDef"],["class","order","matRipple","",3,"routerLink",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""],["mat-sort-header","",2,"min-width","220px"],[2,"min-width","220px"],["mat-sort-header","","fxHide","","fxShow.gt-sm","",2,"min-width","250px"],["fxHide","","fxShow.gt-sm","",2,"min-width","250px"],["mat-sort-header","","fxHide","","fxShow.gt-md","",2,"min-width","150px"],["fxHide","","fxShow.gt-md","",2,"min-width","150px"],[1,"total-price"],["mat-sort-header","",2,"min-width","150px"],[2,"min-width","150px"],[1,"status","h6","p-4",3,"ngClass"],["mat-sort-header","","fxHide","","fxShow.gt-sm","",2,"min-width","200px"],["fxHide","","fxShow.gt-sm","",2,"min-width","200px"],["matRipple","",1,"order",3,"routerLink"]],template:function(e,t){1&e&&(g.Zb(0,"div",0),g.Zb(1,"div",1),g.Zb(2,"div",2),g.Zb(3,"div",3),g.Zb(4,"span",4),g.Oc(5,"Facturas "),g.Yb(),g.Yb(),g.Yb(),g.Zb(6,"div",5),g.Zb(7,"mat-tab-group",6),g.Zb(8,"mat-tab",7),g.Zb(9,"fuse-widget",8),g.Zb(10,"div",9),g.Zb(11,"mat-table",10,11),g.Xb(13,12),g.Mc(14,qe,2,0,"mat-header-cell",13),g.Mc(15,Xe,3,1,"mat-cell",14),g.Wb(),g.Xb(16,15),g.Mc(17,Ge,2,0,"mat-header-cell",16),g.Mc(18,$e,3,1,"mat-cell",17),g.Wb(),g.Xb(19,18),g.Mc(20,Ke,2,0,"mat-header-cell",19),g.Mc(21,Ve,3,1,"mat-cell",20),g.Wb(),g.Xb(22,21),g.Mc(23,Je,2,0,"mat-header-cell",22),g.Mc(24,et,4,5,"mat-cell",23),g.Wb(),g.Xb(25,24),g.Mc(26,tt,2,0,"mat-header-cell",25),g.Mc(27,it,3,2,"mat-cell",26),g.Wb(),g.Xb(28,27),g.Mc(29,ot,2,0,"mat-header-cell",28),g.Mc(30,nt,4,4,"mat-cell",29),g.Wb(),g.Mc(31,at,1,0,"mat-header-row",30),g.Mc(32,rt,1,1,"mat-row",31),g.Yb(),g.Ub(33,"mat-paginator",32,33),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb(),g.Yb()),2&e&&(g.Fb(4),g.sc("@animate",g.vc(11,lt,g.uc(10,st))),g.Fb(5),g.sc("@animate",g.vc(14,lt,g.uc(13,bt))),g.Fb(2),g.sc("dataSource",t.dataSource)("@animateStagger",g.uc(16,pt)),g.Fb(20),g.sc("matHeaderRowDef",t.displayedColumns),g.Fb(1),g.sc("matRowDefColumns",t.displayedColumns),g.Fb(1),g.sc("length",t.dataSource.filteredData.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",g.uc(17,mt)))},directives:[q.c,X.a,q.b,h.b,h.a,G.a,q.a,f.j,u.a,f.c,f.e,f.b,f.g,f.i,b.a,f.d,u.b,f.a,$.b,P.q,$.a,f.f,f.h,r.t,o.g],pipes:[P.d,P.f],styles:["@media screen and (max-width:599px){e-commerce-facturas #orders .top-bg{height:224px}}e-commerce-facturas #orders>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (max-width:599px){e-commerce-facturas #orders>.center>.header .search-wrapper{width:100%}}e-commerce-facturas #orders>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}e-commerce-facturas #orders>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width:599px){e-commerce-facturas #orders>.center>.header{padding:8px 0;height:160px!important;min-height:160px!important;max-height:160px!important}}e-commerce-facturas .mat-tab-body-wrapper,e-commerce-facturas .mat-tab-group,e-commerce-facturas .tab-content{flex:1 1 auto;max-width:100%}e-commerce-facturas .orders-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}e-commerce-facturas .orders-table .mat-header-row{min-height:64px;background-color:0}e-commerce-facturas .orders-table .order{position:relative;cursor:pointer;height:84px}e-commerce-facturas .orders-table .mat-cell{min-width:0;display:flex;align-items:center}e-commerce-facturas .orders-table .mat-column-id,e-commerce-facturas .orders-table .mat-column-image{flex:0 1 84px}e-commerce-facturas .orders-table .mat-column-image .product-image{width:52px;height:52px;border:1px solid rgba(0,0,0,.12)}e-commerce-facturas .orders-table .mat-column-buttons{flex:0 1 80px}e-commerce-facturas .orders-table .quantity-indicator{display:inline-block;vertical-align:middle;width:8px;height:8px;border-radius:4px;margin-right:8px}e-commerce-facturas .orders-table .quantity-indicator+span{display:inline-block;vertical-align:middle}e-commerce-facturas .orders-table .active-icon{border-radius:50%}#dashboard-pedidos>.sidebar{width:280px;min-width:280px;max-width:280px}#dashboard-pedidos>.center>.header{height:160px;min-height:160px;max-height:160px}#dashboard-pedidos>.center>.header .selected-pedidos{background:rgba(0,0,0,.12);color:#fff;padding:8px 16px;height:40px;line-height:24px;font-size:16px;border-radius:8px 0 0 0}#dashboard-pedidos>.center>.header .pedidos-selector{margin-left:1px;background:rgba(0,0,0,.12);border-radius:0 8px 0 0}#dashboard-pedidos>.center>.header .pedidos-selector mat-icon{color:#fff}#dashboard-pedidos>.center>.content{flex:1}#dashboard-pedidos>.center>.content mat-tab-group{height:100%}#dashboard-pedidos>.center>.content mat-tab-group .mat-tab-body-wrapper{flex-grow:1}#dashboard-pedidos>.center>.content .mat-tab-label-container{padding:0 24px}#dashboard-pedidos .widget.widget5 .gridline-path.gridline-path-horizontal{display:none}.mat-cell,.mat-footer-cell,.mat-header-cell{padding:20px}"],encapsulation:2,data:{animation:M.a}}),ct),ft=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,o,n){var a;return _classCallCheck(this,i),(a=t.call(this))._ecommerceFacturasService=e,a._matPaginator=o,a._matSort=n,a._filterChange=new x.a(""),a._filteredDataChange=new x.a(""),a.filteredData=a._ecommerceFacturasService.orders,a}return _createClass(i,[{key:"connect",value:function(){var e=this,t=[this._ecommerceFacturasService.onOrdersChanged,this._matPaginator.page,this._filterChange,this._matSort.sortChange];return Object(w.a).apply(void 0,t).pipe(Object(_.a)((function(){var t=e._ecommerceFacturasService.orders.slice();return t=e.filterData(t),e.filteredData=_toConsumableArray(t),(t=e.sortData(t)).splice(e._matPaginator.pageIndex*e._matPaginator.pageSize,e._matPaginator.pageSize)})))}},{key:"filterData",value:function(e){return this.filter?H.a.filterArrayByString(e,this.filter):e}},{key:"sortData",value:function(e){var t=this;return this._matSort.active&&""!==this._matSort.direction?e.sort((function(e,i){var o="",n="";switch(t._matSort.active){case"id":var a=[e.id,i.id];o=a[0],n=a[1];break;case"reference":var r=[e.reference,i.reference];o=r[0],n=r[1];break;case"customer":var c=[e.customer.firstName,i.customer.firstName];o=c[0],n=c[1];break;case"total":var d=[e.total,i.total];o=d[0],n=d[1];break;case"status":var s=[e.status[0].name,i.status[0].name];o=s[0],n=s[1];break;case"date":var l=[e.date,i.date];o=l[0],n=l[1]}return((isNaN(+o)?o:+o)<(isNaN(+n)?n:+n)?-1:1)*("asc"===t._matSort.direction?1:-1)})):e}},{key:"disconnect",value:function(){}},{key:"filteredData",get:function(){return this._filteredDataChange.value},set:function(e){this._filteredDataChange.next(e)}},{key:"filter",get:function(){return this._filterChange.value},set:function(e){this._filterChange.next(e)}}]),i}(z.b),ht=[{path:"invoices",component:ut,resolve:{data:je}},{path:"invoices/:id/:ref",component:Qe,resolve:{data:Ne}},{path:"orders",component:ye,resolve:{data:W}},{path:"orders/:id/:ref",component:Le,resolve:{data:Ze}}],vt=((dt=function e(){_classCallCheck(this,e)}).\u0275mod=g.Rb({type:dt}),dt.\u0275inj=g.Qb({factory:function(e){return new(e||dt)},providers:[je,Ne,W,Ze],imports:[[o.j.forChild(ht),n.c,a.a,c.a,d.d,s.b,l.c,b.b,r.u,p.b,u.c,m.b,f.l,h.c,v.a,R.forRoot({apiKey:"AIzaSyD81ecsCj4yYpcXSLFcYU97PvRsE_X8Bx8"}),N.a,U.a]]}),dt)}}]);