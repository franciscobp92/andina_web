(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{774:function(e,t,n){"use strict";var r=n(222),a=n(7),c=n(258),o=n(775),i=n(13),u=n.n(i);function s(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){s(c,r,a,o,i,"next",e)}function i(e){s(c,r,a,o,i,"throw",e)}o(void 0)}))}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e,t,n,i=Object(r.a)(c.b.feed),s=i.fetch,f=i.setStateProp,m=b(i,["fetch","setStateProp"]),O=Object(o.a)(),g=O.getFeed,j=O.getSelections,v=O.getSelectionOptions,S=g(),y=(S||{}).source,h=void 0===y?"":y,w=j(),E=v();return d(d({},m),{},{fetch:function(e){s("GET",Object(a.g)("/form-feeds/".concat(e)))},setFeed:function(e){return f("feed",e)},setStep:function(e){return f("step",e)},syncSelection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s("POST",Object(a.g)("/form-feeds/".concat(e,"/sync-selection")),{selection:t,form:h,return_all_options:n},{syncSelection:!0})},fetchMappingData:function(e){s("GET",Object(a.g)("/form-feeds/".concat(e,"/mapping-data")),{},{mappingDataFetch:!0})},setFormSource:function(e){var t=S?d(d({},S),{},{source:e}):{source:e};f("feed",t)},setSelection:function(e,t){if(E){var n=9999,r=d({},w);Object.keys(E).map((function(a){var c=E[a];c.slug===e&&(n=parseInt(a),r=d(d({},r),{},p({},e,t))),a>n&&c.slug in r&&delete r[c.slug]})),f("selection",r),f("updateFeed",!1),f("mapData",{}),f("updateStatus",1)}else f("selection",d(d({},w),{},p({},e,t)))},resetAll:function(){f("step","selection"),f("feed",null),f("selectionOptions",{}),f("selectionTotal",10),f("selection",{}),f("error",null),f("editMapFieldsMode",!1)},resetSelection:function(){f("selectionOptions",{}),f("selectionTotal",10),f("selection",{})},setFeedStatus:function(e){return f("feed",d(d({},S),{},{status:e}))},setEditMapMode:function(e){return f("editMapFieldsMode",e)},setError:function(e){return f("error",e)},updateStepTwo:(n=l(regeneratorRuntime.mark((function e(t,n,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("updateStepTwoStatus",1),e.prev=1,e.next=4,u()({path:Object(a.g)("/form-feeds/".concat(t)),method:"POST",data:d(d({},n),{},{status:r})});case 4:(c=e.sent)&&c.result&&c.result.id&&(f("updateStepTwoStatus",2),f("feed",c.result)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),f("updateStepTwoStatus",3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(e,t,r){return n.apply(this,arguments)}),resetUpdateStepTwoStatus:function(){return f("updateStepTwoStatus",null)},updateStepThree:(t=l(regeneratorRuntime.mark((function e(t,n,r){var c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("updateStepThreeStatus",1),e.prev=1,c=d(d({},n),{},{status:r}),o={content:JSON.stringify(c)},e.next=6,u()({path:Object(a.g)("/form-feeds/".concat(t,"/save-email-data")),method:"POST",data:o});case 6:(i=e.sent)&&i.result&&i.result.id&&(f("editMapFieldsMode",!0),f("updateStepThreeStatus",2),f("feed",i.result)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),f("updateStepThreeStatus",3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(e,n,r){return t.apply(this,arguments)}),resetUpdateStepThreeStatus:function(){return f("updateStepThreeStatus",null)},setIncentivizeEmail:function(e){var t=S&&S.data?S.data:{};t.incentivize_email=e,f("feed",d(d({},S),{},{data:t}))},setMarketingStatus:function(e){var t=S&&S.data?S.data:{};t.marketing_status=e,f("feed",d(d({},S),{},{data:t}))},setAddTagEnabled:function(e){var t=S&&S.data?S.data:{};t.add_tag_enable=e,f("feed",d(d({},S),{},{data:t}))},setTagList:function(e){var t=S&&S.data?S.data:{};t.tag_to_add=e,f("feed",d(d({},S),{},{data:t}))},setRedirectMode:function(e){var t=S&&S.data?S.data:{};t.redirect_mode=e,f("feed",d(d({},S),{},{data:t}))},setRedirectUrl:function(e){var t=S&&S.data?S.data:{};t.redirect_url=e,f("feed",d(d({},S),{},{data:t}))},setNotSendToSubscribed:function(e){var t=S&&S.data?S.data:{};t.not_send_to_subscribed=e,f("feed",d(d({},S),{},{data:t}))},updateStatus:(e=l(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("updateStatusStatus",1),e.prev=1,e.next=4,u()({path:Object(a.g)("/form-feeds/".concat(t,"/status")),method:"POST",data:{status:n}});case 4:(r=e.sent)&&r.result&&r.result.id&&(f("updateStatusStatus",2),f("feed",r.result)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),f("updateStatusStatus",3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(t,n){return e.apply(this,arguments)}),resetUpdateStatusStatus:function(){return f("updateStatusStatus",null)}})}},775:function(e,t,n){"use strict";var r=n(221),a=n(258);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)(a.b.feed),t=e.getStateProp;return o(o({},u(e,["getStateProp"])),{},{getFeed:function(){return t("feed")},getStep:function(){var e=t("editMapFieldsMode"),n=t("step");return e&&"selection"===n?"mapping":n},getSelectionOptions:function(){return t("selectionOptions")},getSelectionOptionsTotal:function(){return t("selectionTotal")},getSelections:function(){return t("selection")},getSelectionValue:function(e){var n=t("selection");return n&&n[e]?n[e]:""},getLoading:function(){return t("isLoading")},getFormFields:function(){return t("fields")},getFormHeaders:function(){return t("headers")},getUpdateStepTwoStatus:function(){return t("updateStepTwoStatus")},getUpdateStepThreeStatus:function(){return t("updateStepThreeStatus")},getUpdateStatusStatus:function(){return t("updateStatusStatus")},getEditMapMode:function(){return t("editMapFieldsMode")}})}},800:function(e,t,n){},811:function(e,t,n){"use strict";var r=n(0),a=n(34);t.a=function(e){return Object(r.createElement)(a.a,null)}},823:function(e,t,n){},932:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n(243),o=n(774),i=(n(800),n(823),n(775)),u=n(811),s=n(4),l=n(219),f=n(14),d=n(22),p=n(7),b=n(80),m=n(81),O=n(34),g=n(3),j=n(13),v=n.n(j),S=n(12);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.feed,n=E(Object(r.useState)({loading:!1,success:!1,error:!1,message:""}),2),c=n[0],i=n[1],u=E(Object(r.useState)(!1),2),l=u[0],f=u[1],d=E(Object(r.useState)(""),2),j=d[0],y=d[1],w=E(Object(r.useState)(!1),2),P=w[0],k=w[1],T=Object(o.a)().setFeed;Object(r.useEffect)((function(){t&&t.title&&y(t.title)}),[]);var _=function(){if(i(h(h({},c),{},{loading:!0})),Object(g.isEmpty)(j))i({loading:!0,error:!0,message:Object(a.__)("Title is required.","wp-marketing-automations")}),setTimeout((function(){i({loading:!1,success:!1,error:!1,message:""})}),2e3);else{var e=t;try{v()({path:Object(p.g)("/form-feeds/".concat(t.id)),method:"POST",data:h(h({},e),{},{title:j})}).then((function(e){200===e.code?(i({loading:!0,success:!0,message:e.message}),setTimeout((function(){i({loading:!1,success:!1,error:!1,message:""}),T(e.result),f(!1)}),2e3)):(i({loading:!0,error:!0,message:e.message}),setTimeout((function(){i({loading:!1,success:!1,error:!1,message:""})}),2e3))}))}catch(e){i({loading:!0,error:!0,message:e.message}),setTimeout((function(){i({loading:!1,success:!1,error:!1,message:""})}),2e3)}}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{onClick:function(){return f(!0)},style:{cursor:"pointer",lineHeight:0}},Object(r.createElement)(S.a,{icon:"edit",size:15,color:"#006ba1"})),l&&Object(r.createElement)(s.Modal,{title:"Title",onRequestClose:function(){return f(!1)},className:"bwf-admin-modal bwf-admin-modal-medium"},c.loading?c&&c.success&&c.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(b.a,null),Object(r.createElement)("div",{className:"bwf-h1"},c.message)):c&&c.error&&c.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(m.a,null),Object(r.createElement)("div",{className:"bwf-h1"},c.message)):Object(r.createElement)(O.a,null):Object(r.createElement)("div",{onKeyPress:function(e){"Enter"===e.key&&(Object(g.isEmpty)(j)?k(!0):_())}},P&&Object(r.createElement)(s.Notice,{status:"error",onRemove:function(){return k("")}},Object(a.__)("Title is required","wp-marketing-automations")),Object(r.createElement)(s.TextControl,{type:"text",value:j,autoFocus:!0,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),onChange:function(e){y(e),Object(g.isEmpty)(e)?k(!0):k(!1)}}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(s.Button,{isPrimary:!0,onClick:function(){Object(g.isEmpty)(j)?k(!0):_()}},Object(a.__)("Update","wp-marketing-automations"))))))},T=Object(r.lazy)((function(){return n.e(70).then(n.bind(null,928))})),_=Object(r.lazy)((function(){return n.e(40).then(n.bind(null,903))})),M=Object(r.lazy)((function(){return n.e(53).then(n.bind(null,929))})),F=Object(r.lazy)((function(){return n.e(69).then(n.bind(null,904))}));t.default=function(e){var t=e.match.params.id;Object(p.d)("Form #"+t);var n=Object(o.a)(),b=n.fetch,m=n.resetAll,O=Object(i.a)(),g=O.getFeed,j=O.getLoading,v=O.getStep,S=O.getError,y=O.getEditMapMode,h=g(),w=v(),E=!!Object(p.X)()&&j(),P=S(),x=y(),N=location&&location.search?Object(d.parse)(location.search.substring(1)):{},D=Object(l.a)(),A=D.setActive,I=D.resetHeaderMenu,L=D.setBackLink,R=D.setL2Title,U=D.setBackLinkLabel,z=D.setPageHeader,C=D.setL2Nav,H=D.setActiveMultiple,q=D.setL2NavType,B=D.setL2Content,J=D.setL2NavAlign,G=function(){h&&h.status&&!K&&!x?(H({leftNav:"forms",rightNav:"overview"}),q("menu"),C({overview:{name:Object(a.__)("Overview","wp-marketing-automations"),link:"admin.php?page=autonami&path=/forms/"+t}}),J("left")):(B(""),C({}))};Object(r.useEffect)((function(){I(),A("leftNav","forms"),L(Object(f.f)({},"/forms",N)),U("All Forms"),h&&h.title&&R(function(e){return Object(r.createElement)("div",{className:"bwf-display-flex"},e.title,Object(r.createElement)(k,{feed:e}))}(h)),z("Forms"),G()}),[h]),Object(r.useEffect)((function(){G()}),[x]),Object(r.useEffect)((function(){return parseInt(t)>0&&Object(p.X)()&&b(parseInt(t)),function(){m()}}),[t]);var X=[{key:"selection",label:Object(a.__)("Select Form","wp-marketing-automations"),content:Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(u.a,null)},Object(r.createElement)(T,{feedId:t}))},{key:"mapping",label:Object(a.__)("Mapping","wp-marketing-automations"),content:Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(u.a,null)},Object(r.createElement)(_,{feedId:t}))},{key:"double_optin",label:Object(a.__)("Lead Notification","wp-marketing-automations"),content:Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(u.a,null)},Object(r.createElement)(M,{feedId:t}))}];if(!h)return E?Object(r.createElement)(u.a,null):P?Object(r.createElement)(s.Notice,{status:"error"},P.message?P.message:Object(a.__)("Unknown Error","wp-marketing-automations")):Object(r.createElement)(u.a,null);var K=1===parseInt(h.status);return!h.status||K||x?Object(r.createElement)(c.a,{steps:X,currentStep:w,isPending:E}):Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(u.a,null)},Object(r.createElement)(F,null))}}}]);