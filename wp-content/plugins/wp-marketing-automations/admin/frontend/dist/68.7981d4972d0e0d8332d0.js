(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{887:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(7),c=a(13),o=a.n(c),i=a(2),l=a(46),s=a(122),u=a(17),m=a(4),b=a(220),p=a(786),f=a(803),d=a(82),j=a(56),O=a(3),g=a(804),w=a(223),y=a(37),h=a(5),v=a.n(h),_=a(50),E=a(79),k=a(14),A=a(12),S=a(226);function C(e,t,a,n,r,c,o){try{var i=e[c](o),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(e){var t=Object(k.h)(),a=N(Object(n.useState)(25),2),c=a[0],h=a[1],x=N(Object(n.useState)(0),2),T=x[0],L=x[1],I=N(Object(n.useState)(0),2),P=I[0],R=I[1],F=N(Object(n.useState)([]),2),M=F[0],q=F[1],z=N(Object(n.useState)([]),2),B=z[0],J=z[1],Q=N(Object(n.useState)(!1),2),U=Q[0],D=Q[1],G=N(Object(n.useState)(),2),H=G[0],V=G[1];Object(p.a)("recovered",B);var $=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,a,n,l,s,u,m,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},D(!0),e.prev=2,a="",t&&t.search&&(a="search=".concat(t.search)),e.next=7,o()({method:"GET",path:Object(r.g)("/carts/recovered?offset=".concat(T,"&limit=").concat(c,"&").concat(a))});case 7:if((n=e.sent)&&n.result&&Array.isArray(n.result)){e.next=11;break}return V(Object(i.__)("Blank response returned","wp-marketing-automations")),e.abrupt("return");case 11:l=n.total_count,s=n.result,u=n.limit,m=n.offset,l&&R(parseInt(l)),u&&h(parseInt(u)),m&&L(parseInt(m)),s&&q(s),n.hasOwnProperty("count_data")&&J(n.count_data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),V(e.t0&&e.t0.message?e.t0.message:Object(i.__)("Unknown Error Occurred","wp-marketing-automations"));case 22:D(!1);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function o(e){C(c,n,r,o,i,"next",e)}function i(e){C(c,n,r,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(r.d)("Recovered Carts"),$()}),[T,c]);var K=Object(n.createElement)("span",{className:"bwfan_tooltip_text","data-position":"top"},Object(n.createElement)("b",null,"Recovered")," - Carts which are converted through are marked as Recovered."),W=[{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"contact",label:Object(i.__)("Contact","wp-marketing-automations"),isLeftAligned:!0},{key:"detail",label:Object(i.__)("Detail","wp-marketing-automations"),isLeftAligned:!0},{key:"items",label:Object(i.__)("Items","wp-marketing-automations"),isLeftAligned:!0},{key:"total",label:Object(i.__)("Total","wp-marketing-automations"),isLeftAligned:!0},{key:"order",label:Object(i.__)("Order","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center"},{key:"show",label:"",isLeftAligned:!0},{key:"status",label:Object(n.createElement)("div",{className:"bwf-display-flex",style:{alignItems:"start"}},Object(i.__)("Status","wp-marketing-automations")," ",Object(n.createElement)(_.a,{position:"bottom",toolTipText:K,icon:"info",iconSize:20,size:200})),isLeftAligned:!0,cellClassName:"bwf-col-center"}],X=function(e){e!==c&&(L(0),h(e))},Y=function(e){return Object(n.createElement)(l.a,{label:Object(i.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(a){var r=a.onToggle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(s.a,{isClickable:!0,onInvoke:function(){Object(k.j)({path:"/carts/recovered/".concat(e.id,"/tasks")},"/",t),r()}},Object(n.createElement)(u.a,{justify:"flex-start"},Object(n.createElement)(u.c,null,Object(n.createElement)(A.a,{icon:"view"})),Object(n.createElement)(u.c,null,Object(i.__)("View Tasks","wp-marketing-automations")))))}})},Z=function(e){return e.total?e.currency?Object(j.a)(e.currency).formatAmount(e.total):e.total:"-"},ee=function(e){return e.order_id?Object(n.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?post=".concat(e.order_id,"&action=edit")},"#",e.order_id," ",e.buyer_name):"-"},te=function(e){return Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(n.createElement)(u.a,{justify:"justify",align:"top"},Object(n.createElement)(u.c,null,Object(n.createElement)(A.a,{icon:"mail"})),Object(n.createElement)(u.c,null,e.email)),e.phone&&Object(n.createElement)(u.a,{justify:"justify",align:"top"},Object(n.createElement)(u.c,null,Object(n.createElement)(A.a,{icon:"phone"})),Object(n.createElement)(u.c,null,e.phone)),!e.phone&&!e.email&&Object(n.createElement)("span",null,"-"))},ae=function(e){var t=Object(n.createElement)(w.a,{contact:{f_name:e.f_name?e.f_name:"",l_name:e.l_name?e.l_name:"",email:e.email},dateText:Object(i.__)("Last Active:","wp-marketing-automations"),lowerText:e.date?e.diffstring:"-"});return e.contact_id?Object(n.createElement)(y.a,{href:"admin.php?page=autonami&path=/contact/"+e.contact_id,type:"bwf-crm",className:"bwf-a-no-underline"},t):t},ne=Array.isArray(M)?M.map((function(e){return[{display:Y(e),value:""},{display:ae(e),value:""},{display:te(e),value:""},{display:(t=e.items,a="",r=[],Object.entries(t).map((function(e){var t=N(e,2),c=t[0],o=t[1];Object(O.isEmpty)(a)&&(a=Object(n.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?action=edit&post="+c},o)),r.push(Object(n.createElement)("a",{target:"_blank",className:"bwf-a-no-underline",href:"post.php?action=edit&post="+c},o))})),Object(n.createElement)("div",{className:"bwf-table-v-center"},Object(O.isEmpty)(a)?"-":a,!Object(O.isEmpty)(r)&&r.length>1&&Object(n.createElement)(d.a,{items:r}))),value:e.items},{display:Z(e),value:e.total},{display:ee(e),value:e.order_id},{display:Object(n.createElement)(g.a,{cart:e}),value:""},{display:(e.status,e.id,Object(n.createElement)("span",null,Object(i.__)("Recovered","wp-marketing-automations"))),value:e.status}];var t,a,r})):[],re=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(n.createElement)(A.a,{icon:"cart-icon",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(i.__)("Cart Tracking is disabled","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(i.__)("Click on the button below to go to Settings > Carts to enable cart tracking. Once activated, you will be able to capture emails as soon buyer enters it.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(i.__)("Enable Tracking","wp-marketing-automations"),onClick:function(){Object(k.j)({page:"autonami",path:"/settings"},"/",{})}}]}}];return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(E.a,null),Object(r.T)()?Object(n.createElement)(n.Fragment,null,H&&Object(n.createElement)(m.Notice,{status:"error"},H),Object(n.createElement)(b.a,{className:v()("bwfcrm-forms-list-table",{"has-search":!0}),rows:ne,headers:W,query:{paged:T/c+1},rowsPerPage:c,totalRows:P,isLoading:U,onPageChange:function(e,t){L((e-1)*c)},onQueryChange:function(e){return"per_page"!==e?function(){}:X},rowHeader:!0,showMenu:!1,actions:[Object(n.createElement)(f.a,{showSearchBy:!1,onSearch:function(e){$(e)}})],emptyMessage:Object(i.__)("No recovered carts found","wp-marketing-automations")})):Object(n.createElement)(S.a,{data:re}))}}}]);