(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{792:function(e,t,a){"use strict";var r=a(222),n=a(7);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}t.a=function(){var e=Object(r.a)("linkTriggerListData"),t=e.fetch,a=e.setStateProp,c=s(e,["fetch","setStateProp"]),l=Object(r.a)("singleLinkTriggerData"),o=l.fetch,b=l.setStateProp;return i(i({},c),{},{fetchAll:function(e,a,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.s,l={offset:a,limit:r,search:i,status:c};t("GET",Object(n.g)("/link-triggers"),l)},setLinkListValues:function(e,t){a(e,t)},fetchSingleLink:function(e){b("error",{}),o("GET",Object(n.g)("/link-trigger/".concat(e)))},setSingleLinkValue:function(e,t){b(e,t)}})}},793:function(e,t,a){"use strict";var r=a(221);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}t.a=function(){var e=Object(r.a)("linkTriggerListData"),t=e.getStateProp,a=l(e,["getStateProp"]),n=Object(r.a)("singleLinkTriggerData"),i=n.getStateProp,s=n.getLoading;return c(c({},a),{},{getAllLists:function(){return t("data")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getCountData:function(){return t("countData")},getPerPageCount:function(){return parseInt(t("limit"))},getPageOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total_count"))},getActions:function(){return t("actions")},getSingleLinkLoad:function(){return s()},getSingleLinkData:function(){return i("data")},getLinkActionList:function(){return i("actionList")},getLinkActionSchemaList:function(){return i("actionSchema")},getLinkEditableStatus:function(){return i("isEditable")},getSingleLinkError:function(){return i("error")}})}},807:function(e,t,a){"use strict";var r=a(219),n=a(0);t.a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},i=Object(r.a)(),l=i.setActiveMultiple,s=i.setL2NavType,o=i.setL2Nav,b=i.resetHeaderMenu,m=i.setPageHeader,u=i.setPageCountData,f=i.setL2Content;return Object(n.useEffect)((function(){b(),l({leftNav:"link-triggers",rightNav:t}),s("menu"),o(c.links_triggers_nav),m("Link Triggers"),u({templates:a}),e&&f(e)}),[a]),!0}},838:function(e,t,a){},934:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(807),c=a(2),i=a(219),l=a(7),s=a(14),o=a(4),b=a(366),m=a(793),u=a(792),f=a(13),O=a.n(f),g=a(3),j=a(79),d=a(46),p=a(122),v=a(17),w=a(12),E=a(369),k=a(309);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t,a,r,n,c,i){try{var l=e[c](i),s=l.value}catch(e){return void a(e)}l.done?t(s):Promise.resolve(s).then(r,n)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,c=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var S=function(e){var t=e.id,a=Object(r.useContext)(l.b),n=L(Object(r.useState)([]),2),s=n[0],f=n[1],_=Object(l.K)(),h=Object(m.a)(),P=h.getSingleLinkLoad,S=h.getSingleLinkData,C=h.getLinkActionList,D=h.getLinkActionSchemaList,A=h.getLinkEditableStatus,x=Object(u.a)().setSingleLinkValue,T=S(),I=T.title,R=void 0===I?"":I,B=T.desc,H=void 0===B?"":B,U=T.redirect_url,V=void 0===U?"":U,F=T.redirect_url_title,M=void 0===F?"":F,Q=T.actions,q=void 0===Q?{}:Q,G=T.action_run,J=void 0===G?"once":G,Y=T.status,K=T.total_clicked,W=T.hash,$=T.add_contact_note,z=void 0!==$&&$,X=T.enable_auto_login,Z=void 0!==X&&X,ee=T.auto_login,te=void 0===ee?{unit:"days",text:7}:ee,ae=P(),re=C(),ne=D(),ce=A(),ie=Object(i.a)().setL2Title;Object(r.useEffect)((function(){ie(R)}),[R,ae]);var le=function(){var e={};return Object.keys(q).map((function(t){if(Object(g.isEmpty)(q[t])||(e[t]=q[t]),Object(g.isObject)(e[t])){var a={};Object.keys(e[t]).map((function(r){Object(g.isEmpty)(e[t][r])||(a[r]=e[t][r])})),e[t]=a}})),e},se=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>0&&void 0!==i[0]?i[0]:2,oe()){e.next=13;break}return a(Object(c.__)("Updating link triggerâ€¦","wp-marketing-automations")),n={title:R,redirect_url:V,redirect_url_title:M,action_run:J,desc:H,actions:le(),status:r,add_contact_note:z,enable_auto_login:Z,auto_login:te},e.prev=4,e.next=7,O()({path:Object(l.g)("/link-trigger/".concat(t)),method:"POST",data:n}).then((function(e){200==e.code?(x("data",e.result),x("isEditable",!1),a(e.message)):a(e.message)}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),a(e.t0.message);case 12:Object(l.Q)(a,1e3);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})),function(){var t=this,a=arguments;return new Promise((function(r,n){var c=e.apply(t,a);function i(e){N(c,r,n,i,l,"next",e)}function l(e){N(c,r,n,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),oe=function(){var e=!1,t=[];Object(g.isEmpty)(R)&&(e=!0,t.push(Object(c.__)("Name is required field.","wp-marketing-automations"))),Object(g.isEmpty)(V)&&(e=!0,t.push(Object(c.__)("Redirect URL is required field.","wp-marketing-automations")));var a=!1;return Object.keys(q).map((function(e){Object(g.isEmpty)(q[e])&&"new"!==e&&(a=!0),Object(g.isObject)(q[e])&&Object.keys(q[e]).map((function(t){Object(g.isEmpty)(q[e][t])&&(a=!0)}))})),a&&(e=!0,t.push(Object(c.__)("Please fill all action values.","wp-marketing-automations"))),f(t),e},be=function(){var e=_+"/?bwfan-link-trigger="+W;return Object(r.createElement)("div",{className:"bwf-link-trigger-copy"},Object(r.createElement)("div",{key:0,className:"bwf-smart-url"},e),Object(r.createElement)("div",{key:1,className:"bwf-copy-icon",onClick:function(){return t=e,(r=document.createElement("textarea")).value=t,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),a(Object(c.__)("Link copied","wp-marketing-automations")),void Object(l.Q)(a,1e3);var t,r}},Object(r.createElement)(w.a,{icon:"copy"})))};return Object(r.createElement)(r.Fragment,null,ae?Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwfcrm-link-trigger-loading"},Object(r.createElement)(o.Card,{className:"bwf-crm-link-trigger-report-detail-wrap"},Object(r.createElement)(o.CardHeader,{className:"bwf-crm-link-trigger-report-header"},Object(r.createElement)("span",{className:"bwf-link-trigger-title bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))),Object(r.createElement)(o.CardBody,null,Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-section"},[1,2].map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-placeholder-temp"})}))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("hr",null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)("div",{key:3,className:"bwf-action-placeholder"},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("hr",null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)("div",{key:4,className:"bwf-action-placeholder"},[5,6].map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-placeholder-temp"})})))),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("hr",null),Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)("div",{className:"bwf-btn-section"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn"})))))):ce||0===parseInt(Y)?Object(r.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(r.createElement)(o.Card,{className:"bwf-crm-link-trigger-detail-wrap"},Object(r.createElement)(o.CardHeader,{className:"bwf-crm-link-trigger-header"},Object(r.createElement)("span",{className:"bwf-link-trigger-title"},Object(c.__)("Link Trigger","wp-marketing-automations"))),Object(r.createElement)(o.CardBody,{className:"bwf-crm-link-trigger-content"},!Object(g.isEmpty)(s)&&Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)(j.a,null),Object(r.createElement)(o.Notice,{status:"error",is:!0,isDismissible:!0,className:"bwf-mtb-10",onRemove:function(){return f([])}},s.map((function(e){return Object(r.createElement)(r.Fragment,null,e,Object(r.createElement)("br",null))})))),Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)(o.TextControl,{value:R,label:Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Name","wp-marketing-automations")),className:"bwf-input-field",placeholder:Object(c.__)("Enter Name","wp-marketing-automations"),onChange:function(e){x("data",y(y({},T),{},{title:e}))}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(o.TextareaControl,{label:Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Description","wp-marketing-automations")),type:"text",value:H,placeholder:Object(c.__)("Enter Description","wp-marketing-automations"),onChange:function(e){x("data",y(y({},T),{},{desc:e}))}}),Object(r.createElement)("div",{className:"bwf_clear_8"}),Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Redirect URL","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_8"}),Object(r.createElement)(E.a,{title:M,url:V,setValue:function(e){x("data",y(y({},T),{},{redirect_url:Object(g.isEmpty)(e)?"":e.label,redirect_url_title:Object(g.isEmpty)(e)?"":e.title}))},showOverview:!0}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Actions")),Object(r.createElement)("div",{className:"bwf_clear_8"}),Object(r.createElement)(b.b,{actions:re,actionSchema:ne,value:Object(g.isEmpty)(q)?{new:{}}:q,setActionValue:function(e){x("data",y(y({},T),{},{actions:e}))}})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(o.ToggleControl,{label:Object(c.__)("Log Actions as Contact Note","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){x("data",y(y({},T),{},{add_contact_note:e}))},checked:!!z})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)(o.ToggleControl,{label:Object(c.__)("Enable Auto Login","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){x("data",y(y({},T),{},{enable_auto_login:e}))},checked:!!Z})),Object(r.createElement)("div",{className:"bwf_clear_10"}),!!Z&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(k.a,{units:[{value:"hours",label:Object(c.__)("Hours","wp-marketing-automations")},{value:"days",label:Object(c.__)("Days","wp-marketing-automations")},{value:"weeks",label:Object(c.__)("Weeks","wp-marketing-automations")},{value:"months",label:Object(c.__)("Months","wp-marketing-automations")}],onChange:function(e){x("data",y(y({},T),{},{auto_login:e}))},value:te}),Object(r.createElement)("div",{className:"hint"},Object(c.__)("Auto Login will expire after ","wp-marketing-automations")+(te.hasOwnProperty("text")?parseInt(te.text):"-")+" "+(te.hasOwnProperty("unit")?te.unit:"")+". "+Object(c.__)("This would work for all user roles except Administrator and Editor.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("hr",null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-section"},Object(r.createElement)("div",{className:"bwf_text_right"},Object(r.createElement)(o.Button,{onClick:function(){se(2,!0)},className:"bwf-ml-10",isPrimary:!0},Object(c.__)("Save","wp-marketing-automations"))))))):Object(r.createElement)("div",{className:"bwfcrm-overview-wrap"},Object(r.createElement)(o.Card,{className:"bwf-crm-link-trigger-detail-wrap"},Object(r.createElement)(o.CardHeader,{className:"bwf-crm-link-trigger-header"},Object(r.createElement)("span",{className:"bwf-link-trigger-title"},Object(c.__)("Overview","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex bwf-bulk-card-header"},Object(r.createElement)("span",null,2===parseInt(Y)?"Active":"Inactive"),Object(r.createElement)(d.a,{label:Object(c.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){se(2===parseInt(Y)?1:2,!0),t()}},Object(r.createElement)(v.a,{justify:"flex-start"},Object(r.createElement)(v.c,null,2!==parseInt(Y)?"Activate":"Deactivate"))),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){x("isEditable",!0),t()}},Object(r.createElement)(v.a,{justify:"flex-start"},Object(r.createElement)(v.c,null,Object(c.__)("Edit","wp-marketing-automations")))))}}))),Object(r.createElement)(o.CardBody,null,Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Title","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},R)),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Description","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},Object(g.isEmpty)(H)?"-":H)),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Trigger URL","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},Object(g.isEmpty)(_)?"-":be())),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Destination URL","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},Object(g.isEmpty)(V)?"-":V)),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Actions","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},Object(r.createElement)(b.a,{actions:re,actionSchema:ne,value:q}))),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Total Clicks","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},parseInt(K)>0?parseInt(K):"-")),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Log Actions as Contact Note","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},z?"Yes":"No")),Object(r.createElement)("div",{className:"bwf-link-trigger-list"},Object(r.createElement)("div",{className:"bwf-link-trigger-list-label"},Object(c.__)("Auto Login","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-link-trigger-list-value"},Z?"Yes":"No"))))))};a(838),t.default=function(e){var t=e.match.params.id,a=Object(s.h)(),b=Object(u.a)().fetchSingleLink,f=Object(i.a)(),O=f.setBackLink,j=f.setBackLinkLabel,d=f.setL2Nav,p=(0,Object(m.a)().getSingleLinkError)();if(Object(n.a)(Object(c.__)("Link Triggers","wp-marketing-automations")),Object(r.useEffect)((function(){Object(l.d)("Link Triggers #"+t),d(""),O(Object(s.f)({},"/link-triggers",a)),j(Object(c.__)("All Link Triggers","wp-marketing-automations"))})),Object(r.useEffect)((function(){b(t)}),[]),!Object(g.isEmpty)(p)){var v="No link trigger entry found with provided ID.";return p.hasOwnProperty("message")&&!Object(g.isEmpty)(p.message)&&(v=p.message),Object(r.createElement)(o.Notice,{status:"error",isDismissible:!1,className:"bwf-mtb-10"},v)}return Object(r.createElement)("div",{className:"bwf-link-trigger-edit-section"},Object(r.createElement)(S,{id:t}))}}}]);