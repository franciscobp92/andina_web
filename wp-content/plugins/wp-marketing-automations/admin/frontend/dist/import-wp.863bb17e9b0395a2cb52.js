(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{763:function(e,t,r){"use strict";var n=r(0),a=r(35),c=r(2),o=r(758);t.a=function(e){var t=e.selected,r=e.onTagsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){r(e)},onRemoveTag:function(e,n){var a=t.filter((function(t){return!(t.key==e&&t.label==n)}));r(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},765:function(e,t,r){"use strict";var n=r(0),a=r(35),c=r(2),o=r(758);t.a=function(e){var t=e.selected,r=e.onListsChange;return Object(n.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(n.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add to Lists","wp-marketing-automations")),Object(n.createElement)(a.a,{autocompleter:o.a,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){r(e)},onRemoveTag:function(e){var n=t.filter((function(t){return t.key!=e}));r(n)},placeholder:Object(c.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},771:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);var a=function(e,t){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])}},849:function(e,t,r){},880:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(13),c=r.n(a),o=r(7),i=r(4),l=r(34),s=r(2),u=r(232),m=r(771),b=r(3);function f(e,t,r,n,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.exportId,r=void 0===t?"":t,a=e.setLoading,i=p(Object(n.useState)(!1),2),l=i[0],d=i[1],O=p(Object(n.useState)({}),2),j=O[0],w=O[1],v=p(Object(n.useState)(0),2),g=v[0],h=v[1],y=p(Object(n.useState)(!1),2),E=y[0],_=y[1];Object(n.useEffect)((function(){100===parseInt(g)&&setTimeout((function(){_(!0)}),2e3)}),[g]);var S=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c()({method:"GET",path:Object(o.g)("/contact/export/".concat(r))}).then((function(e){200==e.code&&w(e.result)}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var c=e.apply(t,r);function o(e){f(c,n,a,o,i,"next",e)}function i(e){f(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(!Object(b.isEmpty)(j))if(3==j.status)a(!1),d(!0),h(100);else{var e=parseInt(j.offset)/parseInt(j.count)*100;h(e<100?parseInt(e):100)}}),[j]),Object(m.a)((function(){l||S()}),5e3),Object(n.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},r&&l&&E?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-h4"},Object(s.__)("Your file is ready for download.","wp-marketing-automations"))):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(s.__)("Export Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(s.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(u.a,{status:"striped",size:"lg",progress:parseInt(g),text:"".concat(g,"%")}),Object(n.createElement)("div",{className:"bwf_clear_20"})))};function j(e,t,r,n,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=e.title,r=e.fields,a=e.expfilter,u=e.setPending,m=e.setAdd,b=e.contactCount,f=w(Object(n.useState)(!1),2),p=f[0],d=f[1],v=w(Object(n.useState)(""),2),g=v[0],h=v[1];Object(n.useEffect)((function(){u(!0),y()}),[]);var y=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={title:t,fields:r,filters:a,count:b},e.next=4,c()({method:"POST",data:n,path:Object(o.g)("/contact/export/add")}).then((function(e){200==e.code&&(Object(o.x)()||(bwfcrm_contacts_data.first_export_id=2),d(!0),e.result.hasOwnProperty("id")&&h(e.result.id))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var c=e.apply(t,r);function o(e){j(c,n,a,o,i,"next",e)}function i(e){j(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(s.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(i.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three bwf-p-20"},Object(n.createElement)("div",{className:"bwf-p-20",style:{alignItems:"center"}},p?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),g?Object(n.createElement)(O,{exportId:g,setLoading:u}):Object(n.createElement)("div",{className:"bwf-h4 bwf-t-center"},"Export task has been added we will let you know when the file has been created."),Object(n.createElement)("div",{className:"bwf_clear_20"})):Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.a,null),Object(n.createElement)("div",{className:"bwf_clear_20"}))),Object(n.createElement)("div",{className:"bwf-display-flex"},Object(n.createElement)(i.Button,{isPrimary:!0,onClick:function(){m(!1)}},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(s.__)("Go to Export List","wp-marketing-automations"))))))}},923:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(13),c=r.n(a),o=r(7),i=r(2),l=(r(849),r(4)),s=r(763),u=r(765);function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}return r}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t=e.roles,r=void 0===t?{}:t,a=e.onRolesSelected,c=b(Object(n.useState)(Object.keys(r)),2),o=c[0],f=c[1],p=b(Object(n.useState)(!0),2),d=p[0],O=(p[1],b(Object(n.useState)(!1),2)),j=O[0],w=O[1],v=b(Object(n.useState)(!1),2),g=v[0],h=v[1],y=b(Object(n.useState)([]),2),E=y[0],_=y[1],S=b(Object(n.useState)([]),2),k=S[0],N=S[1],I=b(Object(n.useState)(1),2),x=I[0],A=I[1],C={0:Object(i.__)("Unverified","wp-marketing-automation-crm"),1:Object(i.__)("Subscribed","wp-marketing-automation-crm"),2:Object(i.__)("Bounced","wp-marketing-automation-crm"),3:Object(i.__)("Unsubscribed","wp-marketing-automation-crm")};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(l.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(i.__)("User Roles","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},r&&Object.keys(r).map((function(e){return Object(n.createElement)(l.CheckboxControl,{checked:o.includes(e),key:e,label:r[e],onChange:function(t){return function(e,t){f(e?[].concat(m(o),[t]):o.filter((function(e){return e!==t})))}(t,e)}})})))),Object(n.createElement)("div",{className:"bwf-crm-import-section"},Object(n.createElement)("div",{className:"bwf-h3"},Object(i.__)("Contact Profile","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-c-import-field"},Object(n.createElement)(s.a,{onTagsChange:_,selected:E}),Object(n.createElement)(u.a,{onListsChange:N,selected:k})),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},Object(i.__)("Status","wp-marketing-automations")),Object(n.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){A(e.target.value)}},Object.keys(C).map((function(e){return Object(n.createElement)("option",{key:e,value:e,selected:x==e},C[e])}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(l.ToggleControl,{checked:j,label:Object(i.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return w(e)}}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)(l.ToggleControl,{label:Object(i.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:g,onChange:h})),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-form-buttons"},Object(n.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(n.createElement)(l.Button,{disabled:0===o.length,isPrimary:!0,onClick:function(){return a({roles:o,tags:E.map((function(e){return{id:e.key,value:e.label}})),lists:k.map((function(e){return{id:e.key,value:e.label}})),marketing_status:d,update_existing:j,disable_events:g,imported_contact_status:x})}},Object(i.__)("Import","wp-marketing-automations"))))),Object(n.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(n.createElement)(l.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(n.createElement)("span",null,Object(i.__)("Back","wp-marketing-automations")))))},O=r(232),j=r(771),w=r(784),v=r(14),g=r(22),h=r(3);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t,r,n,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t=e.requestData,r=k(Object(n.useState)(!1),2),a=r[0],s=r[1],u=k(Object(n.useState)(null),2),m=u[0],b=u[1],f=k(Object(n.useState)(t&&"importId"in t?parseInt(t.importId):0),2),p=f[0],d=f[1],y=m&&"log"in m?m.log:{},_=y.skipped,N=void 0===_?0:_,I=y.failed,x=void 0===I?0:I,A=y.succeed,C=void 0===A?0:A,P=k(Object(n.useState)(null),2),T=P[0],F=P[1],R=Object(w.a)().showBackButton,B=location&&location.search?Object(g.parse)(location.search.substring(1)):{},U=0,D=k(Object(n.useState)(5e3),2),L=D[0],M=D[1],$=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U++,e.prev=1,r=parseInt(p)>0?{import_id:p}:t,parseInt(p)>0?r.start_import=!1:r.start_import=!0,e.next=6,c()({method:"POST",data:r,path:Object(o.g)("/import/wp/status")});case 6:n=e.sent,b(n.result),d(parseInt(n.result.import_id)),n.result&&"status"in n.result&&"success"===n.result.status&&(Object(o.w)()||(bwfcrm_contacts_data.first_contact_id=1),M(null),R(!1),s(!0)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),M(null),R(!1),F(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var c=e.apply(t,r);function o(e){S(c,n,a,o,i,"next",e)}function i(e){S(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(j.a)((function(){Object(h.isEmpty)(p)&&0!=U||$()}),L),Object(n.useEffect)((function(){return R(!0),window.scrollTo(0,0),function(){R(!1)}}),[]),T||m&&!1 in m?Object(n.createElement)(l.Notice,{status:"error"},T&&"message"in T?T.message:Object(i.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):m?m&&"percent"in m?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(i.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(i.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(O.a,{status:m.status,size:"lg",progress:parseInt(m.percent),text:Object(i.__)("".concat(m.percent,"%"),"wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("p",null,"Skipped: ",parseInt(N)>0?N:0,", Failed:"," ",parseInt(x)>0?x:0,", Success:"," ",parseInt(C)>0?C:0)),a&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(n.createElement)(l.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){Object(v.j)(E(E({},B),{},{path:"/contacts"}),"/contacts",B)}},Object(i.__)("Go To Contacts","wp-marketing-automations")),!!m&&!!m.has_log_file&&Object(n.createElement)("a",{target:"_blank",href:"/wp-json"+Object(o.g)("/importer-log/download/".concat(p,"?bwf-nonce=").concat(Object(o.i)())),title:"Download",className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(n.createElement)(l.Button,{isSecondary:!0},Object(i.__)("Download Error Log","wp-marketing-automations")))))):null:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("h2",null,Object(i.__)("Import Progress","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-p bwf-p2"},Object(i.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_30"}),Object(n.createElement)(O.a,{status:"info",size:"lg",progress:0,text:Object(i.__)("0%","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_10"}),Object(n.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(N)>0?N:0,", Failed: ",parseInt(x)>0?x:0,", Success: ",parseInt(C)>0?C:0)))},x=r(781),A=r(34),C=r(79);function P(e,t,r,n,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){Object(o.d)("WP Importer");var t=e.step,r=T(Object(n.useState)({}),2),a=r[0],l=r[1],s=T(Object(n.useState)(null),2),u=s[0],m=s[1],b=T(Object(n.useState)(!1),2),f=b[0],p=b[1],O=(0,Object(x.a)().getExistingImports)().wp,j=Object(n.useContext)(o.b),w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,c()({method:"GET",path:Object(o.g)("/import/wp/roles")});case 4:t=e.sent,l(t.result),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),l(null),j(e.t0&&"message"in e.t0?e.t0.message:Object(i.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 12:Object(o.Q)(j,2e3),p(!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var c=e.apply(t,r);function o(e){P(c,n,a,o,i,"next",e)}function i(e){P(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){O?m({importId:O}):w()}),[]),Object(n.createElement)("div",{className:"bwf-crm-importer-wrap"},f&&Object(n.createElement)(A.a,null),2==t&&!u&&a&&Object(h.size)(a)>0&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(C.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(i.__)("Configuration","wp-marketing-automations"))),Object(n.createElement)(d,{roles:a,setStep:e.setStep,setImporter:e.setImporter,onRolesSelected:function(t){m(t),e.setStep(3)}})),3==t&&u&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(C.a,null),Object(n.createElement)("div",{className:"bwf-card-wrap"},Object(n.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(i.__)("Confirmation","wp-marketing-automations"))),Object(n.createElement)(I,{setStep:e.setStep,requestData:u,setImporter:e.setImporter})))}}}]);